<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å¹³æ—¶é‡åˆ°çš„ä¸€äº›csså†™æ³•</title>
      <link href="/2020/04/21/css/"/>
      <url>/2020/04/21/css/</url>
      
        <content type="html"><![CDATA[<h2 id="1-scaleåçš„å±…ä¸­æ“ä½œ"><a href="#1-scaleåçš„å±…ä¸­æ“ä½œ" class="headerlink" title="1.scaleåçš„å±…ä¸­æ“ä½œ"></a>1.scaleåçš„å±…ä¸­æ“ä½œ</h2><p>domè¢«scaleåï¼Œç”±äºç¼©å°çš„ä¸­å¿ƒç‚¹é»˜è®¤é€‰åœ¨äº†ä¸­é—´ï¼Œä¼šé€ æˆä¸€å®šçš„åç§»</p><pre><code class="css">{    transform: &#39;scale(0.9) translate(-50%)&#39;;    position: &#39;absolute&#39;;    left: 50%;    transform-origin: &#39;0 0 0&#39; // ç¼©å°ç‚¹é€‰åœ¨å·¦ä¸Šæ–¹}</code></pre><h2 id="2-å³è¾¹æ–‡å­—éšç€å·¦è¾¹å›¾ç‰‡å˜å°è€Œé€‚é…"><a href="#2-å³è¾¹æ–‡å­—éšç€å·¦è¾¹å›¾ç‰‡å˜å°è€Œé€‚é…" class="headerlink" title="2.å³è¾¹æ–‡å­—éšç€å·¦è¾¹å›¾ç‰‡å˜å°è€Œé€‚é…"></a>2.å³è¾¹æ–‡å­—éšç€å·¦è¾¹å›¾ç‰‡å˜å°è€Œé€‚é…</h2><pre><code class="css">.image {    width: auto;    height: 162px;    .image-pic {      width: 216px;      max-width: 216px; // é™åˆ¶å›¾ç‰‡æœ€å¤§å®½åº¦      height: 100%;      border-radius: 4px;    }}.container {    width: 100%; // å³è¾¹å®¹å™¨å®½åº¦è®¾ç½®100%    height: 162px;    // padding: 0 10px;  }  .text {    width: auto;    height: 162px;    min-width: 510px;    .bottom-wrap {      width: 100%; // ä¸‹æ–¹æŒ‰é’®è®¾ç½®100%å®½      height: 48px;    }  }</code></pre><h2 id="by-2020-4-21-19-10-20"><a href="#by-2020-4-21-19-10-20" class="headerlink" title="by 2020/4/21 19:10:20"></a>by 2020/4/21 19:10:20</h2><p>ä»Šå¤©å°±æƒ³åˆ°è¿™ä¸¤ä¸ªï¼Œå…ˆå°±å†™è¿™ä¹ˆå¤š: )</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®¹æ˜“å¿˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodejsçš„ç¼“å­˜ç»„ä»¶å’Œç¼“å­˜ç©¿é€é—®é¢˜</title>
      <link href="/2020/03/30/node_cache/"/>
      <url>/2020/03/30/node_cache/</url>
      
        <content type="html"><![CDATA[<h2 id="1-éœ€æ±‚èƒŒæ™¯"><a href="#1-éœ€æ±‚èƒŒæ™¯" class="headerlink" title="1.éœ€æ±‚èƒŒæ™¯"></a>1.éœ€æ±‚èƒŒæ™¯</h2><p>åœ¨æ¨èé¡µè¯·æ±‚çƒ­ç‚¹æ•°æ®çš„è¯·æ±‚ä¸­ï¼Œçƒ­ç‚¹æ•°æ®åˆ·æ–°é—´éš”æ˜¯åŠå°æ—¶ä¸€æ¬¡ï¼Œå› ä¸ºè¿”å›çƒ­ç‚¹æ•°æ®çš„æœåŠ¡å¯æ‰¿å—çš„è¯·æ±‚é‡è¾ƒå°ï¼Œå¹¶ä¸”æ•°æ®åœ¨åˆ·æ–°é—´éš”å†…æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ²¡å¿…è¦æ‰€æœ‰çš„ç”¨æˆ·è¯·æ±‚éƒ½é€ä¼ åˆ°åç»­æœåŠ¡ï¼ˆæ¨èåœºæ™¯ä¸€å¤©å°†è¿‘1.2äº¿æ¬¡çš„pvï¼‰ï¼Œè¿™ä¼šå¯¹åå°æœåŠ¡è¦æ±‚å¤ªé«˜ä¹Ÿæ²¡å¿…è¦ï¼Œæ‰€ä»¥éœ€è¦åœ¨nodeæœåŠ¡å±‚åšç¼“å­˜æ•°æ®ï¼Œæ¯æ¬¡ç”¨æˆ·çš„è¯·æ±‚ä»ç¼“å­˜ä¸­è¿”å›å¹¶ä¸”æ¯30min nodeæœåŠ¡æ›´æ–°ä¸€æ¬¡æ•°æ®ã€‚</p><h2 id="2-ç¼“å­˜æ•°æ®åˆ†ç±»"><a href="#2-ç¼“å­˜æ•°æ®åˆ†ç±»" class="headerlink" title="2.ç¼“å­˜æ•°æ®åˆ†ç±»"></a>2.ç¼“å­˜æ•°æ®åˆ†ç±»</h2><p>ç›®å‰æ¥è§¦åˆ°çš„æ•°æ®ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»å§ï¼š</p><ol><li>æœ‰è¾¹ç•Œæ•°æ®ï¼šè¿™ç§æ•°æ®æ˜¯æŒ‡è¯·æ±‚çš„æ•°æ®å¯ä»¥ä¸€æ¬¡æ€§å…¨éƒ¨è¿”å›ï¼Œåç»­çš„è¯·æ±‚éƒ½å¯ä»¥æ²¿ç”¨ä¸Šæ¬¡è¯·æ±‚çš„æ•°æ®ï¼Œç±»ä¼¼çš„æœ‰çƒ­ç‚¹æ•°æ®ç­‰ï¼›</li><li>æ— è¾¹ç•Œæ•°æ®ï¼šè¿™ç§æ˜¯æŒ‡æ•°æ®å¸¦æœ‰ç‰¹å¾æ€§è´¨ï¼Œä¸Šä¸ªç”¨æˆ·çš„è¯·æ±‚ä¸èƒ½ç»™ä¸‹ä¸ªç”¨æˆ·è¯·æ±‚ç”¨ï¼Œç±»ä¼¼çš„æœ‰ç”¨æˆ·ç”»åƒç­‰æ•°æ®<br>å…ˆé™„ä¸Šè€å¤§ç»™å†™çš„c++ä¼ªç å§ï¼Œæˆ‘åé¢ä¹Ÿè‡ªå·±å°è£…äº†ä¸ªnodeç‰ˆçš„</li></ol><pre><code class="c++">/* * LocalCache.h * *  Created on: 2020.3.16 *      Author: bostinshi */#ifndef LocalCache_H_#define LocalCache_H_typedef promise::Future&lt;int&gt; CommonRetFuture;template&lt;typename T&gt;typedef CommonRetFuture FuncSyncData(const T &amp;); // Funcæ˜¯å‡½æ•°ç±»å‹ï¼›template&lt;typename T, typename TKey,  typename TVal&gt;class LocalCache {public:    LocalCache(size_t iCacheSize, size_t iBaseKey,            size_t iShmSize, size_t iDataMaxSize, size_t iDataMinSize,            int iEffectTime, int iReqIntvalTime, bool bSyncGetData,            FuncSyncData&lt;T&gt; fSyncData            ) {        m_iEffectTime = iEffectTime;        m_iReqIntvalTime = iReqIntvalTime;        m_bSyncGetData = bSyncGetData;        m_cache.initDataBlockSize(iDataMinSize, iDataMaxSize, 1.0);        m_cache.initStore(iBaseKey, iShmSize);        m_cache.initLock(iBaseKey);        m_cache.setAutoErase(true);        m_cache.setEraseMode(TC_HashMap::ERASEBYGET);    }    void doInterval()    {        fSyncData();    }    CommonRetFuture get(const TKey&amp; stKey, TVal&amp; stVal)    {        promise::Promise&lt;ECommonRetCode&gt; promise;        //REPORT_COUNT(&quot;ProfileCache.get.request&quot;, 1);        int shmRet = m_cache.get(stKey, stVal);        //MT_RLOG&lt;&lt;&quot;get  : &quot;&lt;&lt;stKey.sMkey&lt;&lt;&quot;|shmRet :&quot;&lt;&lt; shmRet &lt;&lt; &quot;|iRefreshTime:&quot; &lt;&lt; iRefreshTime &lt;&lt;endl;        if (shmRet != TC_HashMap::RT_OK)        {            //LOGDEBUG&lt;&lt; &quot;get fail : &quot; &lt;&lt; stKey.sMkey &lt;&lt; &quot;|shmRet :&quot; &lt;&lt; shmRet &lt;&lt;endl;            //REPORT_COUNT(&quot;ProfileCache.get.retfailed_&quot;+taf::TC_Common::tostr(shmRet), 1);            promise.setValue(shmRet);            return promise.getFuture();        }        long lNowMs = TC_TimeProvider::getInstance()-&gt;getNowMs();        int iTimeInterval = lNowMs - stVal.iTimeStamp;        if (iTimeInterval &gt; m_iEffectTime) // refresh time        {            if(m_bSyncGetData)            {                return fSyncData(stKey);            }            else            {                if(!stVal.bHasReq || (lNowMs - stVal.iTimeStamp) &gt; m_iReqIntvalTime)                {                    stVal.bHasReq = true;                    stVal.iReqTimeStamp = lNowMs;                    set(stKey, stVal);                    fSyncData(stKey);                }                promise.setValue(shmRet);// time out data                return promise.getFuture();            }        }        return shmRet;    }    int set(const TKey&amp; stKey, TVal&amp; stVal)    {        int shmRet = m_cache.set(stKey, stVal);        if (shmRet != TC_HashMap::RT_OK)        {            //MT_RELOG&lt;&lt;&quot;set fail : &quot;&lt;&lt;stKey.sMkey&lt;&lt;&quot;|shmRet :&quot;&lt;&lt; shmRet &lt;&lt;endl;            //REPORT_COUNT(&quot;ProfileCache.set.retfailed_&quot;+taf::TC_Common::tostr(shmRet), 1);        }        //MT_RLOG&lt;&lt;&quot;set  : &quot;&lt;&lt;stKey.sMkey&lt;&lt;&quot;|shmRet :&quot;&lt;&lt; shmRet &lt;&lt;endl;        return shmRet;    }private:    int m_iEffectTime;    int m_iReqIntvalTime;    bool m_bSyncGetData;    FuncSyncData&lt;T&gt; fSyncData;    T m_cache;};#endif /* LocalCache_H_ */</code></pre><h2 id="3-å®ç°ä»£ç "><a href="#3-å®ç°ä»£ç " class="headerlink" title="3.å®ç°ä»£ç "></a>3.å®ç°ä»£ç </h2><p>ç»„ä»¶ä¸»è¦å®ç°äº†3ä¸ªåŸºæœ¬æ–¹æ³•ï¼Œgetã€setå’ŒgetCacheKeysï¼Œä¸»è¦çš„é€»è¾‘å°±æ˜¯å§‹ç»ˆä¿æŒcatché‡Œé¢æœ‰æ•°æ®ï¼Œå°±ä¼šä¿è¯æ•°æ®æ¯æ¬¡éƒ½æ˜¯ä»nodeç¼“å­˜é‡Œå–å›ï¼Œä¸ä¼šå¯¹åç»­æœåŠ¡é€ æˆç¼“å­˜ç©¿é€å’Œå¤ªå¤§å“åº”å‹åŠ›ï¼›æ— è®ºæ˜¯æ‰“åº•çš„æ•°æ®è¿˜æ˜¯ä¸Šæ¬¡å–å›æ¥çš„ç¼“å­˜ï¼Œæˆ–è€…æ˜¯ä¸Šä¸Šæ¬¡å–å›æ¥çš„è¿‡æœŸçš„ç¼“å­˜ï¼Œåœ¨getå‡½æ•°è¿”å›çš„æ•°æ®ä¸­ï¼Œéƒ½ä¼šç”¨codeè¿™ä¸ªå­—æ®µåŒºåˆ†å½“å‰æ•°æ®çš„æ€§è´¨ï¼š100-&gt;æ‰“åº•æ•°æ® 200-&gt;æ­£å¸¸ç¼“å­˜æ•°æ® 300-&gt;è¿‡æœŸç¼“å­˜æ•°æ®ã€‚</p><pre><code class="javascript">export const Cache : any = {};Cache.global = {}Cache.cacheObj = {}/** * è·å–å¯¹åº”keyå€¼çš„ç¼“å­˜ * @param key ç¼“å­˜å¯¹åº”çš„keyå€¼ */Cache.get = (key) =&gt; {    if (Object.keys(Cache.cacheObj).indexOf(key) &gt; -1) {        return Cache.cacheObj[key]    } else {        throw `æš‚æ— å½“å‰keyå€¼ä¸ºï¼š${key}çš„ç¼“å­˜`    }}/** * å°†å–å›æ¥çš„æ•°æ®å­˜è¿›ç¼“å­˜ * ä¼ å›å»çš„æ•°æ®ç»“æ„{code: xxx, data: å–å›çš„æ•°æ®} * çŠ¶æ€ç ï¼š100-&gt;æ‰“åº•æ•°æ® 200-&gt;æ­£å¸¸ç¼“å­˜æ•°æ® 300-&gt;è¿‡æœŸç¼“å­˜æ•°æ® * @param asyfun å¼‚æ­¥è¯·æ±‚æ•°æ®çš„funcï¼Œéœ€è¦è¿”å›dataæˆ–è€…error * @param normal_interval æ­£å¸¸æƒ…å†µä¸‹å‘åå°å–æ•°æ®çš„é—´éš” * @param error_interval ç¼“å­˜ç©¿é€åè°ƒæ•´çš„å–æ•°æ®é—´éš” * @param key ç¼“å­˜å¯¹åº”çš„keyå€¼ * @param backData æ‰“åº•çš„æ•°æ® {code: 100, data: æ‰“åº•æ•°æ®} */Cache.set = async function (asyfun, normal_interval, error_interval, key, backData)  {    for (let cacheKey in Cache.cacheObj) {        if (cacheKey === key) {            Monitor.report(&#39;cache key duplicate&#39;, `keyå€¼é‡å¤ï¼Œé‡å¤çš„keyå€¼ï¼š${key}`);            throw `keyå€¼é‡å¤ï¼Œå½“å‰å·²æœ‰keyå€¼ï¼š${Object.keys(Cache.cacheObj)}`         }    }    Cache.global[key + &#39;timer&#39;] = null    async function intervalFunc() {         try {            let res = await asyfun()            Cache.cacheObj[key] = {code: 200, data: res}        } catch (e) {            console.log(&#39;cache error&#39;, e)            if (Cache.cacheObj[key].data &amp;&amp; Cache.cacheObj[key].code &amp;&amp; Cache.cacheObj[key].code === 200) { // ç¼“å­˜é‡Œæ˜¯ä¸Šæ¬¡çš„ç¼“å­˜ï¼Œä¿®æ”¹çŠ¶æ€ç æ˜¯300                Cache.cacheObj[key].code = 300            } else if (Cache.cacheObj[key].data &amp;&amp; Cache.cacheObj[key].code &amp;&amp; Cache.cacheObj[key].code === 300) { // ç¼“å­˜é‡Œæ˜¯å¾ˆä¹…çš„ç¼“å­˜ï¼Œä¿®æ”¹çŠ¶æ€ç æ˜¯300                Cache.cacheObj[key].code = 300            } else {                Cache.cacheObj[key] = {code: 100, data: backData}            }        }    }    try {        let res = await asyfun()        Cache.cacheObj[key] = {code: 200, data: res}        if (Cache.global[key + &#39;timer&#39;]) {            clearInterval(Cache.global[key + &#39;timer&#39;])        }        Cache.global[key + &#39;timer&#39;] = setInterval(intervalFunc, normal_interval)    } catch (e) { // å–æ•°æ®æ“ä½œå¼‚å¸¸        Monitor.report(&#39;cache get error&#39;, e);        if (Cache.cacheObj[key] &amp;&amp; Cache.cacheObj[key].data &amp;&amp; Cache.cacheObj[key].code &amp;&amp; Cache.cacheObj[key].code === 200) { // ç¼“å­˜é‡Œæ˜¯ä¸Šæ¬¡çš„ç¼“å­˜ï¼Œä¿®æ”¹çŠ¶æ€ç æ˜¯300            Cache.cacheObj[key].code = 300        } else if (Cache.cacheObj[key] &amp;&amp; Cache.cacheObj[key].data &amp;&amp; Cache.cacheObj[key].code &amp;&amp; Cache.cacheObj[key].code === 300) { // ç¼“å­˜é‡Œæ˜¯å¾ˆä¹…çš„ç¼“å­˜ï¼Œä¿®æ”¹çŠ¶æ€ç æ˜¯300            Cache.cacheObj[key].code = 300        } else {            Cache.cacheObj[key] = {code: 100, data: backData}        }        if (Cache.global[key + &#39;timer&#39;]) {            clearInterval(Cache.global[key + &#39;timer&#39;])        }        Cache.global[key + &#39;timer&#39;] = setInterval(intervalFunc, error_interval)    }}/** * è·å–å½“å‰å·²æœ‰ç¼“å­˜çš„keyå€¼ */Cache.getCacheKeys = () =&gt; {    return Object.keys(Cache.cacheObj)}</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¥æ·±åœ³4ä¸ªæœˆäº†...</title>
      <link href="/2019/12/23/%20Dec_23rd/"/>
      <url>/2019/12/23/%20Dec_23rd/</url>
      
        <content type="html"><![CDATA[<p>ä»7æœˆä¸­æ—¬æ”¶åˆ°é¹…å‚offerï¼Œåˆ°9æœˆ1å·å…¥èŒï¼Œå†åˆ°ç°åœ¨12æœˆåº•ï¼Œä¸€ä¸‹å°±è¿‡äº†4ä¸ªæœˆäº†ï¼›å›å¤´çœ‹ä¸‹ï¼Œåˆšä¸Šç­çš„æ—¶å€™ï¼Œä¸é€‚åº”è¿™è¾¹2å‘¨ä¸€ä¸ªè¿­ä»£çš„éœ€æ±‚è¿›åº¦ï¼Œéœ€æ±‚æ’æœŸä¹Ÿæ²¡æ€ä¹ˆå‚ä¸ï¼Œéƒ½æ˜¯è¢«åŠ¨æ¥å—éœ€æ±‚ï¼Œäº§å“åŒå­¦è¯´å‡ å¤©äº¤ä»˜å°±å®šå‡ å¤©ï¼›å•§å•§å•§ï¼Œå¿™åˆ°åäº†ï¼ŒåŠ ç­åˆ°12ç‚¹æŒç»­äº†ä¸€ä¸ªæœˆï¼Œä¸å¤¸å¼ çš„è®²æ¯å¤©æ—©ä¸Šç¡å¾—æ¨¡æ¨¡ç³Šç³Šçš„æ—¶å€™è„‘å­éƒ½ä¼šè‡ªåŠ¨æƒ³æ²¡äº¤ä»˜çš„éœ€æ±‚ï¼Œmd ä¸€åº¦æƒ³å›å®¶ç§ç”°ã€‚<br><img src="/img/%E6%97%A0fuck%E5%8F%AF%E8%AF%B4.jpeg" alt=""><br>è¿˜å¥½åé¢å—åˆ°åŒäº‹â€œæŒ‡å¯¼â€ï¼Œè¦åˆ©ç”¨å¥½äº§å“åŒå­¦çš„æœŸå¾…ï¼Œå“ˆå“ˆå“ˆğŸ¤£2å¤©èƒ½åšå¥½çš„éœ€æ±‚å®š4å¤©ï¼Œå“‡ï¼Œçªç„¶å°±é—²äº†ä¸‹æ¥ï¼Œé‚£æ„Ÿå—ä¸€ç‚¹éƒ½ä¸å¤¸å¼ ï¼Œå°±å’Œå¤å¤©ç©¿ç€ç©¶æä¸é€æ°”çš„è§£æ”¾é‹è·‘å®Œé©¬æ‹‰æ¾åè„±ä¸‹è¢œå­ä¹‹åçš„é‚£ç§æ¸…çˆ½ï¼Œè„‘å­ä¹Ÿä¸å—¡å—¡äº†ï¼Œè„–å­ä¹Ÿä¸ç—›ç—›äº†ã€‚</p><p>æƒ³èµ·æ¥äº†ï¼Œåˆšæ¥æ·±åœ³çš„æ—¶å€™æ„Ÿè§‰è´¼æƒ¨ï¼Œåƒæ˜¯ä»€ä¹ˆéƒ½ä¸¢äº†æ¥äº†è¿™è¾¹ï¼ŒåŠ ä¸ŠæŸäººè¯´çš„ä»€ä¹ˆâ€œä½ çš„ä¸å¿«ä¹å°±æ˜¯æˆ‘æœ€å¤§çš„å¿«ä¹â€è¿™ç§éªšè¯ï¼Œå“‡ï¼Œå¿ƒæ€çˆ†ç‚¸ï¼›ä¸è¿‡å¥½åœ¨æŸäººæ„è¯†åˆ°è‡ªèº«é‡å¤§é”™è¯¯æ¯”è¾ƒå¿«ï¼Œå¹³æ—¶ä¸‹ç­ä¹Ÿå’Œæˆ‘è¯´è¯´è¯åˆ°å¾ˆæ™šï¼Œåé¢è¡¨ç°è¿˜æ˜¯æŒºå¥½çš„ğŸ‘Œï¼Œé™¤äº†å›åº”æ™šä¸€ç‚¹ä¹‹å¤–ï¼Œè¿˜è¡Œå§ã€‚ã€‚ã€‚</p><p>è¿˜æœ‰ï¼Œæœ€è¿‘æ€»æ˜¯ä¼šå›æƒ³ï¼Œå¾ˆå¥‡æ€ªï¼Œå¯èƒ½æ˜¯è¿™å‡ å¤©å°åŒºå¯¹é¢é‚£ä¸ªå·¥åœ°æ‰“æ¡©æœºåµå¾—æˆ‘ç²¾ç¥è¡°å¼±äº†å§= =æ˜¨æ™šç¡å‰ç¿»äº†ä¸€éæ‰‹æœºé‡Œçš„ç…§ç‰‡ï¼Œä»2016å¹´åˆ°ç°åœ¨çš„ï¼Œç«Ÿç„¶è¿˜çœ‹åˆ°äº†å¼ 13å¹´çš„å¤§å­¦ä¿¡ç®¡ä¸‰ä¸ªç­+ç”µå­å•†åŠ¡çš„åŒå­¦åˆå½±ï¼Œæˆ‘è®°å¾—å¥½åƒæ˜¯ç©äº†ä¸ªä»€ä¹ˆæ¯”èµ›ï¼Œå¥–å“æ˜¯ç½è£…é›ªç¢§å¯ä¹ï¼Œäººäººéƒ½æœ‰ï¼Œå°±æˆ‘æ²¡æœ‰â€¦å•§å•§å•§ï¼Œå‘ç°è‡ªå·±6å¹´å‰è¿˜ä¸æ˜¯å¾ˆåœŸï¼Œå¾ˆæ¬£æ…°ğŸ™ƒç»§ç»­è¯´å›æƒ³çš„äº‹æƒ…ï¼Œååœ¨é‚£ä¸€æƒ³å°±æ˜¯ä¸ªæŠŠå°æ—¶ï¼Œå„ç§æƒ³æˆ‘é‚£æ—¶å€™è¦æ˜¯é‚£æ ·ä¼šæ€ä¹ˆæ€ä¹ˆæ ·ï¼Œé‚£ä¹ˆåšå¤šå¥½ä»€ä¹ˆçš„ï¼Œè¶Šæƒ³è¶Šå…¥æˆï¼Œæœ‰ç‚¹ææ€–â€¦<br><img src="/img/think.JPG" alt=""><br>å°±å·®ä¸å¤šå’Œä¸Šé¢é‚£ç§æ„Ÿè§‰ä¸€æ ·ï¼Œå¤–è¡¨å¹³é™ï¼Œè„‘å­é‡Œç¨€å¥‡å¤æ€ªçš„ä¹±æƒ³ğŸ˜‚æƒ³å®Œä¹‹åäººå°±æ¸…çˆ½äº†ï¼Œè¿˜æ˜¯å½“ä¸‹æ˜¯å¯¹çš„ï¼Œè¦æ˜¯ä»¥å‰çœŸçš„é‚£ä¹ˆåšäº†ç°åœ¨çœŸçš„å°±å•¥éƒ½æ²¡äº†ï¼Œæƒ³æƒ³è¿˜æ˜¯å¾ˆæ€•äººçš„â€¦</p><p>åä¸‰å¹´å‰è¿˜æ˜¯åå››å¹´å‰ç¬¬ä¸€æ¥æ·±åœ³ï¼Œè®°ä¸å¤ªæ¸…äº†ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°ä»¥åä¼šæ¥æ·±åœ³ä¸Šç­ï¼Œå“ï¼Œå‰ä¸¤å¤©å»äº†å½“å¹´å»çš„ä¸–ç•Œä¹‹çª—çœ‹äº†çœ‹ï¼Œè¿˜æ˜¯é‚£ä¹ˆå‡233333ğŸ˜‚ï¼Œæ¯•ç«Ÿå‹‰å¼ºç®—æ˜¯ç«¥å¹´å§ï¼Œå¤ªè ¢äº†â€¦</p><p>ä¸å†™äº†ä¸å†™äº†ï¼Œå°±å†™è¿™ä¹ˆå¤šäº†ï¼Œå¤ªçŸ«æƒ…äº†ï¼Œæˆ‘è¿˜æ˜¯ä¸é€‚åˆå†™è¿™ç§æ¶å¿ƒäººçš„ä¸œè¥¿ï¼Œæ”¾å‡ å¼ æˆ‘æœ€è¿‘æ‹çš„è¿˜é˜”ä»¥çš„ç…§ç‰‡ï¼Œæ„Ÿè§‰æœ‰ç‚¹å†…å‘³å„¿äº†ï¼Œç»†å“â€¦</p><div align="center" width="100%">    <img src="/img/4.jpg" width="48%" style='margin-right: 5px;'>    <img src="/img/3.jpg" width="48%"></div><div align="center" width="100%">    <img src="/img/2.jpg" width="48%" style='margin-right: 5px;'>    <img src="/img/1.jpg" width="48%"></div>]]></content>
      
      
      <categories>
          
          <category> éšä¾¿å†™å†™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/05/20/seccloud_third/"/>
      <url>/2018/05/20/seccloud_third/</url>
      
        <content type="html"><![CDATA[<h2 id="8-å…³äºExpressåº”ç”¨é¡¹ç›®å®è·µ"><a href="#8-å…³äºExpressåº”ç”¨é¡¹ç›®å®è·µ" class="headerlink" title="8.å…³äºExpressåº”ç”¨é¡¹ç›®å®è·µ"></a>8.å…³äºExpressåº”ç”¨é¡¹ç›®å®è·µ</h2><p>ä¸Šé¢è¯´äº†å¾ˆå¤šæ¦‚å¿µæ€§çš„å†…å®¹ï¼Œè¿™éƒ¨åˆ†å°±é’ˆå¯¹è¿™æ¬¡é¡¹ç›®æ¥è¯´å…·ä½“åº”ç”¨ã€‚è¿™æ¬¡åå°æ•´ä½“ä¸‹ç§»ï¼Œä¹Ÿå°±æ˜¯ä»ä¹‹å‰å†™javaçš„portalå±‚æ¥å£ä¸‹ç§»åˆ°å¯¹æ¥è®¾å¤‡çš„coreå±‚æ¥å£ï¼Œå‡ºäºå®‰å…¨æ€§è€ƒè™‘ï¼Œå‰å°ä¸èƒ½ç›´æ¥è®¿é—®coreå±‚æ¥å£ï¼Œéœ€è¦ç”¨nodeåœ¨ä¸­é—´è¿æ¥ï¼ˆè®¤è¯éƒ¨åˆ†è¿™æ¬¡ç”¨çš„casClientåé¢å†ç»†è¯´ï¼‰ã€‚ä¸»è¦çš„ä¸‰ä¸ªéœ€æ±‚æ˜¯æ¥å£è½¬å‘ã€é™æ€èµ„æºæŒ‚è½½ï¼Œè¿˜æœ‰ä¸ªæœåŠ¡å™¨ç«¯å£è·³è½¬ï¼›ä¸‹é¢æˆ‘ä¼šé’ˆå¯¹è¿™ä¸‰ä¸ªéœ€æ±‚è¯´ä¸€ä¸‹å®ç°çš„è¿‡ç¨‹å§ : )</p><p>è¿™æ˜¯ä¸»è¦requireçš„å‡ ä¸ªæ¨¡å—ï¼š</p><pre><code class="javascript">var express = require(&#39;express&#39;)var proxy = require(&#39;http-proxy-middleware&#39;)var request = require(&#39;request&#39;)var bodyParser = require(&#39;body-parser&#39;)var path = require(&#39;path&#39;)var history = require(&#39;connect-history-api-fallback&#39;)</code></pre><h3 id="1-æ¥å£è½¬å‘"><a href="#1-æ¥å£è½¬å‘" class="headerlink" title="1.æ¥å£è½¬å‘"></a>1.æ¥å£è½¬å‘</h3><p>è¿™éƒ¨åˆ†æ˜¯nodeå®ç°çš„æœ€åŸºæœ¬è¦æ±‚ï¼Œå³å‰å°è°ƒç”¨expresså®šä¹‰çš„å‰å°æ¥å£ï¼Œå†ç”±ä¸­é—´ä»¶å‘coreå±‚è°ƒç”¨å¯¹åº”çš„æ¥å£å–æ•°æ®ã€‚</p><pre><code class="javascript">// å‰å°è°ƒç”¨æ¥å£this.$axios({    method: &#39;GET&#39;,    url: &#39;http://127.60.0.1:3000/yuhui&#39;}).then(r=&gt;{    console.log(r.data)})//expressæ•è·åˆ°åšåŒ¹é…var app = express()app.use(&#39;/yuhui&#39;, function(req,res,next){    // å‘coreå±‚è¯·æ±‚æ•°æ®    res.jsonp(obj) // è¿”å›ç»™å‰å°})app.listen(3000,&#39;127.60.0.2&#39;)</code></pre><h3 id="2-é™æ€èµ„æºæŒ‚è½½"><a href="#2-é™æ€èµ„æºæŒ‚è½½" class="headerlink" title="2.é™æ€èµ„æºæŒ‚è½½"></a>2.é™æ€èµ„æºæŒ‚è½½</h3><p>è¿™ä¸ªéœ€æ±‚æ˜¯ä¸ºäº†ç”¨dockerå®¹å™¨é›†æˆåˆ°ä¸»ç³»ç»Ÿæ—¶ï¼Œä¸ºäº†å‡å°‘å¯¹æ¥æ¨¡å—è°ƒè¯•æ–¹ä¾¿ï¼ˆvue+node+nginxåˆ°vue+nodeï¼‰ï¼Œå°±å¯¹å‰ç«¯çš„é™æ€èµ„æºè°ƒç”¨æ”¾åˆ°expressæ¥åšã€‚æŒ‚è½½é™æ€èµ„æºæ˜¯é’ˆå¯¹äºbuildä¹‹åç”¨äºç”Ÿäº§ç¯å¢ƒä¸‹çš„distæ–‡ä»¶å¤¹èµ„æºçš„è°ƒç”¨ï¼Œè€Œä¸æ˜¯å¼€å‘ç¯å¢ƒçš„å…¥å£htmlï¼Œè¿™ä¸ªè¦æ³¨æ„å“ˆï¼</p><pre><code class="javascript">app.use(express.static(&#39;../dist&#39;))app.listen(3000,&#39;127.60.0.2&#39;) //æµè§ˆå™¨è®¿é—®127.60.0.2:3000å°±å¯ä»¥è®¿é—®é¡¹ç›®äº†</code></pre><p>è¿™æ ·æŒ‚è½½çš„é¡¹ç›®è·¯å¾„ä¸­ä¼šå¸¦æœ‰ä¸€ä¸ª#ï¼Œè¿™æ˜¯å› ä¸ºrouteré»˜è®¤é‡‡ç”¨hashæ¨¡å¼ï¼Œå› æ­¤è¦å¯¹routeråšä¸€ä¸‹ä¿®æ”¹ï¼š</p><pre><code class="javascript">export default new Router({  mode: &#39;history&#39;, //ä¿®æ”¹è·¯ç”±æ¨¡å¼  routes: [    {        path: &#39;/&#39;,        component: Index    },{        path: &#39;/content/:id&#39;,        component: Content    },{        path: &#39;/viewPage&#39;,        component: ViewPage    }  ]})</code></pre><p>ä½†æ˜¯è¿™æ ·åšåˆä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œè¿™æ ·çš„è®¿é—®æ˜¯é’ˆå¯¹äºæ–‡ä»¶å¤¹çš„é™æ€èµ„æºè·¯å¾„è€Œä¸æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒä¸­åšçš„è·¯ç”±è·¯å¾„ï¼Œä¼šåŒ¹é…ä¸åˆ°èµ„æºè¿”å›404ï¼›æ‰€ä»¥å‘¢ï¼Œä½ è¦åœ¨æœåŠ¡ç«¯å¢åŠ ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„å€™é€‰èµ„æºï¼šå¦‚æœ URL åŒ¹é…ä¸åˆ°ä»»ä½•é™æ€èµ„æºï¼Œåˆ™åº”è¯¥è¿”å›åŒä¸€ä¸ª index.html é¡µé¢ï¼ˆä¹Ÿå°±æ˜¯ä»ä¸»é¡µé¢é‡è¿›å†æŒ‰ç…§è·¯ç”±çš„è·¯å¾„æ˜¾ç¤ºé¡µé¢ï¼‰ï¼Œè¿™ä¸ªé¡µé¢å°±æ˜¯ä½  app ä¾èµ–çš„é¡µé¢ã€‚å½“ç„¶è¿™ä¸ªè¦è‡ªå·±å†™ä¸€ä¸ªnodeå¤„ç†çš„ä¸­é—´ä»¶å¯ä»¥ï¼Œä¸è¿‡npmè¿™ä¹ˆå¥½çš„ç¤¾åŒºä¸ç”¨å°±å¾ˆæµªè´¹: )</p><blockquote><p>npm install â€“save connect-history-api-fallbackï¼Œ<a href="https://github.com/bripkens/connect-history-api-fallback" target="_blank" rel="noopener">æºç </a>åœ¨githubä¸Šï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»ç ”ç©¶ä¸‹ï¼Œç„¶åexpresså¯ä»¥ä»¥ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶çš„å½¢å¼ä½¿ç”¨ï¼Œå¾ˆæ–¹ä¾¿ã€‚è¿™é‡Œåœ¨é™„ä¸Šå®˜ç½‘çš„<a href="https://router.vuejs.org/zh-cn/essentials/history-mode.html" target="_blank" rel="noopener">å…¶ä»–è§£å†³åŠæ³•</a>ï¼ŒassetsPublicPathè·¯å¾„<a href="https://www.cnblogs.com/resolvent/p/5736678.html" target="_blank" rel="noopener">é…ç½®è§£é‡Š</a></p></blockquote><pre><code class="javascript">var history = require(&#39;connect-history-api-fallback&#39;)app.use(history()) //æ³¨æ„é¡ºåºï¼è¿™ä¸ªä¸­é—´ä»¶çš„ä½¿ç”¨è¦æ”¾åœ¨æŒ‚è½½é™æ€èµ„æºä¹‹å‰build: {  // Template for index.html    index: path.resolve(__dirname, &#39;../dist/index.html&#39;),  // Paths    assetsRoot: path.resolve(__dirname, &#39;../dist&#39;),    assetsSubDirectory: &#39;static&#39;,    assetsPublicPath: &#39;/&#39;,      //å› ä¸ºhistoryé»˜è®¤ä¼šä¿®æ”¹æ ¹ç›®å½•ï¼Œæœªé…ç½®å‰æ˜¯ç›¸å¯¹è·¯å¾„ï¼›æ‰€ä»¥åœ¨webpack buildå‘½ä»¤é…ç½®éœ€è¦ä¿®æ”¹æˆ&#39;/&#39;ï¼Œä¿è¯æ ¹ç›®å½•ä¸å˜ï¼Œå…·ä½“è§£é‡Šç‚¹ä¸Šé¢é“¾æ¥}</code></pre><h3 id="3-æœåŠ¡å™¨ç«¯å£è·³è½¬"><a href="#3-æœåŠ¡å™¨ç«¯å£è·³è½¬" class="headerlink" title="3.æœåŠ¡å™¨ç«¯å£è·³è½¬"></a>3.æœåŠ¡å™¨ç«¯å£è·³è½¬</h3><p>è¿™ä¸ªéœ€æ±‚å‘¢æ˜¯æˆ‘æ’¸ç çš„æ—¶å€™è‡ªå·±æçš„= =ä½¿ç”¨ç¯å¢ƒå°±æ˜¯æœåŠ¡å™¨çš„ä¸€ä¸ªç«¯å£æŒ‚äº†ï¼Œå¯ä»¥è·³è½¬åˆ°å¦ä¸€ä¸ªç«¯å£ï¼Œç›¸å½“äºå¤‡ç”¨ï¼›åˆ©ç”¨http-proxy-middlewareæ¨¡å—èµ·ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œç”¨äºè½¬å‘ç«¯å£æˆ–è€…IP+ç«¯å£ã€‚</p><pre><code class="javascript">var proxy = require(&#39;http-proxy-middleware&#39;)app.use(&#39;/yuhui&#39;, proxy({    target: &#39;http://127.60.0.2:1234&#39;,    changeOrigen: true,    onProxyRes: function(proxyRes,req,res){        res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);          res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With, content-type&quot;);          res.header(&quot;Access-Control-Allow-Methods&quot;,&quot;PUT,POST,GET,DELETE,OPTIONS&quot;);          res.header(&quot;X-Powered-By&quot;,&#39; 3.2.1&#39;)          res.header(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;);      },    cookieDomainRewrite: &#39;&#39; // ä¿®æ”¹å“åº”ä¿¡æ¯ä¸­çš„cookieåŸŸåï¼Œå¯ä»¥ä¸ºfalse}))app2.use(&#39;/yuhui&#39;, function(req,res,next){    res.send(&#39;yuhui&#39;)})app.listen(3000,&#39;127.60.0.2&#39;) // ä»£ç†æœåŠ¡å™¨ç«¯å£app2.listen(1234,&#39;127.60.0.2&#39;)</code></pre><p>åšå®Œè¿™å‡ ä¸ªéœ€æ±‚ï¼Œæ„Ÿè§¦æ¯”è¾ƒæ·±çš„æ˜¯ï¼šåŸºäºnodeå¼€å‘è¦æœ‰ä¸€ç§æ¨¡å—åŒ–å’Œç¤¾åŒºçš„æ¦‚å¿µï¼Œè¿™æ ·æ— è®ºæ˜¯æ‰§è¡Œæ•ˆç‡è¿˜æ˜¯å¼€å‘æ•ˆç‡éƒ½ä¼šæœ‰å¾ˆé«˜çš„æå‡ã€‚ï¼ˆæ¨¡å—å¼•ç”¨å’Œä¸­é—´ä»¶åŠ è½½å¤ªèˆ’æœäº†~ï¼‰</p><h2 id="9-åŸºäºcasServerçš„ç™»å½•è®¤è¯"><a href="#9-åŸºäºcasServerçš„ç™»å½•è®¤è¯" class="headerlink" title="9.åŸºäºcasServerçš„ç™»å½•è®¤è¯"></a>9.åŸºäºcasServerçš„ç™»å½•è®¤è¯</h2><h3 id="1-cas-server-cas-client-å•ç‚¹ç™»å½•åŸç†ä»‹ç»"><a href="#1-cas-server-cas-client-å•ç‚¹ç™»å½•åŸç†ä»‹ç»" class="headerlink" title="1.cas server + cas client å•ç‚¹ç™»å½•åŸç†ä»‹ç»"></a>1.cas server + cas client å•ç‚¹ç™»å½•åŸç†ä»‹ç»</h3><p>ä¸ºäº†é›†æˆåˆ°cloudOSç³»ç»Ÿä¸Šéœ€è¦å¯¹ç°åœ¨çš„é¡¹ç›®åšå•ç‚¹ç™»å½•ï¼ˆä¿æŒå•è´¦å·ç™»å½•æ‰€æœ‰ç³»ç»Ÿï¼‰ï¼Œæ‰“ç®—ç”¨casServeråšå•ç‚¹ç™»å½•å’Œæƒé™æ§åˆ¶ä»¥åŠç”¨dockeréƒ¨ç½²ï¼Œå…³äºdockerçš„éƒ¨åˆ†æˆ‘åé¢ç ”ç©¶å®Œäº†åœ¨å†™ä¸Šæ¥å§:)<br>ä»ç»“æ„ä¸Šçœ‹ï¼ŒCAS åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š CAS Server å’Œ CAS Clientã€‚CAS Serveréœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸»è¦è´Ÿè´£å¯¹ç”¨æˆ·çš„è®¤è¯å·¥ä½œï¼›CAS Clientè´Ÿè´£å¤„ç†å¯¹å®¢æˆ·ç«¯å—ä¿æŠ¤èµ„æºçš„è®¿é—®è¯·æ±‚ï¼Œéœ€è¦ç™»å½•æ—¶ï¼Œé‡å®šå‘åˆ° CAS Serverã€‚</p><h4 id="CASåŸºç¡€åè®®"><a href="#CASåŸºç¡€åè®®" class="headerlink" title="CASåŸºç¡€åè®®"></a>CASåŸºç¡€åè®®</h4><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/casServer1.jpg" alt=""></p><h4 id="CASçš„è¯¦ç»†ç™»å½•æµç¨‹"><a href="#CASçš„è¯¦ç»†ç™»å½•æµç¨‹" class="headerlink" title="CASçš„è¯¦ç»†ç™»å½•æµç¨‹"></a>CASçš„è¯¦ç»†ç™»å½•æµç¨‹</h4><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/casServer2.jpg" alt=""></p><blockquote><p>å…³äºcasçš„è¯¦ç»†ä»‹ç»ï¼Œæˆ‘ä¹Ÿæ˜¯ä»è¿™ä¸¤ç¯‡æ–‡ç« ä¸Šäº†è§£çš„ï¼š<a href="https://blog.csdn.net/feng27156/article/details/38060099" target="_blank" rel="noopener">CASåŸºç¡€åè®®</a>å’Œ<a href="http://htmlwww.cnblogs.com/lihuidu/p/6495247.html" target="_blank" rel="noopener">CASçš„è¯¦ç»†æµç¨‹</a></p></blockquote><h3 id="2-é…ç½®ä»‹ç»"><a href="#2-é…ç½®ä»‹ç»" class="headerlink" title="2.é…ç½®ä»‹ç»"></a>2.é…ç½®ä»‹ç»</h3><p>è¿™æ¬¡é¡¹ç›®å‘¢ï¼Œæˆ‘ä¸»è¦åšçš„å°±æ˜¯casClientéƒ¨åˆ†çš„é€»è¾‘ï¼Œä½œä¸ºå®¢æˆ·ç«¯å’ŒcasServerçš„ä¸­é—´ä»¶ï¼Œåœ¨ä¸åŒæƒ…å†µä¸‹çš„é‡å®šå‘æ“ä½œå¯¹äºç³»ç»Ÿæ­£å¸¸è¿è¡Œæœ‰å¾ˆå¤§å½±å“ï¼Œä½†è€ƒè™‘åˆ°å®¢æˆ·ç«¯ã€casClientå’ŒcasServerä¹‹é—´çš„æ•°æ®äº¤æ¢å’Œæœ¬åœ°ticketéªŒè¯ç­‰å¤æ‚çš„é€»è¾‘ï¼Œå¯ä»¥è€ƒè™‘ç”¨npmå®‰è£…åˆé€‚çš„åŸºäºnodeçš„casClientï¼Œå†åšä¸€äº›åŸºæœ¬çš„é…ç½®å³å¯ã€‚</p><blockquote><p>è¿™æ¬¡ç”¨çš„æ˜¯connect-cas2æ¨¡å—ï¼Œnpmå®˜ç½‘ä¸Šçš„<a href="https://www.npmjs.com/package/connect-cas2" target="_blank" rel="noopener">é…ç½®</a>ä»‹ç»æ˜¯è‹±æ–‡çš„ï¼Œçœ‹ç€ä¸å¤ªæ–¹ä¾¿ï¼Œé™„ä¸Š<a href="https://github.com/TencentWSRD/connect-cas2/blob/master/README.zh.md" target="_blank" rel="noopener">ä¸­æ–‡ç‰ˆ</a>çš„å§ï¼Œè¿™é‡Œåˆ—å‡ºå‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼š</p></blockquote><pre><code class="javascript">var ConnectCas = require(&#39;connect-cas2&#39;)var casClient = new ConnectCae({    servicPrefix: // ç½‘ç«™æ ¹ç›®å½•    serverPath: // casServeræ ¹è·¯å¾„ï¼Œä¼šå’Œpaths.serviceValidateæ‹¼æ¥æˆcasServeræ ¡éªŒticketè·¯å¾„    paths: {        validate: // ç”¨äºClientç«¯æ ¡éªŒSTè·¯å¾„ï¼Œå°±æ˜¯cas-connect2è¿™ä¸ªæ¨¡å—æœ¬åœ°éªŒè¯STçš„jsæ–‡ä»¶        serviceValidate: // ç”¨äºcasServeræ ¡éªŒticketè·¯å¾„        login: // ä¼šå’ŒserverPathæ‹¼æ¥ç»„æˆCASçš„ç™»å½•é¡µé¢        logout: // æ³¨é”€è·¯å¾„        ...    }    ...})app.use(casClient.core()) // é¡ºåºè¦åœ¨bodyPaserä¹‹å‰</code></pre>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/05/20/seccloud_seventh/"/>
      <url>/2018/05/20/seccloud_seventh/</url>
      
        <content type="html"><![CDATA[<h2 id="17-å…³äºä¸Šä¼ å’Œä¸‹è½½"><a href="#17-å…³äºä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="17.å…³äºä¸Šä¼ å’Œä¸‹è½½"></a>17.å…³äºä¸Šä¼ å’Œä¸‹è½½</h2><p>æœ€è¿‘çš„éœ€æ±‚å‘¢å…³äºä¸Šä¼ ä¸‹è½½çš„ç‰¹åˆ«å¤š=  =å…ˆè¯´ä¸‹è½½å§ï¼Œä¹‹å‰æˆ‘ä¹Ÿå°±æ„é€ ä¸€ä¸ªformçš„domç»“æ„ï¼Œå†é€šè¿‡submit()æ–¹æ³•æäº¤ï¼Œåªè¦åå°æä¾›çš„æ˜¯æ­£å¸¸çš„æ–‡ä»¶æµçš„è¯ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ï¼Œä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯è¿”å›å¤´å¿…é¡»æ˜¯application/octet-streamï¼Œè¿™ç‚¹ä½ å¯ä»¥è‡ªå·±åœ¨nodeå±‚åŠ å·¥ä¸€ä¸‹è¿”å›å¤´ã€‚ä½†è‡ªä»æˆ‘å‘ç°äº†ä¸€ä¸ªå«Blobçš„ç±»ä¹‹åå°±è§‰å¾—è¿™ç§æ–¹æ³•æ›´æ–¹ä¾¿äº†ï¼Œå¯ä»¥åƒæ­£å¸¸çš„ajaxè¯·æ±‚ä¸€æ ·è¯·æ±‚æ–‡ä»¶æµåˆ°å‰ç«¯è‡ªå·±å¤„ç†ï¼Œå°±é¿å…äº†å½“ä¼ å‚å¤æ‚çš„æ—¶å€™formè¡¨å•çš„å±€é™æ€§ï¼Œå…·ä½“å®ç°ä¸‹é¢å†ç»†è¯´ï¼›å†è¯´è¯´ä¸Šä¼ å§ï¼Œä¸Šä¼ ä¸»è¦æ˜¯ç»“åˆäº†å‰ç«¯<a href="http://fex.baidu.com/webuploader/" target="_blank" rel="noopener">WebUploader</a>ä»¥åŠnodejsçš„formidableæ¨¡å—å®ç°çš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ä¹Ÿæ˜¯ä¸‹é¢ç»†è¯´ã€‚  </p><h3 id="1-ä¸Šä¼ "><a href="#1-ä¸Šä¼ " class="headerlink" title="1.ä¸Šä¼ "></a>1.ä¸Šä¼ </h3><p>ä¸»è¦è¿‡ç¨‹å°±æ˜¯å‰ç«¯é€šè¿‡å¼•å…¥webUploaderç±»æ¥æ„é€ uploaderå¯¹è±¡ï¼Œé€šè¿‡å‚æ•°é…ç½®å®ç°å¯¹æ¥nodeå±‚çš„å¤„ç†ä¸Šä¼ çš„ä¸­é—´ä»¶ã€‚</p><pre><code class="javascript">// vueæ–‡ä»¶import webuploader from &#39;~js/webuploader/webuploader.min.js&#39;this.uploader = webuploader.create({    // åˆ—å‡ºå‡ ä¸ªæˆ‘è§‰å¾—æ¯”è¾ƒé‡è¦çš„å‚æ•°    // å…·ä½“çš„å¥‡é‡å‚æ•°å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£    auto: true, // é€‰æ‹©å®Œæ–‡ä»¶åæ˜¯å¦è‡ªåŠ¨ä¸Šä¼     server: api/xxx/xx // æ–‡ä»¶æ¥æ”¶ç«¯åœ°å€ï¼Œå¯¹åº”çš„æ˜¯nodejsä¸­é—´ä»¶çš„url    accept: { // ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹        title: &#39;ak&#39;,        exteensions: &#39;ak&#39;,        mimeTypes: &#39;.ak&#39;    },    chunked: true, // æ˜¯å¦åˆ†ç‰‡ä¸Šä¼ ï¼Œé’ˆå¯¹è¾ƒå¤§æ–‡ä»¶})// è¿™é‡Œä¼šåˆ—å‡ºæ¥webuploaderçš„ä¸€äº›é’©å­å‡½æ•°ï¼Œæ–¹ä¾¿åœ¨ä¸Šä¼ çš„ä¸åŒæ­¥éª¤ä¸­åšç›¸åº”çš„äº‹æƒ…// åˆ©ç”¨onå‡½æ•°ç»‘å®šä¸åŒäº‹ä»¶è§¦å‘çš„ä¸åŒå‡½æ•°ï¼Œä¾‹å¦‚ï¼šthis.uploader.on(&#39;fileQueued&#39;, (file) = &gt; {    do something // æ–‡ä»¶è¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­hookï¼Œåšå¯¹æ–‡ä»¶ç±»å‹çš„åˆ¤æ–­})// å®˜æ–¹æ–‡æ¡£ä¹Ÿç»™å‡ºäº†ä¸€ç§è¾ƒç®€å•çš„å†™æ³•this.uploader.onFileQueued = function (file) {    do something // æ–‡ä»¶è¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­hook}this.uploader.on(&#39;uploadStart&#39;, (file) = &gt; {    do something // æ–‡ä»¶å¼€å§‹ä¸Šä¼ çš„hook})this.uploader.on(&#39;uploadProgress&#39;, (file) = &gt; {    do something // æ–‡ä»¶ä¸Šä¼ ä¸­çš„hookï¼Œå¯åšè¿›åº¦æ¡ä¹‹ç±»çš„éœ€æ±‚})this.uploader.on(&#39;uploadSuccess&#39;, (file) = &gt; {    do something // æ–‡ä»¶ä¸Šä¼ æˆåŠŸçš„hook})</code></pre><blockquote><p>å‰ç«¯å¯¹äºä¸Šä¼ æ–‡ä»¶çš„æ“ä½œä¸»è¦é›†ä¸­åœ¨å‡ ä¸ªhookå‡½æ•°ä¸­ï¼Œç”¨äºå‘ŠçŸ¥ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„è¿›ç¨‹å’Œç»“æœ</p></blockquote><pre><code class="javascript">// nodejsrouter.use(&#39;api/xxx/xx&#39;, function (req, res, next) {    utils.uploadFile(core.url, req)})// utils.jsvar formidable = require(&#39;formidable&#39;)var formData = require(&#39;form-data&#39;)var utils = {    uploadFile: function (url, req) {        // è¿™éƒ¨åˆ†urlçš„å‚æ•°æ ¹æ®é¡¹ç›®è¦æ±‚æ¥        let tag = req.qurey.tag // ç”¨æ¥æ ‡è¯†è¿™æ˜¯ä¸ªä¸Šä¼ åŠ¨ä½œ        let module = req.qurey.module // å­˜å‚¨åˆ°æ•°æ®åº“çš„å“ªä¸ªæ¨¡å—        return new Promise(function(resolve, reject) {            var formfile = new formidable.IncomingForm()            var formSubmit = new formData()            formfile.parse(req, function(err, fields, files) {                req.body = fields                req.files = files                // and so on æ ¹æ®ä¸åŒéœ€æ±‚å†³å®š            })        })    }}</code></pre><blockquote><p>nodeè¿™è¾¹ç”¨åˆ°çš„ä¸»è¦æ˜¯å‡ ä¸ªæ¨¡å—ï¼Œä¾‹å¦‚formidableã€pathã€form-dataã€fsã€osç­‰ï¼Œè¿™é‡Œçš„ä¸Šä¼ ä¸æ¶‰åŠåˆ°å‰ç«¯äººå‘˜å­˜å…¥æ•°æ®åº“çš„è¿‡ç¨‹ï¼Œå¢åŠ nodeå±‚ä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–å‰ç«¯ä»£ç ï¼Œé¿å…å®¢æˆ·ç«¯å¡é¡¿ï¼›åŒæ—¶åœ¨nodeå±‚å°è£…æ–‡ä»¶æµã€è¯·æ±‚å’Œè¿”å›å¯¹è±¡ã€‚</p></blockquote><h3 id="2-ä¸‹è½½"><a href="#2-ä¸‹è½½" class="headerlink" title="2.ä¸‹è½½"></a>2.ä¸‹è½½</h3><p>è‡³äºä¸‹è½½å‘¢ï¼Œæˆ‘ä¸€ç›´æ˜¯ä¸å¤ªå–œæ¬¢ç”¨å‰ç«¯æ„é€ formè¡¨å•çš„å½¢å¼ï¼Œè¿™æ ·ä¼šæ˜¾å¾—ç¬¨é‡è€Œä¸”éº»çƒ¦ã€‚å‰ç«¯æ—¶é—´å†™çš„å…³äºä¸‹è½½å®‰è£…åŒ…æ–‡ä»¶çš„éœ€æ±‚ï¼Œæ ¹æ®åå°è¿”å›çš„äºŒè¿›åˆ¶æ–‡ä»¶æµåˆ©ç”¨Blobå¯¹è±¡ç”Ÿæˆå¯ç‚¹å‡»ä¸‹è½½çš„aæ ‡ç­¾ï¼Œåœ¨domä¸ŠèŠ‚çœäº†å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œè€Œä¸”æ˜¯åŸºäºajaxè¯·æ±‚çš„ï¼Œå› æ­¤åœ¨ä¼ å‚ä¸Šå¾ˆæ–¹ä¾¿ã€‚</p><pre><code class="javascript">// è¿˜æ˜¯å…ˆç®€å•çš„å†™ä¸‹æ„é€ formè¡¨å•çš„ä¸‹è½½å§templateéƒ¨åˆ†&lt;form action=&#39;api/xxx/xxx&#39; method=&#39;post&#39; id=&#39;download&#39; name=&#39;downloadForm&#39;&gt;    &lt;input id=&#39;type&#39; type=&#39;hidden&#39; name=&#39;type&#39; value=&#39;&#39;&gt;&lt;/form&gt;scriptéƒ¨åˆ†let type-data = JSON.stringify(object-data) // å¦‚æœéœ€è¦ä¼ çš„å‚æ•°æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ä¹‹ç±»çš„ï¼Œå¯ä»¥å…ˆstringifyä¸€ä¸‹$(&#39;#type&#39;).attr(&#39;value&#39;, type-data)$(&#39;#download&#39;).submit() // è§¦å‘æäº¤è¡¨å•</code></pre><blockquote><p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯æµè§ˆå™¨ä¼šæ ¹æ®è¿”å›çš„äºŒè¿›åˆ¶æ–‡ä»¶æµè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ï¼Œä¸éœ€è¦å¯¹è¿”å›çš„æµåšå¤„ç†</p></blockquote><pre><code class="javascript">// ajaxè¯·æ±‚+Blobå¯¹è±¡çš„æ–¹å¼this.$axios({    method: &#39;POST&#39;,    url: &#39;api/xxx/xxx&#39;,    responseType: &#39;arraybuffer&#39;, // è¿™é‡Œæ¯”è¾ƒé‡è¦ï¼Œè¦è§„å®šåå°è¿”å›çš„ç±»å‹æ˜¯äºŒè¿›åˆ¶æµï¼Œæ‰ä¸ä¼šé€ æˆæ–‡ä»¶æ‰“ä¸å¼€çš„æƒ…å†µ    data: {        type: {xx: xxx}    }}).then(r =&gt; {    const blob = new Blob([r.data], {type: &#39;application/zip&#39;})    const url = window.URL || window.webkitURL || window.moxURL    const href = url.createObject(blob)    let link = document.createElement(&#39;a&#39;)    link.href = href    link.display = none    document.body.appendChild(link)    link.click    document.body.removeChild(link)})</code></pre><blockquote><p>è¿™æ ·çš„æ–¹å¼å¥½å¤„å°±æ˜¯ä¼ å‚ä¾¿æ·ã€ä¸ç”¨æ„é€ formè¡¨å•å’Œè‡ªå®šä¹‰å¼ºåº¦é«˜ï¼Œå¯ä»¥å¯¹è¿”å›çš„æ–‡ä»¶æµåšè‡ªå®šä¹‰åŠ å·¥ï¼Œä¾‹å¦‚æ–‡ä»¶åã€æ–‡ä»¶æ ¼å¼ä¹‹ç±»ï¼Œåªè¦åœ¨link.click()ä¹‹å‰éƒ½å¯ä»¥ï¼›åªæ˜¯å¯¹äºnodeå±‚æ¥è¯´ï¼Œå¯èƒ½éœ€è¦å¯¹è¿”å›çš„æ•°æ®åšåŠ å·¥ï¼Œè¿”å›çš„å¯èƒ½å°±ä¸åªæ˜¯å•å•ä¸€ä¸ªæ–‡ä»¶æµäº†ï¼Œå¯ä»¥ä»¥å¯¹è±¡çš„æ–¹å¼è¿”å›åŒ…å«æ–‡ä»¶åã€æ–‡ä»¶ç±»å‹ã€æ–‡ä»¶å¤§å°ç­‰å‚æ•°ï¼Œä¾¿äºå‰å°å±•ç¤ºã€‚</p></blockquote><p>åé¢æœ‰æ—¶é—´æ‰¾åˆ°äº†æ›´ä¾¿æ·çš„ä¸‹è½½ä¸Šä¼ æ–¹å¼å†æ¥æ›´æ–°å§ï¼Œç›®å‰å°±è¿™ä¹ˆå¤šäº† : )</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/05/20/seccloud_fifth/"/>
      <url>/2018/05/20/seccloud_fifth/</url>
      
        <content type="html"><![CDATA[<h2 id="11-åŸºäºtokençš„ç™»å½•è®¤è¯"><a href="#11-åŸºäºtokençš„ç™»å½•è®¤è¯" class="headerlink" title="11.åŸºäºtokençš„ç™»å½•è®¤è¯"></a>11.åŸºäºtokençš„ç™»å½•è®¤è¯</h2><p>ä¸»è¦ä»sessionsã€cookieså’Œtokenæ¥è¯´<br>å¾…ç»­ã€‚ã€‚ã€‚: p<br>â€”â€”â€”â€”â€”â€”920æ›´â€”â€”â€”â€”â€”â€”</p><h3 id="1-åŸºäºtokençš„ä¼šè¯éªŒè¯ï¼š"><a href="#1-åŸºäºtokençš„ä¼šè¯éªŒè¯ï¼š" class="headerlink" title="1.åŸºäºtokençš„ä¼šè¯éªŒè¯ï¼š"></a>1.åŸºäºtokençš„ä¼šè¯éªŒè¯ï¼š</h3><p>ç”¨æˆ·ç™»å½•ç³»ç»Ÿåä¸æœåŠ¡å™¨å»ºç«‹èµ·ä¼šè¯ï¼Œä¸ºäº†ä¿æŒä¼šè¯é¿å…é‡å¤ç™»å½•ï¼Œå› æ­¤æµè§ˆå™¨ç™»å½•ç¬¬ä¸€æ¬¡åéœ€è¦ä¸€ä¸ªå¯ä»¥è¯æ˜è‡ªå·±èº«ä»½çš„ä¸œè¥¿ï¼Œè®©æœåŠ¡å™¨çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæ›¾ç»ç™»å½•è¿‡çš„ç”¨æˆ·å¹¶ä¸”çŸ¥é“æ˜¯è°ï¼Œä»è€Œå“åº”å¯¹åº”ç”¨æˆ·çš„è¯·æ±‚ï¼›ç”±äºHTTPè¯·æ±‚æ˜¯æ— çŠ¶æ€çš„ï¼Œå› æ­¤åŒºåˆ†æ¯ä¸€ä¸ªç”¨æˆ·æ˜¯ä¸€ä¸ªä¸å°çš„å›°éš¾ã€‚<br>åœ¨ä»‹ç»åŸºäºtokençš„èº«ä»½éªŒè¯ä¹‹å‰ï¼Œå¯ä»¥æƒ³åˆ°è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•åï¼ŒæœåŠ¡å™¨å›åº”ç”¨æˆ·ä¸€ä¸ªä¼šè¯IDå°±ï¼Œç”¨æˆ·è¯·æ±‚æ—¶å¸¦ä¸Šè¿™ä¸ªIDï¼ŒæœåŠ¡å™¨æ£€ç´¢åˆ°è¿™ä¸ªIDå¯¹åº”çš„æ˜¯è°ï¼Œå°±å¯ä»¥å›åº”æ­£ç¡®çš„è¯·æ±‚äº†ï¼›è¿™å¯¹äºå°‘é‡ç”¨æˆ·ç¾¤ä½“æ¥è¯´è¿˜è¡Œï¼Œä½†å¯¹äºç”¨æˆ·é‡è¿‡å¤šçš„ç³»ç»Ÿï¼ŒæœåŠ¡å™¨å­˜å‚¨çš„å‹åŠ›å°±å¤ªå¤§äº†ï¼Œè€Œä¸”åŸºäºè´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨é›†ç¾¤ä¸èƒ½ä¿è¯ä¸€ä¸ªç”¨æˆ·çš„æ¯æ¬¡è¯·æ±‚éƒ½åœ¨ç¬¬ä¸€å°ä¿å­˜ç”¨æˆ·IDçš„æœåŠ¡å™¨ä¸Šã€‚<br>æ‰€ä»¥è¿™ä¸ªIDä¸åº”è¯¥è®©æœåŠ¡å™¨å­˜ï¼Œä½†å¦‚æœä¸å­˜çš„è¯æœåŠ¡å™¨åˆä¸çŸ¥é“è¯·æ±‚çš„æ˜¯ä¸æ˜¯åˆæ³•çš„ç”¨æˆ·ã€‚<br>åŸºäºtokençš„èº«ä»½éªŒè¯ï¼šç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»é™†åï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªç”±user_idå’Œç­¾åï¼ˆç”¨æœåŠ¡å™¨ç§˜é’¥åŠ å¯†åçš„user_idï¼‰ï¼ŒäºŒè€…ç»„åˆæˆä¸€ä¸ªtokenï¼ˆä»¤ç‰Œï¼‰å‘ç»™æµè§ˆå™¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/token1.png" alt=""></p><p>ä¹‹åçš„æ¯æ¬¡è¯·æ±‚æµè§ˆå™¨æŠŠtokenå¸¦ç€ï¼Œæ¯æ¬¡æœåŠ¡å™¨è§£å¯†tokené‡Œçš„ç­¾åå¯¹æ¯”æ˜æ–‡çš„user_idï¼Œä¸€è‡´çš„è¯å°±å¯ä»¥çŸ¥é“ç”¨æˆ·æ˜¯è°äº†ï¼Œé¿å…äº†æœåŠ¡å™¨å­˜å‚¨session_idçš„å‹åŠ›ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/token2.png" alt=""></p><h3 id="2-cookie"><a href="#2-cookie" class="headerlink" title="2.cookie"></a>2.cookie</h3><p>cookie æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„ä¸œè¥¿ï¼ŒæŒ‡çš„å°±æ˜¯æµè§ˆå™¨é‡Œé¢èƒ½æ°¸ä¹…å­˜å‚¨çš„ä¸€ç§æ•°æ®ï¼Œä»…ä»…æ˜¯æµè§ˆå™¨å®ç°çš„ä¸€ç§æ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚</p><p>cookieç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æŠŠcookieä»¥kvçš„å½¢å¼ä¿å­˜åˆ°æŸä¸ªç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶å†…ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚åŒä¸€ç½‘ç«™æ—¶ä¼šæŠŠè¯¥cookieå‘é€ç»™æœåŠ¡å™¨ã€‚ç”±äºcookieæ˜¯å­˜åœ¨å®¢æˆ·ç«¯ä¸Šçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨åŠ å…¥äº†ä¸€äº›é™åˆ¶ç¡®ä¿cookieä¸ä¼šè¢«æ¶æ„ä½¿ç”¨ï¼ŒåŒæ—¶ä¸ä¼šå æ®å¤ªå¤šç£ç›˜ç©ºé—´ï¼Œæ‰€ä»¥æ¯ä¸ªåŸŸçš„cookieæ•°é‡æ˜¯æœ‰é™çš„ã€‚ </p><h3 id="3-session"><a href="#3-session" class="headerlink" title="3.session"></a>3.session</h3><p>session ä»å­—é¢ä¸Šè®²ï¼Œå°±æ˜¯ä¼šè¯ã€‚è¿™ä¸ªå°±ç±»ä¼¼äºä½ å’Œä¸€ä¸ªäººäº¤è°ˆï¼Œä½ æ€ä¹ˆçŸ¥é“å½“å‰å’Œä½ äº¤è°ˆçš„æ˜¯å¼ ä¸‰è€Œä¸æ˜¯æå››å‘¢ï¼Ÿå¯¹æ–¹è‚¯å®šæœ‰æŸç§ç‰¹å¾ï¼ˆé•¿ç›¸ç­‰ï¼‰è¡¨æ˜ä»–å°±æ˜¯å¼ ä¸‰ã€‚</p><p>session ä¹Ÿæ˜¯ç±»ä¼¼çš„é“ç†ï¼ŒæœåŠ¡å™¨è¦çŸ¥é“å½“å‰å‘è¯·æ±‚ç»™è‡ªå·±çš„æ˜¯è°ã€‚ä¸ºäº†åšè¿™ç§åŒºåˆ†ï¼ŒæœåŠ¡å™¨å°±è¦ç»™æ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…ä¸åŒçš„â€œèº«ä»½æ ‡è¯†â€ï¼Œç„¶åå®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡å™¨å‘è¯·æ±‚çš„æ—¶å€™ï¼Œéƒ½å¸¦ä¸Šè¿™ä¸ªâ€œèº«ä»½æ ‡è¯†â€ï¼ŒæœåŠ¡å™¨å°±çŸ¥é“è¿™ä¸ªè¯·æ±‚æ¥è‡ªäºè°äº†ã€‚è‡³äºå®¢æˆ·ç«¯æ€ä¹ˆä¿å­˜è¿™ä¸ªâ€œèº«ä»½æ ‡è¯†â€ï¼Œå¯ä»¥æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œå¯¹äºæµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œå¤§å®¶éƒ½é»˜è®¤é‡‡ç”¨ cookie çš„æ–¹å¼ã€‚</p><p>æœåŠ¡å™¨ä½¿ç”¨sessionæŠŠç”¨æˆ·çš„ä¿¡æ¯ä¸´æ—¶ä¿å­˜åœ¨äº†æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·ç¦»å¼€ç½‘ç«™åsessionä¼šè¢«é”€æ¯ã€‚è¿™ç§ç”¨æˆ·ä¿¡æ¯å­˜å‚¨æ–¹å¼ç›¸å¯¹cookieæ¥è¯´æ›´å®‰å…¨ï¼Œå¯æ˜¯sessionæœ‰ä¸€ä¸ªç¼ºé™·ï¼šå¦‚æœwebæœåŠ¡å™¨åšäº†è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ“ä½œè¯·æ±‚åˆ°äº†å¦ä¸€å°æœåŠ¡å™¨çš„æ—¶å€™sessionä¼šä¸¢å¤±ã€‚</p><h2 id="12-VUEæºç ç¬”è®°"><a href="#12-VUEæºç ç¬”è®°" class="headerlink" title="12.VUEæºç ç¬”è®°"></a>12.VUEæºç ç¬”è®°</h2><p><a href="https://github.com/Alexandermclean/vue/blob/dev/src/core/instance" target="_blank" rel="noopener">æºç é“¾æ¥</a></p><blockquote><p>åœ¨çœ‹æºç å‰éœ€è¦å…ˆäº†è§£ä¸€ä¸‹å¼ºç±»å‹æ¨¡æ¿ç±»çš„jsè¯­è¨€ï¼Œç±»ä¼¼typescriptæˆ–æ˜¯flowï¼Œvue2.0å°±æ˜¯ç”¨flowå†™çš„ï¼ˆåŸå› <a href="https://www.zhihu.com/question/46397274" target="_blank" rel="noopener">é“¾æ¥</a>ï¼‰ä¸ªäººçœ‹å®Œä¹‹åè§‰å¾—flowå¥½ç”¨ä¸€ç‚¹ï¼Œè½»é‡ä¸å¹²é¢„æºç ã€‚</p></blockquote><h2 id="13-vue-nodejs-webpackç¯å¢ƒæ­å»º"><a href="#13-vue-nodejs-webpackç¯å¢ƒæ­å»º" class="headerlink" title="13.vue+nodejs+webpackç¯å¢ƒæ­å»º"></a>13.vue+nodejs+webpackç¯å¢ƒæ­å»º</h2><p>åˆè¦å†™å¦ä¸€ä¸ªé¡¹ç›®äº† = =è®°å½•ä¸€ä¸‹åŸºäºwebpackæ­å»ºVueå¼€å‘ç¯å¢ƒçš„æ“ä½œå’Œé…ç½®</p><h3 id="1-vue-cliæ­å»ºæ¡†æ¶"><a href="#1-vue-cliæ­å»ºæ¡†æ¶" class="headerlink" title="1.vue-cliæ­å»ºæ¡†æ¶"></a>1.vue-cliæ­å»ºæ¡†æ¶</h3><p>vue init webpack xxxâ€“cd xxxâ€“npm install</p><h3 id="2-nodejså¯åŠ¨dev"><a href="#2-nodejså¯åŠ¨dev" class="headerlink" title="2.nodejså¯åŠ¨dev"></a>2.nodejså¯åŠ¨dev</h3><p>æ–°å»ºä¸€ä¸ªwebpack_server.jsçš„é…ç½®æ–‡ä»¶ï¼Œä»webpack.base.conf.jså’Œwebpack.dev.conf.jsä¸­é€‰æ‹©ç›¸åº”çš„é…ç½®ä»£ç <br>ä¸»è¦æ˜¯ï¼šentryã€outputã€moduleå’Œpluginsè¿™å››ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­entryæ˜¯è¾“å…¥ï¼Œwebpackä¼šå°†è¾“å…¥çš„æ–‡ä»¶åŠåœ¨å…¶ä¸­å¯¼å…¥çš„æ–‡ä»¶ä¸€èµ·æ‰“åŒ…ï¼›outputæ˜¯è¾“å‡ºï¼ŒæŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„ç›®å½•ï¼Œæ–‡ä»¶åç­‰ï¼›moduleæ˜¯é¢„å¤„ç†æ–¹å¼ï¼Œwebpackåªèƒ½å¤„ç†jsæ–‡ä»¶ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå¦‚cssï¼Œå›¾ç‰‡ï¼Œtypescriptï¼Œsassç­‰æ–‡ä»¶ï¼Œä¸ºäº†ä½¿webpackèƒ½é¡ºåˆ©æ‰“åŒ…ï¼Œé‚£å°±éœ€è¦é¢„å¤„ç†ä¸€ä¸‹ï¼›pluginsé¡¾åæ€ä¹‰å°±æ˜¯æä¾›ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œç›¸å½“äºæ’ä»¶ä¾‹å¦‚injectï¼šæ’å…¥outputèµ„æºç‰¹å®šçš„ä½ç½®ï¼Œå¯ä»¥ä¸ºheadï¼Œbodyç­‰ï¼Œminifyï¼šå‹ç¼©htmlæ–‡ä»¶ã€‚</p><p>ä¸»è¦æ¶‰åŠçš„æ–‡ä»¶ï¼šbuildä¸‹çš„webpack.base.conf.jså’Œwebpack.dev.conf.jsã€config/index.jsã€package.jsonå’Œmain.jsï¼Œåˆ—ä¸€ä¸‹å…³äºé…ç½®ä¸­æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªç‚¹ï¼š<br>1.npm expressåï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªserveræ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªnodeçš„å¯åŠ¨æ–‡ä»¶app.js</p><p>2.app.jsä¸­ä¸»è¦ç”¨â€™webpack-dev-middlewareâ€™æ¨¡å—æ‰“åŒ…è¿è¡Œdevï¼Œç”¨webpack-hot-middlewareå®ç°ä¿®æ”¹æ–‡ä»¶åçš„çƒ­åŠ è½½ï¼ˆé™¤expressæ–‡ä»¶å¤–ï¼‰ï¼Œå¯¹äºexpressæ–‡ä»¶ä¿®æ”¹çš„çƒ­åŠ è½½å¯ä»¥ç”¨nodemonå®ç°ï¼Œä¸ªäººæ„Ÿè§‰nodemonå’Œwebpack-hot-middlewareé…åˆå¯ä»¥è®©é¡¹ç›®è°ƒè¯•èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚</p><pre><code class="javascript">const webpackDevMiddleware = require(&#39;webpack-dev-middleware&#39;);const webpackHotMiddleware = require(&#39;webpack-hot-middleware&#39;);const webpackConfig = require(&#39;../build/webpack-server.js&#39;);const webpack = require(&#39;webpack&#39;);const compiler = webpack(webpackConfig);if (setting.webpack.isWebpackDev){    app.use(webpackDevMiddleware(compiler,{        publicPath: webpackConfig.output.publicPath,        noInfo: true    }));    app.use(webpackHotMiddleware(compiler));}</code></pre><p>3.å½“expressä¾¦å¬æŸä¸ªæ¥å£æ—¶ï¼Œè¾“å…¥çš„è·¯å¾„æ˜¯â€œ/â€æˆ–â€œ/index.htmlâ€è¿™ç§é»˜è®¤è·¯å¾„æ—¶ï¼Œéœ€è¦ç”¨ä¸­é—´ä»¶æ‹¦æˆªæŒ‡å‘å¯åŠ¨åçš„devçš„htmlå…¥å£æ–‡ä»¶ï¼Œå³æ‰“åŒ…åæ ¹ç›®å½•ä¸‹çš„dist/index.html</p><pre><code class="javascript">var DIST_DIR = path.join(__dirname, &#39;../&#39;, &#39;dist&#39;)app.get([&quot;/&quot;, &quot;/index.html&quot;], (req, res, next) =&gt;{  const filename = path.join(DIST_DIR, &#39;index.html&#39;);  compiler.outputFileSystem.readFile(filename, (err, result) =&gt;{    if(err){        return(next(err))    }    res.set(&#39;content-type&#39;, &#39;text/html&#39;)    res.send(result)    res.end()  })})</code></pre><p>4.webpackæ‰“åŒ…çš„é…ç½®æ–‡ä»¶è®¾ç½®ï¼Œwebpack(webpackConfig)è¿™ä¸€æ­¥å°±æ˜¯ç”¨é…ç½®æ–‡ä»¶åˆ›å»ºä¸€ä¸ªç”¨æ¥ä¼ ç»™webpack-middle-wareçš„å¯¹è±¡ï¼Œä¸»è¦ä¿®æ”¹äº†entryå’Œpluginsï¼Œentryæ·»åŠ webpack-hot-middleware/clientå…¥å£å’Œpluginsæ·»åŠ çƒ­åŠ è½½çš„æ’ä»¶new webpack.optimize.OccurrenceOrderPlugin()å’Œnew webpack.HotModuleReplacementPlugin()ã€‚</p><p>æ­£å¸¸å¯åŠ¨å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥åœ¨package.jsonçš„scriptsé‡Œé¢è‡ªå®šä¹‰ä¸€ä¸ªå¯åŠ¨å‘½ä»¤ï¼š<br><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/nodemon.PNG" alt=""></p><h3 id="3-é›†æˆæ’ä»¶å’Œå·¥å…·"><a href="#3-é›†æˆæ’ä»¶å’Œå·¥å…·" class="headerlink" title="3.é›†æˆæ’ä»¶å’Œå·¥å…·"></a>3.é›†æˆæ’ä»¶å’Œå·¥å…·</h3><p>1.router<br>è·¯ç”±çš„å…·ä½“è®¾ç½®å¯ä»¥çœ‹<a href="https://github.com/Alexandermclean/Security-Cloud-Project#1%E8%B7%AF%E7%94%B1router" target="_blank" rel="noopener">ä¸Šæ–‡</a>ï¼Œæœ‰ä¸“é—¨é’ˆå¯¹è·¯ç”±è®¾ç½®çš„è¯¦ç»†ä»‹ç»ï¼›æˆ–è€…ç›®å½•ä¸‹çš„<a href="https://github.com/Alexandermclean/Security-Cloud-Project/blob/master/buildvue/src/router/index.js" target="_blank" rel="noopener">é¡¹ç›®ä»£ç </a>ã€‚</p><pre><code class="javascript">// main.jsimport router from &#39;./router&#39;// routeræ–‡ä»¶å¤¹ä¸‹index.jsimport Vue from &#39;vue&#39;import Router from &#39;vue-router&#39;Vue.use(Router)</code></pre><p>2.vuex </p><pre><code class="javascript">// main.jsæ–‡ä»¶import Vue from &#39;vue&#39;import Vuex from &#39;vuex&#39;import vuexStore from &#39;./store/index&#39;Vue.use(Vuex)new Vue({  store: vuexStore})// store ç»“æ„ index.jså’Œmodulesæ–‡ä»¶å¤¹// index.jsimport Vue from &#39;vue&#39;import Vuex from &#39;vuex&#39;import common from &#39;./modules/common&#39;Vue.use(Vuex)const store = new Vuex.Store({    modules: {        common: common    }})export default store// modules/common.jsconst state = {    name: &#39;WAF&#39;}const getters = {    getName: state =&gt; state.name}const mutations = {}const actions = {}export default {    // namespaced: true,  // å‘½åç©ºé—´é—®é¢˜TODO    state,    getters,    mutations,    actions}</code></pre><p>3.axios </p><pre><code class="javascript">import axios from &#39;./api/axios&#39;Vue.prototype.$axios = axios// api/axiosimport axios from &#39;axios&#39;axios.defaults.timeout = 5000// é˜²æ­¢IEæµè§ˆå™¨çš„GETæ“ä½œè¯·æ±‚åŒä¸€æ¥å£æ—¶ä»ç¼“å­˜æ‹¿æ•°æ®axios.defaults.headers = Object.assign(axios.defaults.headers, {&#39;Cache-Control&#39;: &#39;no-cache&#39;})export default axios</code></pre><p>4.iview </p><pre><code class="javascript">import iView from &#39;iview&#39;import &#39;iview/dist/styles/iview.css&#39;Vue.use(iView)// éœ€è¦åœ¨webpacké…ç½®æ–‡ä»¶ä¸­çš„module.rulesæ·»åŠ cssã€postcssã€lessç­‰è§„åˆ™{    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap, usePostCSS: true })}</code></pre><p>5.jquery</p><pre><code class="javascript">// main.jsimport $ from &#39;jquery&#39;new Vue({  el: &#39;#app&#39;,  router,  components: { App },  template: &#39;&lt;App/&gt;&#39;,  $: $,  store: vuexStore})// nodeæ‰“åŒ…é…ç½®æ–‡ä»¶webpack-server.js// åœ¨pluginsä¸­æ·»åŠ new webpack.ProvidePlugin({  $: &#39;jquery&#39;,  jQuery: &#39;jquery&#39;})</code></pre><p>6.å…¬å…±æ ·å¼</p><pre><code class="javascript">// vue-loader.jsæ–‡ä»¶ï¼Œæ·»åŠ å…¥å£cssæ–‡ä»¶è·¯å¾„å’Œè¾“å‡ºæ–‡ä»¶åç§°entry: {    common: &#39;../static/css/common.css&#39;},output: {    filename: &#39;./css/[name].css&#39;}// webpack-serveræ–‡ä»¶ï¼Œentryä¸­æ·»åŠ importå…¬å…±cssæ–‡ä»¶çš„jsæ–‡ä»¶style: [&quot;./static/js/style.js&quot;]// static/js/style.jsæ–‡ä»¶import &#39;../css/common.css&#39;</code></pre>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/05/20/seccloud_fourth/"/>
      <url>/2018/05/20/seccloud_fourth/</url>
      
        <content type="html"><![CDATA[<h2 id="10-ES6ä½¿ç”¨å°ç»“"><a href="#10-ES6ä½¿ç”¨å°ç»“" class="headerlink" title="10.ES6ä½¿ç”¨å°ç»“"></a>10.ES6ä½¿ç”¨å°ç»“</h2><p>è¿™éƒ¨åˆ†å‘¢æ‰“ç®—å¯¹é¡¹ç›®ä¸­ç”¨åˆ°çš„ES6è¯­æ³•åšä¸ªå°æ€»ç»“å§: )ä»…æ˜¯å¯¹é¡¹ç›®ä½¿ç”¨çš„éƒ¨åˆ†åšè®°å½•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»çœ‹çœ‹é˜®ä¸€å³°çš„<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">ECMAScript 6 å…¥é—¨</a></p><h3 id="1-promise"><a href="#1-promise" class="headerlink" title="1.promise"></a>1.promise</h3><p>Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6 å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†Promiseå¯¹è±¡ã€‚<br>æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h4><pre><code class="javascript">// åˆ›å»ºpromiseå®ä¾‹const promise = new Promise(function(resolve, reject) {  // ... some code  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){    resolve(value);  } else {    reject(error);  }});// Promiseå®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨thenæ–¹æ³•åˆ†åˆ«æŒ‡å®šresolvedçŠ¶æ€å’ŒrejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚promise.then(function(value) {  // success}, function(error) {  // failure});</code></pre><h4 id="ä¸¾ä¸¤ä¸ªæ —å­å§"><a href="#ä¸¾ä¸¤ä¸ªæ —å­å§" class="headerlink" title="ä¸¾ä¸¤ä¸ªæ —å­å§"></a>ä¸¾ä¸¤ä¸ªæ —å­å§</h4><pre><code class="javascript">// ç®€å•æ“ä½œfunction timeout(ms) {  return new Promise((resolve, reject) =&gt; {    setTimeout(resolve, ms, &#39;done&#39;); // ç¬¬ä¸‰ä¸ªå‚æ•°ä¼šä½œä¸ºresolveå‡½æ•°çš„å‚æ•°ä½¿ç”¨  });}timeout(100).then((value) =&gt; {  console.log(value); // æ‰“å°done});    // ç¨å¤æ‚æ“ä½œconst getJSON = function(url) {  const promise = new Promise(function(resolve, reject){    const handler = function() {      if (this.readyState !== 4) {        return;      }      if (this.status === 200) {        resolve(this.response);       } else {        reject(new Error(this.statusText)); // åˆ†ç±»è¿›ä¸åŒçš„å›è°ƒ      }    };    const client = new XMLHttpRequest();    client.open(&quot;GET&quot;, url);    client.onreadystatechange = handler;    client.responseType = &quot;json&quot;;    client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);    client.send();  });  return promise; // è¿”å›promiseå¯¹è±¡æ˜¯ç»§ç»­å›è°ƒçš„å…³é”®};getJSON(&quot;/posts.json&quot;).then(function(json) {  console.log(&#39;Contents: &#39; + json);}, function(error) {  console.error(&#39;å‡ºé”™äº†&#39;, error);});</code></pre><blockquote><p>promiseæ–°å»ºåä¼šæ‰§è¡Œsome codeçš„ä»£ç å—ï¼Œå†æ‰§è¡Œåé¢çš„ä»£ç ï¼Œæœ€åæ‰§è¡Œresolveå’Œrejectçš„éƒ¨åˆ†</p></blockquote><h4 id="é“¾å¼å›è°ƒï¼Œé¿å…å›è°ƒåœ°ç‹±"><a href="#é“¾å¼å›è°ƒï¼Œé¿å…å›è°ƒåœ°ç‹±" class="headerlink" title="é“¾å¼å›è°ƒï¼Œé¿å…å›è°ƒåœ°ç‹±"></a>é“¾å¼å›è°ƒï¼Œé¿å…å›è°ƒåœ°ç‹±</h4><p>å¤šå±‚çš„å›è°ƒçœ‹èµ·æ¥ååˆ†ä¸ç¾è§‚è€Œä¸”ä¸æ˜“æ•°æ®ç»´æŠ¤ï¼Œåœ¨jsä¸­å¼•å…¥é“¾å¼æ“ä½œä¼šå˜å¾—ä¼˜é›…å¾ˆå¤šã€‚</p><pre><code class="javascript">yPromise(value){    return new Promise(function(resolve, reject){        setTimeout(function(){            if(value == 1002){                resolve(value+1)            }            else {                reject(&#39;yuhui&#39;)            }        },value)    })}this.yPromise(1000)  .catch(function(err){ // è°ƒç”¨resolveæˆ–rejectå¹¶ä¸ä¼šç»ˆç»“ Promise çš„å‚æ•°å‡½æ•°çš„æ‰§è¡Œã€‚    console.log(err)    // return Promise.resolve(1000)    return Promise.reject(2000) // è¦æƒ³ç»§ç»­å›è°ƒå¿…é¡»è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡}).catch(function(err){    console.log(err)    return Promise.resolve(1000)}).then(function(res){    console.log(res)    // var res2 = res + 1000    // return new Promise(function(resolve, reject){    //     resolve(res2)    // })    return Promise.resolve(res+1000) //ç­‰ä»·äºä¸Šé¢çš„å†™æ³•}).then(function(res){    console.log(res)    return Promise.resolve(res+1000)})</code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/promise_1.PNG" alt=""></p><h3 id="2-ç®­å¤´å‡½æ•°"><a href="#2-ç®­å¤´å‡½æ•°" class="headerlink" title="2.ç®­å¤´å‡½æ•°"></a>2.ç®­å¤´å‡½æ•°</h3><p>å¾…ç»­ã€‚ã€‚ã€‚: p</p><h3 id="3-Setæ•°æ®ç»“æ„"><a href="#3-Setæ•°æ®ç»“æ„" class="headerlink" title="3.Setæ•°æ®ç»“æ„"></a>3.Setæ•°æ®ç»“æ„</h3><p>JavaScript åŸæœ‰çš„è¡¨ç¤ºâ€œé›†åˆâ€çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯æ•°ç»„ï¼ˆArrayï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰ï¼ŒES6 åˆæ·»åŠ äº†Mapå’ŒSetã€‚  </p><pre><code class="javaacript">// è®°ä½ç®€å•çš„ç”¨æ³•å°±è¡Œlet set = new Set([1,2,2,3,3,4])[...set]  // [1,2,3,4]set.size // 4</code></pre><h4 id="å®ä¾‹åŒ–Set"><a href="#å®ä¾‹åŒ–Set" class="headerlink" title="å®ä¾‹åŒ–Set"></a>å®ä¾‹åŒ–Set</h4><p>ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚  </p><pre><code class="javascript">const set = new Set([1,2,3,3,4,5])console.log([...set])// orconst set = new Set()[1,2,3,3,4,5].forEach ((val, index) =&gt; {set.add(val)})console.log([...set])// 1,2,3,4,5  size:5// æœ‰ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç°è±¡// ç›´æ¥addä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯æŠŠæ•°ç»„å…ƒç´ ä¸€ä¸ªä¸ªaddconst set = new Set()set.add([1,2,3,4,5,5])console.log([...set])// [1,2,3,4,5,5] size:1  ä¼šå¤šä¸€ä¸ªä¸€æ ·çš„addçš„æ•°ç»„ä¸”å¯ä»¥å«æœ‰é‡å¤å…ƒç´ </code></pre><blockquote><p>1.æ—¢å¯ä»¥åœ¨å®ä¾‹åŒ–Setçš„æ—¶å€™æŠŠæ•°ç»„å½“å‚æ•°ä¼ è¿›Set()æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨Setå¯¹è±¡çš„addæ–¹æ³•æ·»åŠ æˆå‘˜ã€‚<br>2.Setå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆ<strong>æˆ–è€…å…·æœ‰ iterable æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„</strong>ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–</p></blockquote><h4 id="ç‰¹æ€§å’Œç”¨æ³•"><a href="#ç‰¹æ€§å’Œç”¨æ³•" class="headerlink" title="ç‰¹æ€§å’Œç”¨æ³•"></a>ç‰¹æ€§å’Œç”¨æ³•</h4><p>1.é’ˆå¯¹Setæ•°æ®ç»“æ„å…ƒç´ ä¸é‡å¤çš„ç‰¹æ€§ï¼Œå¯ä»¥å¾ˆç®€å•çš„å¯¹æ•°ç»„å»é‡</p><pre><code class="javascript">[...new Set(array)] // å»é‡array</code></pre><p>ä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²å»é‡</p><pre><code class="javascript">[...new Set(&#39;aabbccd&#39;)].join(&#39;&#39;) // å»é‡array</code></pre><blockquote><p>join() æ–¹æ³•ç”¨äºæŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé»˜è®¤ä»¥é€—å·åˆ†å‰²ï¼›å¯æ¥å—å­—ç¬¦ä¸²å‚æ•°xï¼Œå³ä»¥xåˆ†å‰²æ•°ç»„  </p></blockquote><p>2.å‘ Set åŠ å…¥å€¼çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥5å’Œâ€5â€æ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ã€‚Setå†…éƒ¨åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸åŒï¼Œä½¿ç”¨çš„ç®—æ³•ç±»ä¼¼äº<strong>ç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦</strong>ï¼ˆ===ï¼‰ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯åœ¨Setå†…éƒ¨NaNç­‰äºè‡ªèº«ï¼Œè€Œç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦è®¤ä¸ºNaNä¸ç­‰äºè‡ªèº«ã€‚</p><pre><code class="javascript">let set = new Set()let a = NaNlet b = NaNset.add(a)set.add(b)set // Set {NaN} å»é‡åNaN === NaN // false</code></pre><p>å¦å¤–ï¼Œä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸ç›¸ç­‰çš„ã€‚</p><pre><code class="javascript">let set = new Set();set.add({})set.size // 1set.add({})set.size // 2{} === {} // false</code></pre><h4 id="Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"><a href="#Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"></a>Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</h4><ol><li><p>Set ç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§ã€‚</p><ul><li>Set.prototype.constructorï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯Setå‡½æ•°ã€‚</li><li>Set.prototype.sizeï¼šè¿”å›Setå®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚  </li></ul></li><li><p>Set å®ä¾‹çš„æ–¹æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ“ä½œæ–¹æ³•ï¼ˆç”¨äºæ“ä½œæ•°æ®ï¼‰å’Œéå†æ–¹æ³•ï¼ˆç”¨äºéå†æˆå‘˜ï¼‰ã€‚ä¸‹é¢å…ˆä»‹ç»å››ä¸ªæ“ä½œæ–¹æ³•ã€‚</p><ul><li>add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚</li><li>delete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚</li><li>has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºSetçš„æˆå‘˜ã€‚</li><li>clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚<pre><code class="javascript">s.add(1).add(2).add(2);// æ³¨æ„2è¢«åŠ å…¥äº†ä¸¤æ¬¡</code></pre></li></ul></li></ol><p>s.size // 2</p><p>s.has(1) // true<br>s.has(2) // true<br>s.has(3) // false</p><p>s.delete(2);<br>s.has(2) // false</p><pre><code>å¦å¤–ï¼Œé™¤äº†ä¹‹å‰çš„[...set]è¿™ç§æ–¹å¼æŠŠsetç±»å‹è½¬æ¢æˆæ•°ç»„å¤–ï¼ŒArrayçš„from()æ–¹æ³•ä¹Ÿå¯ä»¥ã€‚```javascriptlet set = new Set([1,2,2,3,3,4])let arr = Array.from(set) // [1,2,3,4]</code></pre><h4 id="éå†æ“ä½œ"><a href="#éå†æ“ä½œ" class="headerlink" title="éå†æ“ä½œ"></a>éå†æ“ä½œ</h4><p>Setç»“æ„çš„å®ä¾‹æœ‰å››ä¸ªéå†æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéå†æˆå‘˜ã€‚  </p><ul><li>keys()ï¼šè¿”å›é”®åçš„éå†å™¨</li><li>values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨</li><li>entries()ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨</li><li>forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</li></ul><blockquote><p>éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼ŒSetçš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚è¿™ä¸ªç‰¹æ€§æœ‰æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨Setä¿å­˜ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ—è¡¨ï¼Œè°ƒç”¨æ—¶å°±èƒ½ä¿è¯æŒ‰ç…§æ·»åŠ é¡ºåºè°ƒç”¨ã€‚</p></blockquote><h5 id="keys-ï¼Œvalues-ï¼Œentries"><a href="#keys-ï¼Œvalues-ï¼Œentries" class="headerlink" title="keys()ï¼Œvalues()ï¼Œentries()"></a>keys()ï¼Œvalues()ï¼Œentries()</h5><p>keysæ–¹æ³•ã€valuesæ–¹æ³•ã€entriesæ–¹æ³•è¿”å›çš„éƒ½æ˜¯éå†å™¨å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯Iteratorå¯¹è±¡ï¼‰ã€‚ç”±äºSetç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åå’Œé”®å€¼æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥keysæ–¹æ³•å’Œvaluesæ–¹æ³•çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</p><pre><code class="javascript">let set = new Set([&#39;yu&#39;, &#39;zheng&#39;, &#39;hui&#39;]);for (let item of set.keys()) {  console.log(item);}// yu// zheng// huifor (let item of set.values()) {  console.log(item);}// yu// zheng// huifor (let item of set.entries()) {  console.log(item);}// [&quot;yu&quot;, &quot;yu&quot;]// [&quot;zheng&quot;, &quot;zheng&quot;]// [&quot;hui&quot;, &quot;hui&quot;]</code></pre><blockquote><p>entriesæ–¹æ³•è¿”å›çš„éå†å™¨ï¼ŒåŒæ—¶åŒ…æ‹¬é”®åå’Œé”®å€¼ï¼Œæ‰€ä»¥æ¯æ¬¡è¾“å‡ºä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ä¸¤ä¸ªæˆå‘˜å®Œå…¨ç›¸ç­‰ã€‚</p></blockquote><p>å¦å¤–ï¼ŒSetç»“æ„çš„å®ä¾‹é»˜è®¤å¯éå†ï¼Œå®ƒçš„é»˜è®¤éå†å™¨ç”Ÿæˆå‡½æ•°å°±æ˜¯å®ƒçš„valuesæ–¹æ³•ã€‚</p><pre><code class="javacript">Set.prototype[Symbol.iterator] === Set.prototype.values// true// å¯ä»¥çœç•¥valuesæ–¹æ³•ï¼Œç›´æ¥ç”¨for...ofå¾ªç¯éå† Setfor (let item of set) { // ç­‰åŒäºfor (let item of set.values())  console.log(item)}// yu// zheng// hui</code></pre><h5 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h5><p>Setç»“æ„çš„å®ä¾‹ä¸æ•°ç»„ä¸€æ ·ï¼Œä¹Ÿæ‹¥æœ‰forEachæ–¹æ³•ï¼Œç”¨äºå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p><pre><code class="javascript">let set = new Set([1, 4, 9]);set.forEach((val, key) =&gt; console.log(key + &#39; : &#39; + val))// 1 : 1// 4 : 4// 9 : 9</code></pre><blockquote><p>Setçš„forEachæ–¹æ³•çš„å‚æ•°å°±æ˜¯ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å‚æ•°ä¸æ•°ç»„çš„forEachä¸€è‡´ï¼Œä¾æ¬¡ä¸ºé”®å€¼ã€é”®åã€é›†åˆæœ¬èº«ï¼ˆä¸Šä¾‹çœç•¥äº†è¯¥å‚æ•°ï¼‰ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ<strong>Setç»“æ„çš„é”®åå°±æ˜¯é”®å€¼ï¼ˆä¸¤è€…æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œ</strong>å› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°ä¸ç¬¬äºŒä¸ªå‚æ•°çš„å€¼æ°¸è¿œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><h4 id="Arrayå’ŒSetç»„åˆåº”ç”¨"><a href="#Arrayå’ŒSetç»„åˆåº”ç”¨" class="headerlink" title="Arrayå’ŒSetç»„åˆåº”ç”¨"></a>Arrayå’ŒSetç»„åˆåº”ç”¨</h4><ol><li>æ•°ç»„çš„mapå’Œfilteræ–¹æ³•ä¹Ÿå¯ä»¥é—´æ¥ç”¨äºSetäº†<pre><code class="javascript">let set = new Set([1, 2, 3]);set = new Set([...set].map(x =&gt; x * 2));// è¿”å›Setç»“æ„ï¼š{2, 4, 6}</code></pre></li></ol><p>let set = new Set([1, 2, 3, 4, 5]);<br>set = new Set([â€¦set].filter(x =&gt; (x % 2) == 0));<br>// è¿”å›Setç»“æ„ï¼š{2, 4}</p><pre><code>2. ä½¿ç”¨Setå¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifferenceï¼‰```javascriptlet a = new Set([1, 2, 3])let b = new Set([4, 3, 2])// å¹¶é›†let union = new Set([...a, ...b])// Set {1, 2, 3, 4}// äº¤é›†let intersect = new Set([...a].filter(x =&gt; b.has(x)))// set {2, 3}// å·®é›†let difference = new Set([...a].filter(x =&gt; !b.has(x)))// Set {1}</code></pre><h3 id="4-Mapæ•°æ®ç»“æ„"><a href="#4-Mapæ•°æ®ç»“æ„" class="headerlink" title="4.Mapæ•°æ®ç»“æ„"></a>4.Mapæ•°æ®ç»“æ„</h3><p>åŸºæœ¬ç”¨æ³•</p><pre><code class="javascript">const map = new Map([    [true, 1],[{}, 1],[&#39;y&#39;, &#39;h&#39;]])map // {true =&gt; 1, {â€¦} =&gt; 1, &quot;y&quot; =&gt; &quot;h&quot;}</code></pre><p>Mapæ•°æ®ç»“æ„å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObjectç»“æ„æä¾›äº†â€œå­—ç¬¦ä¸²â€”å€¼â€çš„å¯¹åº”ï¼ŒMapç»“æ„æä¾›äº†â€œå€¼â€”å€¼â€çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„Hashç»“æ„å®ç°ã€‚</p><pre><code class="javascript">const m = new Map()const o = {p: &#39;Hello World&#39;} // è¿™é‡Œçš„å¯¹è±¡ä¸€å®šè¦ç”¨å£°æ˜çš„å˜é‡ä½œä¸ºkeyï¼Œä¿è¯setå’Œgetæ˜¯æŒ‡å‘åŒä¸€å—å†…å­˜m.set(o, &#39;content&#39;)m.get(o) // &quot;content&quot;m.has(o) // truem.delete(o) // truem.has(o) // false</code></pre><blockquote><p>ä¸Šé¢ä»£ç ä½¿ç”¨Mapç»“æ„çš„setæ–¹æ³•ï¼Œå°†å¯¹è±¡oå½“ä½œmçš„ä¸€ä¸ªé”®ï¼Œç„¶ååˆä½¿ç”¨getæ–¹æ³•è¯»å–è¿™ä¸ªé”®ï¼Œæ¥ç€ä½¿ç”¨deleteæ–¹æ³•åˆ é™¤äº†è¿™ä¸ªé”®ã€‚</p></blockquote><h4 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h4><ol><li>ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒMapä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ã€‚è¯¥æ•°ç»„çš„æˆå‘˜æ˜¯ä¸€ä¸ªä¸ªè¡¨ç¤ºé”®å€¼å¯¹çš„æ•°ç»„ã€‚<pre><code class="javascript">const map = new Map([[&#39;name&#39;, &#39;yyy&#39;],[&#39;title&#39;, &#39;hhh&#39;]])</code></pre></li></ol><p>map.size // 2<br>map.has(â€˜nameâ€™) // true<br>map.get(â€˜nameâ€™) // â€œyyyâ€<br>map.has(â€˜titleâ€™) // true<br>map.get(â€˜titleâ€™) // â€œhhhâ€</p><pre><code>&gt; Mapæ„é€ å‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯æ‰§è¡Œäº†arr.forEach([key,val], index) =&gt; map.set(key, val)2. ä¸ä»…ä»…æ˜¯æ•°ç»„ï¼Œä»»ä½•å…·æœ‰Iteratoræ¥å£ã€ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œéƒ½å¯ä»¥å½“ä½œMapæ„é€ å‡½æ•°çš„å‚æ•°ã€‚è¿™å°±æ˜¯è¯´ï¼ŒSetå’ŒMapéƒ½å¯ä»¥ç”¨æ¥ç”Ÿæˆæ–°çš„ Mapã€‚```javascriptconst set = new Set([[&#39;yyy&#39;,1],[&#39;zzz&#39;,2],[&#39;hhh&#39;,3]])const map = new Map([[&#39;yyy&#39;,4],[&#39;zzz&#39;,5],[&#39;hhh&#39;,6]])const origin_map1 = new Map(set)const origin_map2 = new Map(map)origin_map1.get(&#39;yyy&#39;) // 1origin_map2.get(&#39;yyy&#39;) // 4</code></pre><blockquote><p>åˆ†åˆ«ä½¿ç”¨Setå¯¹è±¡å’ŒMapå¯¹è±¡å½“ä½œMapæ„é€ å‡½æ•°çš„å‚æ•°ï¼Œç»“æœéƒ½ç”Ÿæˆäº†æ–°çš„Mapå¯¹è±¡ã€‚</p></blockquote><ol start="3"><li>å¦‚æœå¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡èµ‹å€¼ï¼Œåé¢çš„å€¼å°†è¦†ç›–å‰é¢çš„å€¼ï¼›ä¸å­˜åœ¨çš„é”®å¯¹åº”çš„å€¼éƒ½æ˜¯undefinedã€‚<pre><code class="javascript">const map = new Map()</code></pre></li></ol><p>map<br>.set(1, â€˜aaaâ€™)<br>.set(1, â€˜bbbâ€™)</p><p>map.get(1) // â€œbbbâ€</p><p>map.get(â€˜asfddfsasadfâ€™) // undefined</p><pre><code>4. åªæœ‰å¯¹**åŒä¸€ä¸ªå¯¹è±¡**çš„å¼•ç”¨ï¼ŒMap ç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚```javascriptconst map = new Map()map.set([&#39;a&#39;], 555)map.get([&#39;a&#39;]) // undefinedlet key = [&#39;a&#39;] // èµ‹å€¼ç»™å˜é‡ågetå’Œsetå¼•ç”¨çš„éƒ½æ˜¯åŒä¸€å—å†…å­˜äº†map.set(key, 555)map.get(key) // 555</code></pre><blockquote><p>ä¸Šé¢ä»£ç çš„setå’Œgetæ–¹æ³•ï¼Œè¡¨é¢æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸¤ä¸ªå€¼ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤getæ–¹æ³•æ— æ³•è¯»å–è¯¥é”®ï¼Œè¿”å›undefinedã€‚</p></blockquote><ol start="5"><li>åŒæ ·çš„å€¼çš„ä¸¤ä¸ªå®ä¾‹ï¼Œåœ¨Mapç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®<pre><code class="javascript">const map = new Map()</code></pre></li></ol><p>const k1 = [â€˜aâ€™]<br>const k2 = [â€˜aâ€™]</p><p>map<br>.set(k1, 111)<br>.set(k2, 222)</p><p>map.get(k1) // 111<br>map.get(k2) // 222</p><pre><code>&gt; å˜é‡k1å’Œk2çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä»¬æŒ‡å‘çš„æ˜¯ä¸¤å—ä¸åŒçš„å†…å­˜ï¼Œå› æ­¤åœ¨Mapç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®ç»¼ä¸Šæ‰€è¿°ï¼ŒMapçš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§ä¸åŸä½œè€…çš„å±æ€§åŒåã€‚  å¦‚æœMapçš„é”®æ˜¯ä¸€ä¸ªç®€å•ç±»å‹çš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰ï¼ŒMapå°†å…¶è§†ä¸ºä¸€ä¸ªé”®ï¼Œæ¯”å¦‚0å’Œ-0å°±æ˜¯ä¸€ä¸ªé”®ï¼Œå¸ƒå°”å€¼trueå’Œå­—ç¬¦ä¸²trueåˆ™æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚å¦å¤–ï¼Œundefinedå’Œnullä¹Ÿæ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚  **è™½ç„¶NaNä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½†Mapå°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚**```javascriptlet map = new Map()map.set(-0, 123)map.get(+0) // 123map.set(true, 1)map.set(&#39;true&#39;, 2)map.get(true) // 1map.set(undefined, 3)map.set(null, 4)map.get(undefined) // 3map.set(NaN, 123)map.get(NaN) // 123</code></pre><h4 id="å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>å±æ€§å’Œæ“ä½œæ–¹æ³•</h4><p>Map ç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§å’Œæ“ä½œæ–¹æ³•ï¼š</p><ol><li>å±æ€§<ul><li>size è¿”å›Mapç»“æ„çš„æˆå‘˜æ€»æ•°</li></ul></li><li>æ–¹æ³•<ul><li>set(key, value) è®¾ç½®é”®åkeyå¯¹åº”çš„é”®å€¼ä¸ºvalueï¼Œç„¶åè¿”å›æ•´ä¸ªMapç»“æ„</li><li>get(key) è¯»å–keyå¯¹åº”çš„é”®å€¼</li><li>has(key) è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­</li><li>delete(key) åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›trueã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›false</li><li>clear() æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼</li></ul></li></ol><pre><code class="javascript">const map = new Map()map.set(&#39;foo&#39;, true)map.set(&#39;bar&#39;, false)map.size // 2map.set(&#39;yyy&#39;, 1).set(&#39;zzz&#39;, 2) // setæ–¹æ³•è¿”å›çš„æ˜¯mapå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥æœ‰é“¾å¼å†™æ³•map.get(&#39;yyy&#39;) // 1map.get(&#39;hhh&#39;) // undefinedmap.set(undefined, &#39;hah&#39;)map.get(undefined) // hahmap.has(undefined) // truemap.delete(&#39;yyy&#39;) // æˆåŠŸåè¿”å›truemap.has(&#39;yyy&#39;) // faslemap.clear()map.has(undefined) // false</code></pre><h4 id="éå†æ–¹æ³•"><a href="#éå†æ–¹æ³•" class="headerlink" title="éå†æ–¹æ³•"></a>éå†æ–¹æ³•</h4><p>å’ŒSetä¸€æ ·ï¼ŒMapä¹Ÿæä¾›ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•ã€‚  </p><ul><li>keys()ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚</li><li>values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚</li><li>entries()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚</li><li>forEach()ï¼šéå† Map çš„æ‰€æœ‰æˆå‘˜ã€‚</li></ul><h5 id="keys-values-entries"><a href="#keys-values-entries" class="headerlink" title="keys() values() entries()"></a>keys() values() entries()</h5><blockquote><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒMap çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚</p></blockquote><pre><code class="javascrpt">const map = new Map([  [&#39;F&#39;, &#39;no&#39;],  [&#39;T&#39;,  &#39;yes&#39;],]);for (let key of map.keys()) {  // éå†key  console.log(key);}// &quot;F&quot;// &quot;T&quot;for (let value of map.values()) { // éå†value  console.log(value);}// &quot;no&quot;// &quot;yes&quot;for (let item of map.entries()) { // éå†Mapæˆå‘˜  console.log(item[0], item[1]);}// &quot;F&quot; &quot;no&quot;// &quot;T&quot; &quot;yes&quot;// æˆ–è€…for (let [key, value] of map.entries()) {  console.log(key, value);}// &quot;F&quot; &quot;no&quot;// &quot;T&quot; &quot;yes&quot;// ç­‰åŒäºä½¿ç”¨map.entries()for (let [key, value] of map) { // Mapé»˜è®¤çš„éå†æ–¹æ³•ï¼ˆSymbol.iteratorå±æ€§ï¼‰å°±æ˜¯entries  console.log(key, value);}// &quot;F&quot; &quot;no&quot;// &quot;T&quot; &quot;yes&quot;</code></pre><h5 id="forEach-1"><a href="#forEach-1" class="headerlink" title="forEach()"></a>forEach()</h5><p>Mapè¿˜æœ‰ä¸€ä¸ªforEachæ–¹æ³•ï¼Œä¸æ•°ç»„çš„forEachæ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å®ç°éå†ã€‚</p><pre><code class="javascript">map.forEach(function(value, key, map) {  console.log(&quot;Key: %s, Value: %s&quot;, key, value)})const reporter = {  report: function(key, value) {    console.log(&quot;Key: %s, Value: %s&quot;, key, value)  }}map.forEach(function(value, key, map) {  this.report(key, value)}, reporter)</code></pre><blockquote><p>forEach()å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥æ”¹å˜thisçš„æŒ‡å‘</p></blockquote><h4 id="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><a href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢" class="headerlink" title="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"></a>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</h4><h5 id="1-Mapè½¬æˆæ•°ç»„"><a href="#1-Mapè½¬æˆæ•°ç»„" class="headerlink" title="1.Mapè½¬æˆæ•°ç»„"></a>1.Mapè½¬æˆæ•°ç»„</h5><p>Map ç»“æ„è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ã€‚</p><pre><code class="javascript">const map = new Map([  [1, &#39;one&#39;],  [2, &#39;two&#39;],  [3, &#39;three&#39;]])[...map.keys()]// [1, 2, 3][...map.values()]// [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;][...map.entries()]// [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]][...map]// [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]]</code></pre><p>ä»è€Œå¯ä»¥ç»“åˆæ•°ç»„çš„mapæ–¹æ³•ã€filteræ–¹æ³•ï¼Œå¯ä»¥å®ç° Map çš„éå†å’Œè¿‡æ»¤ï¼ˆMap æœ¬èº«æ²¡æœ‰mapå’Œfilteræ–¹æ³•ï¼‰ã€‚</p><pre><code class="javascript">const map0 = new Map()  .set(1, &#39;a&#39;)  .set(2, &#39;b&#39;)  .set(3, &#39;c&#39;)const map1 = new Map(  [...map0].filter(([k, v]) =&gt; k &lt; 3) // [k, v]ç»“æ„èµ‹å€¼)// äº§ç”Ÿ Map ç»“æ„ {1 =&gt; &#39;a&#39;, 2 =&gt; &#39;b&#39;}const map2 = new Map(  [...map0].map(([k, v]) =&gt; [k * 2, &#39;_&#39; + v]))// äº§ç”Ÿ Map ç»“æ„ {2 =&gt; &#39;_a&#39;, 4 =&gt; &#39;_b&#39;, 6 =&gt; &#39;_c&#39;}</code></pre><h5 id="2-Mapè½¬ä¸ºå¯¹è±¡"><a href="#2-Mapè½¬ä¸ºå¯¹è±¡" class="headerlink" title="2.Mapè½¬ä¸ºå¯¹è±¡"></a>2.Mapè½¬ä¸ºå¯¹è±¡</h5><pre><code class="javascript">let obj = Object.create(null)const map = new Map([    [&#39;y&#39;,1],[&#39;z&#39;,2],[&#39;h&#39;,3]])map.forEach(function(v,k) {    obj[k] = v})// orfor (let [k,v] of map) {    obj[k] = v}</code></pre><blockquote><p>è¿™æ ·æ— æŸè½¬æ¢çš„å‰ææ˜¯keyéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœæœ‰éå­—ç¬¦ä¸²çš„é”®åï¼Œé‚£ä¹ˆè¿™ä¸ªé”®åä¼šè¢«è½¬æˆå­—ç¬¦ä¸²ï¼Œå†ä½œä¸ºå¯¹è±¡çš„é”®åã€‚</p></blockquote><h5 id="3-å¯¹è±¡è½¬ä¸ºMap"><a href="#3-å¯¹è±¡è½¬ä¸ºMap" class="headerlink" title="3.å¯¹è±¡è½¬ä¸ºMap"></a>3.å¯¹è±¡è½¬ä¸ºMap</h5><pre><code class="javascript">let obj = {&#39;y&#39;: 1, &#39;z&#39;: 2, &#39;h&#39;: 3}const map = new Map()for (let k in obj) {    map.set(i, obj[i])}// orfor (let k of Object.keys(obj)) { //Object.keys(obj) =&gt; [&#39;y&#39;,&#39;z&#39;,&#39;h&#39;]    map.set(i, obj[i])}</code></pre><h5 id="3-Mapè½¬ä¸ºJSON"><a href="#3-Mapè½¬ä¸ºJSON" class="headerlink" title="3.Mapè½¬ä¸ºJSON"></a>3.Mapè½¬ä¸ºJSON</h5><pre><code class="javascript">let obj = Object.create(null)const map = new Map([    [&#39;y&#39;,1],[&#39;z&#39;,2],[&#39;h&#39;,3]])map.forEach(function(v,k) {    obj[k] = v})// orfor (let [k,v] of map) {    obj[k] = v}JSON.stringify(obj) // åœ¨Mapè½¬æ¢æˆå¯¹è±¡çš„åŸºç¡€ä¸ŠJSON.stringify()</code></pre><p>å¦ä¸€ç§æƒ…å†µæ˜¯å½“Mapçš„é”®æ˜¯éå­—ç¬¦ä¸²æ—¶ï¼Œè¿™æ—¶å€™å¯ä»¥é€‰æ‹©è½¬æˆJSONæ•°ç»„</p><pre><code class="javascript">const map = new Map([    [true,1],[{&#39;y&#39;: h},2],[&#39;h&#39;,3]])const arr = [...map] // [[true,1],[{&#39;y&#39;: h},2],[&#39;h&#39;,3]]JSON.stringify(arr)</code></pre><h3 id="5-è§£æ„"><a href="#5-è§£æ„" class="headerlink" title="5.è§£æ„"></a>5.è§£æ„</h3><h4 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h4><p>ES6å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚</p><pre><code class="javascript">// ä»¥å‰èµ‹å€¼let a = 1let b = 2let c = 3// ç”¨è§£æ„èµ‹å€¼let [a,b,c] = [1,2,3]</code></pre><blockquote><p>æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼</p></blockquote><p><strong>å®Œå…¨è§£æ„ï¼š</strong></p><pre><code class="javascript">let [foo, [[bar], baz]] = [1, [[2], 3]]foo // 1bar // 2baz // 3let [ , , third] = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]third // &quot;baz&quot;let [x, , y] = [1, 2, 3]x // 1y // 3let [head, ...tail] = [1, 2, 3, 4]head // 1tail // [2, 3, 4]</code></pre><p><strong>è§£æ„ä¸æˆåŠŸï¼š</strong></p><pre><code class="javascript">let [foo] = []let [bar, foo] = [1]foo // undefinedlet [x, y, ...z] = [&#39;a&#39;]x // &quot;a&quot;y // undefinedz // []</code></pre><p><strong>ä¸å®Œå…¨è§£æ„ï¼š</strong><br>ç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè§£æ„ä¾ç„¶å¯ä»¥æˆåŠŸã€‚</p><pre><code class="javascript">let [x, y] = [1, 2, 3];x // 1y // 2let [a, [b], d] = [1, [2, 3], 4];a // 1b // 2d // 4</code></pre><p><strong>è§£æ„æŠ¥é”™ï¼š</strong><br>å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„æˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚</p><pre><code class="javascript">// æŠ¥é”™let [foo] = 1let [foo] = falselet [foo] = NaNlet [foo] = undefinedlet [foo] = nulllet [foo] = {}</code></pre><blockquote><p>ä¸Šé¢çš„è¯­å¥éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºç­‰å·å³è¾¹çš„å€¼ï¼Œè¦ä¹ˆ<strong>è½¬ä¸ºå¯¹è±¡</strong>ä»¥åä¸å…·å¤‡Iteratoræ¥å£ï¼ˆå‰äº”ä¸ªè¡¨è¾¾å¼ï¼‰ï¼Œè¦ä¹ˆæœ¬èº«å°±ä¸å…·å¤‡Iteratoræ¥å£ï¼ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼‰ã€‚</p></blockquote><p><strong>æœ‰Iteratoræ¥å£æ•°æ®æ ¼å¼çš„ç»“æ„</strong><br>ä¾‹å¦‚Setæ•°æ®ç»“æ„å’ŒGeneratorå‡½æ•°ï¼š</p><pre><code class="javascript">let [x, y, z] = new Set([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])x // &quot;a&quot;// Generatorå‡½æ•°function* fibs() {  let a = 0;  let b = 1;  while (true) {    yield a;    [a, b] = [b, a + b];  }}let [first, second, third, fourth, fifth, sixth] = fibs();sixth // 5</code></pre><blockquote><p>fibsæ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼ŒåŸç”Ÿå…·æœ‰Iteratoræ¥å£ã€‚è§£æ„èµ‹å€¼ä¼šä¾æ¬¡ä»è¿™ä¸ªæ¥å£è·å–å€¼ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/05/20/seccloud_sixth/"/>
      <url>/2018/05/20/seccloud_sixth/</url>
      
        <content type="html"><![CDATA[<h2 id="14-HTTPSåè®®åŠ å¯†æœºåˆ¶"><a href="#14-HTTPSåè®®åŠ å¯†æœºåˆ¶" class="headerlink" title="14.HTTPSåè®®åŠ å¯†æœºåˆ¶"></a>14.HTTPSåè®®åŠ å¯†æœºåˆ¶</h2><h3 id="1-ä¸ºä»€ä¹ˆè¦åŠ å¯†"><a href="#1-ä¸ºä»€ä¹ˆè¦åŠ å¯†" class="headerlink" title="1.ä¸ºä»€ä¹ˆè¦åŠ å¯†"></a>1.ä¸ºä»€ä¹ˆè¦åŠ å¯†</h3><p>å› ä¸ºhttpçš„å†…å®¹æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œæ˜æ–‡æ•°æ®ä¼šç»è¿‡ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€è·¯ç”±å™¨ã€wifiçƒ­ç‚¹ã€é€šä¿¡æœåŠ¡è¿è¥å•†ç­‰å¤šä¸ªç‰©ç†èŠ‚ç‚¹ï¼Œå¦‚æœä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åŠ«æŒï¼Œä¼ è¾“çš„å†…å®¹å°±å®Œå…¨æš´éœ²äº†ï¼Œä»–è¿˜å¯ä»¥ç¯¡æ”¹ä¼ è¾“çš„ä¿¡æ¯ä¸”ä¸è¢«åŒæ–¹å¯Ÿè§‰ï¼Œè¿™å°±æ˜¯ä¸­é—´äººæ”»å‡»ã€‚æ‰€ä»¥æˆ‘ä»¬æ‰éœ€è¦å¯¹ä¿¡æ¯è¿›è¡ŒåŠ å¯†ã€‚æœ€ç®€å•å®¹æ˜“ç†è§£çš„å°±æ˜¯å¯¹ç§°åŠ å¯†ã€‚</p><h3 id="2-åŠ å¯†çš„ç§ç±»"><a href="#2-åŠ å¯†çš„ç§ç±»" class="headerlink" title="2.åŠ å¯†çš„ç§ç±»"></a>2.åŠ å¯†çš„ç§ç±»</h3><h4 id="1-å¯¹ç§°åŠ å¯†"><a href="#1-å¯¹ç§°åŠ å¯†" class="headerlink" title="1.å¯¹ç§°åŠ å¯†"></a>1.å¯¹ç§°åŠ å¯†</h4><p>é€šä¿¡åŒæ–¹å„æŒä¸€ä¸ªç›¸åŒçš„ç§˜é’¥ï¼Œå¯¹é€šä¿¡çš„å†…å®¹åŠ å¯†è§£å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼ä¼˜ç‚¹å°±æ˜¯åŠ å¯†è§£å¯†é€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚<br>ä½†æ˜¯æ€ä¹ˆèƒ½ä¿è¯é€šä¿¡çš„åŒæ–¹éƒ½æ‹¿åˆ°ç›¸åŒçš„ç§˜é’¥è€Œä¸è¢«å…¶ä»–äººæ‹¿åˆ°å‘¢ï¼Œè¿™å°±å¾ˆéš¾äº†= =</p><h4 id="2-éå¯¹ç§°åŠ å¯†"><a href="#2-éå¯¹ç§°åŠ å¯†" class="headerlink" title="2.éå¯¹ç§°åŠ å¯†"></a>2.éå¯¹ç§°åŠ å¯†</h4><p>å°±æ˜¯æœ‰ä¸¤æŠŠç§˜é’¥ï¼Œä¸€æŠŠç§é’¥ï¼Œä¸€æŠŠå…¬é’¥ï¼›ç”¨å…¬é’¥åŠ å¯†çš„å†…å®¹åªèƒ½ç§é’¥è§£å¯†ï¼ŒåŒæ ·ç§é’¥åŠ å¯†çš„å†…å®¹åªèƒ½å…¬é’¥è§£å¯†ã€‚é‰´äºéå¯¹ç§°åŠ å¯†çš„æœºåˆ¶ï¼Œæˆ‘ä»¬ä¼šæœ‰è¿™ç§æ€è·¯ï¼šæœåŠ¡å™¨å…ˆæŠŠå…¬é’¥ç›´æ¥æ˜æ–‡ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œä¹‹åæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ æ•°æ®å‰éƒ½å…ˆç”¨è¿™ä¸ªå…¬é’¥åŠ å¯†å¥½å†ä¼ ï¼Œè¿™æ¡æ•°æ®çš„å®‰å…¨ä¼¼ä¹å¯ä»¥ä¿éšœäº†ï¼å› ä¸ºåªæœ‰æœåŠ¡å™¨æœ‰ç›¸åº”çš„ç§é’¥èƒ½è§£å¼€è¿™æ¡æ•°æ®ã€‚</p><p>ç„¶è€Œç”±æœåŠ¡å™¨åˆ°æµè§ˆå™¨çš„è¿™æ¡è·¯æ€ä¹ˆä¿éšœå®‰å…¨ï¼Ÿå¦‚æœæœåŠ¡å™¨ç”¨å®ƒçš„çš„ç§é’¥åŠ å¯†æ•°æ®ä¼ ç»™æµè§ˆå™¨ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç”¨å…¬é’¥å¯ä»¥è§£å¯†å®ƒï¼Œè€Œè¿™ä¸ªå…¬é’¥æ˜¯ä¸€å¼€å§‹é€šè¿‡æ˜æ–‡ä¼ è¾“ç»™æµè§ˆå™¨çš„ï¼Œè¿™ä¸ªå…¬é’¥è¢«è°åŠ«æŒåˆ°çš„è¯ï¼Œä»–ä¹Ÿèƒ½ç”¨è¯¥å…¬é’¥è§£å¯†æœåŠ¡å™¨ä¼ æ¥çš„ä¿¡æ¯äº†ã€‚æ‰€ä»¥ç›®å‰ä¼¼ä¹åªèƒ½ä¿è¯ç”±æµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“æ•°æ®æ—¶çš„å®‰å…¨æ€§ã€‚  </p><h4 id="3-æ”¹è‰¯ç‰ˆçš„éå¯¹ç§°åŠ å¯†"><a href="#3-æ”¹è‰¯ç‰ˆçš„éå¯¹ç§°åŠ å¯†" class="headerlink" title="3.æ”¹è‰¯ç‰ˆçš„éå¯¹ç§°åŠ å¯†"></a>3.æ”¹è‰¯ç‰ˆçš„éå¯¹ç§°åŠ å¯†</h4><p>æ—¢ç„¶ä¸€å¯¹ç§é’¥ç§˜é’¥èƒ½ä¿è¯ä¸€æ–¹é¢çš„é€šä¿¡å®‰å…¨ï¼Œé‚£ç”¨ä¸¤é˜Ÿå…¬é’¥ç§é’¥å°±èƒ½ä¿è¯äº’ç›¸é€šä¿¡å®‰å…¨äº† : )<br>1.æŸç½‘ç«™æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aâ€™ï¼›æµè§ˆå™¨æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥Bã€ç§é’¥Bâ€™ã€‚<br>2.æµè§ˆå™¨åƒç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜æ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚<br>3.æµè§ˆå™¨æŠŠå…¬é’¥Bæ˜æ–‡ä¼ è¾“ç»™æœåŠ¡å™¨ã€‚<br>4.ä¹‹åæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”¨å…¬é’¥AåŠ å¯†ï¼ŒæœåŠ¡å™¨æ”¶åˆ°åç”¨ç§é’¥Aâ€™è§£å¯†ã€‚ç”±äºåªæœ‰æœåŠ¡å™¨æ‹¥æœ‰è¿™ä¸ªç§é’¥Aâ€™å¯ä»¥è§£å¯†ï¼Œæ‰€ä»¥èƒ½ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚<br>5.æœåŠ¡å™¨å‘æµè§ˆå™¨ä¼ è¾“çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”¨å…¬é’¥BåŠ å¯†ï¼Œæµè§ˆå™¨æ”¶åˆ°åç”¨ç§é’¥Bâ€™è§£å¯†ã€‚åŒä¸Šä¹Ÿå¯ä»¥ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚</p><p>çš„ç¡®å¯ä»¥ï¼æŠ›å¼€è¿™é‡Œé¢ä»æœ‰çš„æ¼æ´ä¸è°ˆï¼ˆä¸‹æ–‡ä¼šè®²ï¼‰ï¼ŒHTTPSçš„åŠ å¯†å´æ²¡ä½¿ç”¨è¿™ç§æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿæœ€ä¸»è¦çš„åŸå› æ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•éå¸¸è€—æ—¶ï¼Œç‰¹åˆ«æ˜¯åŠ å¯†è§£å¯†ä¸€äº›è¾ƒå¤§æ•°æ®çš„æ—¶å€™æœ‰äº›åŠ›ä¸ä»å¿ƒï¼Œè€Œå¯¹ç§°åŠ å¯†å¿«å¾ˆå¤šã€‚</p><h4 id="4-éå¯¹ç§°åŠ å¯†-å¯¹ç§°åŠ å¯†"><a href="#4-éå¯¹ç§°åŠ å¯†-å¯¹ç§°åŠ å¯†" class="headerlink" title="4.éå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†"></a>4.éå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†</h4><p>æ—¢ç„¶éå¯¹ç§°åŠ å¯†è€—æ—¶ï¼Œéå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†ç»“åˆå¯ä»¥å—ï¼Ÿè€Œä¸”å¾—å°½é‡å‡å°‘éå¯¹ç§°åŠ å¯†çš„æ¬¡æ•°ã€‚å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œè€Œä¸”éå¯¹ç§°åŠ å¯†ã€è§£å¯†å„åªéœ€ç”¨ä¸€æ¬¡å³å¯ã€‚<br>1.æŸç½‘ç«™æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aâ€™ã€‚<br>2.æµè§ˆå™¨åƒç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜æ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚<br>3.æµè§ˆå™¨éšæœºç”Ÿæˆä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨å…¬é’¥AåŠ å¯†åä¼ ç»™æœåŠ¡å™¨ã€‚<br>4.æœåŠ¡å™¨æ‹¿åˆ°åç”¨ç§é’¥Aâ€™è§£å¯†å¾—åˆ°å¯†é’¥Xã€‚<br>5.è¿™æ ·åŒæ–¹å°±éƒ½æ‹¥æœ‰å¯†é’¥Xäº†ï¼Œä¸”åˆ«äººæ— æ³•çŸ¥é“å®ƒã€‚ä¹‹ååŒæ–¹æ‰€æœ‰æ•°æ®éƒ½ç”¨å¯†é’¥XåŠ å¯†è§£å¯†ã€‚  </p><p>ä½†æ˜¯ï¼è¿™æ ·ä¼šæœ‰å¦ä¸€ä¸ªé—®é¢˜ï¼Œä¸­é—´äººåŠ«æŒæ›¿æ¢äº†æœåŠ¡å™¨ç»™æµè§ˆå™¨çš„å…¬é’¥Aï¼Œæ¢æˆäº†è‡ªå·±ä¼ªé€ çš„å…¬é’¥Bï¼Œæµè§ˆå™¨ç”Ÿæˆçš„å¯¹ç§°ç§˜é’¥Xç”¨å…¬é’¥BåŠ å¯†åè¢«åŠ«æŒï¼ŒåŠ«æŒè€…ç”¨è‡ªå·±çš„ç§é’¥Bâ€™è§£å¯†å¾—åˆ°ç§˜é’¥Xï¼Œç”¨ä¹‹å‰åŠ«æŒçš„å…¬é’¥AåŠ å¯†åç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå¾—åˆ°ä¸€æ ·çš„ç§˜é’¥Xï¼Œä½†è¿™æ—¶ç§˜é’¥Xå·²ç»æ³„éœ²äº†= =<br>å› æ­¤éœ€è¦ä¸€ä¸ªè¯æ˜ï¼Œè¯æ˜æµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ç¡®å®æ˜¯éœ€è¦é€šä¿¡çš„æœåŠ¡å™¨ç»™çš„ï¼Œç±»ä¼¼äºç°å®ä¸­å¼ ä¸‰å‘æå››è¯æ˜è‡ªå·±æ˜¯å¼ ä¸‰ä¸€æ ·ï¼Œå¼ ä¸‰å¯ä»¥å‡ºå…·è‡ªå·±çš„èº«ä»½è¯ç»™æå››ï¼Œè¯æ˜è‡ªå·±æ˜¯å¼ ä¸‰ï¼›ä½†æ˜¯åˆæœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸æ˜¯å¼ ä¸‰ä½†æˆ‘ä¼ªé€ äº†ä¸€ä¸ªå¼ ä¸‰çš„èº«ä»½è¯ï¼Œæˆ‘å¥½åƒå°±å˜æˆäº†å¼ ä¸‰äº†ï¼›è¿™ä¸ªæ—¶å€™èº«ä»½è¯çš„çœŸä¼ªå°±å¿…é¡»æœ‰ä¸ªæƒå¨æœºæ„æ¥è¯æ˜æ¯”å¦‚å…¬å®‰å±€ï¼Œåœ¨å…¬å®‰å±€è¯æ˜äº†æ‰‹ä¸Šçš„å¼ ä¸‰çš„èº«ä»½è¯æ˜¯çœŸçš„çš„æ—¶å€™ï¼Œä½ å°±æ˜¯å¼ ä¸‰äº†ã€‚å…œäº†ä¸€å¤§åœˆï¼Œç»ˆäºè¯æ˜äº†æˆ‘å°±æ˜¯æˆ‘äº†ã€‚</p><h4 id="5-æ•°å­—è¯ä¹¦ï¼ˆCAè¯ä¹¦ï¼‰"><a href="#5-æ•°å­—è¯ä¹¦ï¼ˆCAè¯ä¹¦ï¼‰" class="headerlink" title="5.æ•°å­—è¯ä¹¦ï¼ˆCAè¯ä¹¦ï¼‰"></a>5.æ•°å­—è¯ä¹¦ï¼ˆCAè¯ä¹¦ï¼‰</h4><p>äº’è”ç½‘ä¸­ï¼ŒCAæœºæ„å°±åƒæ˜¯å…¬å®‰å±€ï¼Œæ•°å­—è¯ä¹¦å°±æ˜¯æœåŠ¡å™¨çš„èº«ä»½è¯ï¼Œè¯ä¹¦é‡ŒåŒ…æ‹¬äº†è¯ä¹¦æŒæœ‰è€…ã€è¯ä¹¦æŒæœ‰è€…çš„å…¬é’¥ç­‰ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æŠŠè¯ä¹¦ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œè¯ä¹¦å°±å¦‚èº«ä»½è¯ä¸€æ ·ï¼Œå¯ä»¥è¯æ˜â€œè¯¥å…¬é’¥å¯¹åº”è¯¥ç½‘ç«™â€ï¼Œæµè§ˆå™¨ä»è¯ä¹¦é‡Œå–å…¬é’¥å°±è¡Œäº†ã€‚<br>ä½†è¯ä¹¦æ˜¯æ˜æ–‡ä¼ é€’çš„ï¼Œå°±åƒä¹‹å‰çš„å…¬é’¥ä¸€æ ·ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªä¸èƒ½ä¼ªé€ çš„æ ‡è®°è¯æ˜CAè¯ä¹¦çš„çœŸå®æ€§ï¼›è¿™é‡Œçš„è§£å†³åŠæ³•å’Œä¸Šé¢çš„tokençš„åšæ³•å·®ä¸å¤šï¼ŒCAè¯ä¹¦é™¤äº†æœ‰ç½‘ç«™çš„ä¿¡æ¯çš„æ˜æ–‡å¤–ï¼Œè¿˜ä¼šé™„å¸¦æœ‰ä¸€ä¸ªç”±CAæœºæ„ç§é’¥åŠ å¯†æ˜æ–‡å†…å®¹çš„ç­¾åï¼Œè¿™ä¸¤è€…å…±åŒç»„æˆäº†æ•°å­—è¯ä¹¦ã€‚<br>æ•°å­—ç­¾åçš„åˆ¶ä½œè¿‡ç¨‹ï¼š<br>1.CAæ‹¥æœ‰éå¯¹ç§°åŠ å¯†çš„ç§é’¥å’Œå…¬é’¥ã€‚<br>2.CAå¯¹è¯ä¹¦æ˜æ–‡ä¿¡æ¯è¿›è¡Œhashã€‚<br>3.å¯¹hashåçš„å€¼ç”¨ç§é’¥åŠ å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾åã€‚  </p><p><img src="./assets/ca.jpg" alt=""></p><p>æµè§ˆå™¨éªŒè¯è¿‡ç¨‹ï¼š<br>1.æ‹¿åˆ°è¯ä¹¦ï¼Œå¾—åˆ°æ˜æ–‡Tï¼Œæ•°å­—ç­¾åSã€‚<br>2.ç”¨CAæœºæ„çš„å…¬é’¥å¯¹Sè§£å¯†ï¼ˆç”±äºæ˜¯æµè§ˆå™¨ä¿¡ä»»çš„æœºæ„ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¿æœ‰å®ƒçš„å…¬é’¥ã€‚è¯¦æƒ…è§ä¸‹æ–‡ï¼‰ï¼Œå¾—åˆ°Sâ€™ã€‚<br>3.ç”¨è¯ä¹¦é‡Œè¯´æ˜çš„hashç®—æ³•å¯¹æ˜æ–‡Tè¿›è¡Œhashå¾—åˆ°Tâ€™ã€‚<br>4.æ¯”è¾ƒSâ€™æ˜¯å¦ç­‰äºTâ€™ï¼Œç­‰äºåˆ™è¡¨æ˜è¯ä¹¦å¯ä¿¡ã€‚</p><blockquote><p>æœ‰ä¸€ç‚¹ï¼ŒCAæœºæ„çš„å…¬é’¥æ˜¯å¦å¯ä¿¡çš„é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨ä¸€èˆ¬ä¼šé¢„è£…ä¸€äº›ä»–ä»¬ä¿¡ä»»çš„CAæœºæ„çš„æ•°å­—è¯ä¹¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸çœ‹åˆ°çš„<strong>æ ¹è¯ä¹¦</strong>ï¼Œæ ¹è¯ä¹¦åˆ™åŒ…å«äº†è¯¥CAæœºæ„çš„å…¬é’¥ï¼Œç”¨äºæµè§ˆå™¨å’Œè¯¥CAæœºæ„ä¿¡ä»»çš„webæœåŠ¡å™¨é€šä¿¡ï¼Œç±»ä¼¼äºä¸€ä¸ªä¿¡ä»»é“¾ï¼Œæµè§ˆå™¨ä¿¡ä»»æ ¹è¯ä¹¦é‡Œçš„å…¬é’¥ï¼Œå‘å¸ƒè¯¥å…¬é’¥çš„CAæœºæ„ä¿¡ä»»å®ƒè®¤è¯çš„webæœåŠ¡å™¨ã€‚</p></blockquote><p>å¦å¤–ï¼Œä¸çŸ¥ä½ ä»¬æ˜¯å¦é‡åˆ°è¿‡ç½‘ç«™è®¿é—®ä¸äº†ã€æç¤ºè¦å®‰è£…è¯ä¹¦çš„æƒ…å†µï¼Ÿè¿™é‡Œå®‰è£…çš„å°±æ˜¯æ ¹è¯ä¹¦ã€‚è¯´æ˜æµè§ˆå™¨ä¸è®¤ç»™è¿™ä¸ªç½‘ç«™é¢å‘è¯ä¹¦çš„æœºæ„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰è¯¥æœºæ„çš„æ ¹è¯ä¹¦ï¼Œä½ å°±å¾—æ‰‹åŠ¨ä¸‹è½½å®‰è£…ï¼ˆé£é™©è‡ªå·±æ‰¿æ‹… : pï¼‰ã€‚å®‰è£…è¯¥æœºæ„çš„æ ¹è¯ä¹¦åï¼Œä½ å°±æœ‰äº†å®ƒçš„å…¬é’¥ï¼Œå°±å¯ä»¥ç”¨å®ƒéªŒè¯æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦æ˜¯å¦å¯ä¿¡äº†ã€‚</p><h4 id="6-HTTPSåè®®çš„ä¼šè¯ä¿æŒ"><a href="#6-HTTPSåè®®çš„ä¼šè¯ä¿æŒ" class="headerlink" title="6.HTTPSåè®®çš„ä¼šè¯ä¿æŒ"></a>6.HTTPSåè®®çš„ä¼šè¯ä¿æŒ</h4><p>çœ‹å®Œä¸Šè¿°åŸºäºHTTPSåè®®åŠ å¯†çš„é€šä¿¡ï¼Œä¼šè§‰å¾—è¿‡ç¨‹å¾ˆç¹çï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚åœ¨SSL/TLSå±‚è¿›è¡Œæ¡æ‰‹é˜¶æ®µï¼Œéƒ½è¦ç»å†ä¸€æ¬¡å¯†é’¥ä¼ è¾“è¿‡ç¨‹ä¼šéå¸¸è€—æ—¶ï¼Œé‚£æ€ä¹ˆè¾¾åˆ°åªä¼ è¾“ä¸€æ¬¡å‘¢ï¼Ÿç”¨sessionå°±è¡Œã€‚<br>æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªæµè§ˆå™¨ï¼ˆæˆ–å®¢æˆ·ç«¯è½¯ä»¶ï¼‰ç»´æŠ¤ä¸€ä¸ªsession IDï¼Œåœ¨TSLæ¡æ‰‹é˜¶æ®µä¼ ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ç”Ÿæˆå¥½å¯†é’¥ä¼ ç»™æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯¥å¯†é’¥å­˜åˆ°ç›¸åº”çš„session IDä¸‹ï¼Œä¹‹åæµè§ˆå™¨æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦session IDï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®session IDæ‰¾åˆ°ç›¸åº”çš„å¯†é’¥å¹¶è¿›è¡Œè§£å¯†åŠ å¯†æ“ä½œï¼Œè¿™æ ·å°±ä¸å¿…è¦æ¯æ¬¡é‡æ–°åˆ¶ä½œã€ä¼ è¾“å¯†é’¥äº†ã€‚</p><p><img src="./assets/ca2.jpg" alt=""></p><blockquote><p>ä¸ç”±å¾—æ„Ÿå¹ä¸€å¥ï¼Œç½‘ç»œå®‰å…¨çœŸçš„å¾ˆéš¾å¾—å•Š = =</p></blockquote><h2 id="15-å…³äºIE9æµè§ˆå™¨CSSæ–‡ä»¶å¤§å°é™åˆ¶é—®é¢˜"><a href="#15-å…³äºIE9æµè§ˆå™¨CSSæ–‡ä»¶å¤§å°é™åˆ¶é—®é¢˜" class="headerlink" title="15.å…³äºIE9æµè§ˆå™¨CSSæ–‡ä»¶å¤§å°é™åˆ¶é—®é¢˜"></a>15.å…³äºIE9æµè§ˆå™¨CSSæ–‡ä»¶å¤§å°é™åˆ¶é—®é¢˜</h2><p>å‰ä¸¤å¤©æ­å®Œæ–°é¡¹ç›®çš„ç¯å¢ƒè·‘åœ¨chromeæµè§ˆå™¨æ˜¯æ­£å¸¸çš„ï¼Œä½†åœ¨IE9é‡Œé¢æ ·å¼å¤±æ•ˆäº†ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯å†™åœ¨vueæ–‡ä»¶ä¸­styleæ ‡ç­¾é‡Œçš„æ ·å¼ä¸èµ·ä½œç”¨ï¼Œä½†åœ¨è¡Œå†…æˆ–æ˜¯å¤–è”çš„CSSæ ·å¼æ˜¯å¯ä»¥çš„= =<br>æ‰¾äº†èµ„æ–™å’Œç ”ç©¶äº†ä¸€å“ˆï¼Œæ ¹æœ¬åŸå› æ˜¯åœ¨IE9é‡Œé¢å•ä¸ªCSSæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡234kbï¼Œè¶…è¿‡çš„éƒ¨åˆ†ä¼šè¢«æµè§ˆå™¨å¿½ç•¥ï¼Œç”±äºé¡¹ç›®æ¡†æ¶å¼•å…¥äº†iviewç»„ä»¶ï¼Œiviewçš„cssæ–‡ä»¶è¾ƒå¤§ï¼Œå› æ­¤å†™åœ¨styleæ ‡ç­¾é‡Œçš„æ ·å¼è¢«å¿½ç•¥äº†ã€‚<br>æ‰€ä»¥å¯ä»¥æŠŠå¼•ç”¨iviewç»„ä»¶çš„cssçš„æ“ä½œä»main.jsè½¬ç§»åˆ°staticé‡Œçš„style.jsæ¥å¼•ç”¨ï¼Œç±»ä¼¼äºå¼•ç”¨common.cssçš„åšæ³•ã€‚  </p><pre><code class="javascript">webpack-server.js // æ‰“åŒ…é…ç½®æ–‡ä»¶entry: {    app: [&quot;webpack-hot-middleware/client&quot;, &quot;babel-polyfill&quot;, &quot;./src/main.js&quot;],    style: [&quot;./static/js/style.js&quot;, &quot;webpack-hot-middleware/client&quot;]  } // å…¥å£æ–‡ä»¶åŠ å…¥äº†style.jsstatic/js/style.js // å¼•å…¥æ ·å¼çš„jsæ–‡ä»¶import &#39;../css/common.css&#39;</code></pre><p>è¿™æ ·åšç¡®å®å¯ä»¥è§£å†³IE9é‡Œé¢cssæ–‡ä»¶è¿‡å¤§å¯¼è‡´æ ·å¼å¤±æ•ˆçš„é—®é¢˜ï¼Œä½†æ˜¯å’Œæˆ‘ä¸€å¼€å§‹æƒ³ç”¨åˆ‡å‰²æ‰“åŒ…åçš„cssæ–‡ä»¶çš„åšæ³•ä¸ä¸€æ ·= = emmmmmmçŒœæƒ³åº”è¯¥æ˜¯æ”¾åœ¨staticæ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶æ‰“åŒ…çš„æ—¶å€™webpackéƒ½ä¼šè‡ªåŠ¨å‹ç¼©ï¼Œæ‰€ä»¥æ–‡ä»¶å¤§å°è¦å°å¾ˆå¤šã€‚</p><h2 id="16-è®¡ç®—æœºç½‘ç»œå°ç»“"><a href="#16-è®¡ç®—æœºç½‘ç»œå°ç»“" class="headerlink" title="16.è®¡ç®—æœºç½‘ç»œå°ç»“"></a>16.è®¡ç®—æœºç½‘ç»œå°ç»“</h2><p>ç»è¿‡ä¸€ç³»åˆ—ç¥å¥‡çš„äº‹æƒ…ï¼Œæˆ‘åˆæ¥æ›´æ–°ä¸€ä¸‹æœ€è¿‘çš„æ„Ÿè§¦ : ) ä½œä¸ºå‰ç«¯è¿˜æ˜¯éœ€è¦çŸ¥é“å…³äºè®¡ç®—æœºç½‘ç»œçš„ä¸€äº›åè®®çš„ï¼Œç—›å¿ƒç–¾é¦–å•ŠT T</p><h3 id="1-è®¡ç®—æœºç½‘ç»œåè®®æ¶æ„"><a href="#1-è®¡ç®—æœºç½‘ç»œåè®®æ¶æ„" class="headerlink" title="1.è®¡ç®—æœºç½‘ç»œåè®®æ¶æ„"></a>1.è®¡ç®—æœºç½‘ç»œåè®®æ¶æ„</h3><p>OSIï¼ˆOpen System Interconnectï¼‰å¼€æ”¾å¼ç³»ç»Ÿäº’è”ï¼Œä¸€èˆ¬éƒ½å«OSIå‚è€ƒæ¨¡å‹ï¼Œæ˜¯ISOï¼ˆå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼‰ç»„ç»‡åœ¨1985å¹´ç ”ç©¶çš„ç½‘ç»œäº’è”æ¨¡å‹ã€‚<br>æœ€æ—©çš„æ—¶å€™ç½‘ç»œåˆšåˆšå‡ºç°çš„æ—¶å€™ï¼Œå¾ˆå¤šå¤§å‹çš„å…¬å¸éƒ½æ‹¥æœ‰äº†ç½‘ç»œæŠ€æœ¯ï¼Œå…¬å¸å†…éƒ¨è®¡ç®—æœºå¯ä»¥ç›¸äº’è¿æ¥ã€‚å¯ä»¥å´ä¸èƒ½ä¸å…¶å®ƒå…¬å¸è¿æ¥ã€‚å› ä¸ºæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„è§„èŒƒã€‚è®¡ç®—æœºä¹‹é—´ç›¸äº’ä¼ è¾“çš„ä¿¡æ¯å¯¹æ–¹ä¸èƒ½ç†è§£ã€‚æ‰€ä»¥ä¸èƒ½äº’è”ã€‚<br>ISOä¸ºäº†æ›´å¥½çš„ä½¿ç½‘ç»œåº”ç”¨æ›´ä¸ºæ™®åŠï¼Œå°±æ¨å‡ºäº†OSIå‚è€ƒæ¨¡å‹ã€‚å…¶å«ä¹‰å°±æ˜¯æ¨èæ‰€æœ‰å…¬å¸ä½¿ç”¨è¿™ä¸ªè§„èŒƒæ¥æ§åˆ¶ç½‘ç»œã€‚è¿™æ ·æ‰€æœ‰å…¬å¸éƒ½æœ‰ç›¸åŒçš„è§„èŒƒï¼Œå°±èƒ½äº’è”äº†ã€‚  </p><p>ä¸åŒåè®®åœ¨æœ€åˆOSIæ¨¡å‹ä¸­çš„ä½ç½®ï¼š  </p><table><thead><tr><th align="center">7</th><th align="left">åº”ç”¨å±‚</th><th align="left">ä¾‹å¦‚HTTPã€SMTPã€SNMPã€FTPã€Telnetã€SIPã€SSHã€NFSã€RTSPã€XMPPã€Whoisã€ENRP</th></tr></thead><tbody><tr><td align="center">6</td><td align="left">è¡¨ç¤ºå±‚</td><td align="left">ä¾‹å¦‚XDRã€ASN.1ã€SMBã€AFPã€NCP</td></tr><tr><td align="center">5</td><td align="left">ä¼šè¯å±‚</td><td align="left">ä¾‹å¦‚ASAPã€TLSã€SSHã€ISO 8327 / CCITT X.225ã€RPCã€NetBIOSã€ASPã€Winsockã€BSD sockets</td></tr><tr><td align="center">4</td><td align="left">ä¼ è¾“å±‚</td><td align="left">ä¾‹å¦‚TCPã€UDPã€RTPã€SCTPã€SPXã€ATPã€IL</td></tr><tr><td align="center">3</td><td align="left">ç½‘ç»œå±‚</td><td align="left">ä¾‹å¦‚IPã€ICMPã€IGMPã€IPXã€BGPã€OSPFã€RIPã€IGRPã€EIGRPã€ARPã€RARPã€ X.25</td></tr><tr><td align="center">2</td><td align="left">é“¾è·¯å±‚</td><td align="left">ä¾‹å¦‚ä»¥å¤ªç½‘ã€ä»¤ç‰Œç¯ã€HDLCã€å¸§ä¸­ç»§ã€ISDNã€ATMã€IEEE 802.11ã€FDDIã€PPP</td></tr><tr><td align="center">1</td><td align="left">ç‰©ç†å±‚</td><td align="left">ä¾‹å¦‚çº¿è·¯ã€æ— çº¿ç”µã€å…‰çº¤ã€ä¿¡é¸½</td></tr></tbody></table><p>ç¬¬7å±‚åº”ç”¨å±‚â€”ç›´æ¥å¯¹åº”ç”¨ç¨‹åºæä¾›æœåŠ¡ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å˜åŒ–ï¼Œä½†è¦åŒ…æ‹¬ç”µå­æ¶ˆæ¯ä¼ è¾“ï¼›<br>ç¬¬6å±‚è¡¨ç¤ºå±‚â€”æ ¼å¼åŒ–æ•°æ®ï¼Œä»¥ä¾¿ä¸ºåº”ç”¨ç¨‹åºæä¾›é€šç”¨æ¥å£ã€‚è¿™å¯ä»¥åŒ…æ‹¬åŠ å¯†æœåŠ¡ï¼›<br>ç¬¬5å±‚ä¼šè¯å±‚â€”åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å»ºç«‹ç«¯è¿æ¥ã€‚æ­¤æœåŠ¡åŒ…æ‹¬å»ºç«‹è¿æ¥æ˜¯ä»¥å…¨åŒå·¥è¿˜æ˜¯ä»¥åŠåŒå·¥çš„æ–¹å¼è¿›è¡Œè®¾ç½®ï¼Œå°½ç®¡å¯ä»¥åœ¨å±‚4ä¸­å¤„ç†åŒå·¥æ–¹å¼ï¼›<br>ç¬¬4å±‚ä¼ è¾“å±‚â€”å¸¸è§„æ•°æ®é€’é€ï¼é¢å‘è¿æ¥æˆ–æ— è¿æ¥ã€‚åŒ…æ‹¬å…¨åŒå·¥æˆ–åŠåŒå·¥ã€æµæ§åˆ¶å’Œé”™è¯¯æ¢å¤æœåŠ¡ï¼›<br>ç¬¬3å±‚ç½‘ç»œå±‚â€”æœ¬å±‚é€šè¿‡å¯»å€æ¥å»ºç«‹ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥ï¼Œå®ƒåŒ…æ‹¬é€šè¿‡äº’è¿ç½‘ç»œæ¥è·¯ç”±å’Œä¸­ç»§æ•°æ®ï¼›<br>ç¬¬2å±‚æ•°æ®é“¾è·¯å±‚â€”åœ¨æ­¤å±‚å°†æ•°æ®åˆ†å¸§ï¼Œå¹¶å¤„ç†æµæ§åˆ¶ã€‚æœ¬å±‚æŒ‡å®šæ‹“æ‰‘ç»“æ„å¹¶æä¾›ç¡¬ä»¶å¯»å€ï¼›<br>ç¬¬1å±‚ç‰©ç†å±‚â€”åŸå§‹æ¯”ç‰¹æµçš„ä¼ è¾“ï¼Œç”µå­ä¿¡å·ä¼ è¾“å’Œç¡¬ä»¶æ¥å£æ•°æ®å‘é€æ—¶ï¼Œä»ç¬¬ä¸ƒå±‚ä¼ åˆ°ç¬¬ä¸€å±‚ï¼Œæ¥å—æ–¹åˆ™ç›¸åã€‚  </p><blockquote><p>ä¸Šä¸‰å±‚æ€»ç§°åº”ç”¨å±‚ï¼Œç”¨æ¥æ§åˆ¶è½¯ä»¶æ–¹é¢ï¼›ä¸‹å››å±‚æ€»ç§°æ•°æ®æµå±‚ï¼Œç”¨æ¥ç®¡ç†ç¡¬ä»¶ï¼Œæ•°æ®åœ¨å‘è‡³æ•°æ®æµå±‚çš„æ—¶å€™å°†è¢«æ‹†åˆ†ã€‚æ ¹æ®PDU ï¼ˆåè®®æ•°æ®å•å…ƒï¼‰ï¼šåœ¨ä¼ è¾“å±‚çš„æ•°æ®å«æ®µï¼ˆsegmentï¼‰ï¼Œç½‘ç»œå±‚å«åŒ…ï¼ˆpacketï¼‰ï¼Œæ•°æ®é“¾è·¯å±‚å«å¸§ï¼ˆframeï¼‰ï¼Œç‰©ç†å±‚å«æ¯”ç‰¹æµï¼ˆbitï¼‰ï¼Œå…¶ä»–æ›´é«˜å±‚æ¬¡çš„æ•°æ®åˆ™æ˜¯æŠ¥æ–‡ï¼ˆmessageï¼‰</p></blockquote><p>OSIä¸­æ¯ä¸€å±‚éƒ½æœ‰æ¯ä¸€å±‚çš„ä½œç”¨ã€‚æ¯”å¦‚ç½‘ç»œå±‚å°±è¦ç®¡ç†æœ¬æœºçš„IPçš„ç›®çš„åœ°çš„IPã€‚æ•°æ®é“¾è·¯å±‚å°±è¦ç®¡ç†MACåœ°å€ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰ç­‰ç­‰ï¼Œæ‰€ä»¥åœ¨æ¯å±‚æ‹†åˆ†æ•°æ®åè¦è¿›è¡Œå°è£…ï¼Œä»¥å®Œæˆæ¥å—æ–¹ä¸æœ¬æœºç›¸äº’è”ç³»é€šä¿¡çš„ä½œç”¨ã€‚  </p><h3 id="2-ä¸‹å±‚åè®®"><a href="#2-ä¸‹å±‚åè®®" class="headerlink" title="2.ä¸‹å±‚åè®®"></a>2.ä¸‹å±‚åè®®</h3><p>äº’è”ç½‘æ˜¯ç”±ä¸€æ•´å¥—åè®®æ„æˆçš„ï¼Œè§„å®šäº†åœ¨ä¸åŒé€šä¿¡å±‚çš„è¦æ±‚ã€‚</p><h4 id="1-Ethernetï¼ˆä»¥å¤ªç½‘ï¼‰"><a href="#1-Ethernetï¼ˆä»¥å¤ªç½‘ï¼‰" class="headerlink" title="1.Ethernetï¼ˆä»¥å¤ªç½‘ï¼‰"></a>1.Ethernetï¼ˆä»¥å¤ªç½‘ï¼‰</h4><p>äº’è”ç½‘ä¸­æœ€åº•å±‚çš„æ˜¯ä»¥å¤ªç½‘åè®®ï¼Œå®ƒè§„å®šäº†ç”µå­ä¿¡å·å¦‚ä½•ç»„æˆæ•°æ®åŒ…ï¼ˆpacketï¼‰ï¼Œè§£å†³äº†å­ç½‘å†…éƒ¨çš„ç‚¹å¯¹ç‚¹é€šä¿¡ã€‚</p><h4 id="2-IPåè®®"><a href="#2-IPåè®®" class="headerlink" title="2.IPåè®®"></a>2.IPåè®®</h4><p>ä¸Šé¢çš„ä»¥å¤ªç½‘åè®®å¯ä»¥è§£å†³ä¸€ä¸ªå±€åŸŸç½‘å†…çš„ç‚¹å¯¹ç‚¹é€šä¿¡ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³ä¸åŒå±€åŸŸç½‘ä¹‹é—´çš„é€šä¿¡ï¼ŒIPåè®®å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µã€‚  </p><p><img src="./assets/ip_protocol.jpg" alt="">  </p><blockquote><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒIPåè®®å¯ä»¥è¿æ¥å¤šä¸ªå±€åŸŸç½‘  </p></blockquote><p>IPåè®®å®šä¹‰äº†ä¸€å¥—è‡ªå·±çš„åœ°å€è§„åˆ™ï¼Œç§°ä¸ºIPåœ°å€ã€‚å®ƒå®ç°äº†è·¯ç”±åŠŸèƒ½ï¼Œå…è®¸æŸä¸ªå±€åŸŸç½‘çš„Aä¸»æœºå‘å¦ä¸€ä¸ªå±€åŸŸç½‘çš„Bä¸»æœºå‘é€æ¶ˆæ¯ã€‚<br>æˆ‘ä»¬ä¹°çš„è·¯ç”±å™¨å°±æ˜¯åŸºäºIPåè®®ï¼Œå±€åŸŸç½‘ä¹‹é—´éœ€è¦é è·¯ç”±å™¨è¿æ¥ï¼›è·¯ç”±å™¨èƒŒéƒ¨æœ‰å¾ˆå¤šç½‘å£ï¼Œå…¶å†…éƒ¨æœ‰ä¸€å¼ è·¯ç”±è¡¨ï¼Œè§„å®šäº†Aæ®µIPåœ°å€çš„å‡ºå£aï¼ŒBæ®µIPåœ°å€çš„å‡ºå£bâ€¦â€¦é€šè¿‡è¿™å¥—â€œæŒ‡è·¯ç‰Œâ€å®ç°äº†æ•°æ®åŒ…çš„è½¬å‘ã€‚  </p><p><img src="./assets/ip_table.jpg" alt="">  </p><blockquote><p>è¿™å¼ è·¯ç”±è¡¨æ³¨æ˜äº†ä¸åŒIPæ®µç›®çš„åœ°çš„æ•°æ®åŒ…ï¼Œè¦å‘é€åˆ°å“ªä¸ªç«¯å£ï¼ˆinterfaceï¼‰  </p></blockquote><p>IPåè®®åªæ˜¯ä¸€ä¸ªåœ°å€åè®®ï¼Œå¹¶ä¸ä¿è¯æ•°æ®åŒ…çš„å®Œæ•´ï¼Œå¦‚æœè·¯ç”±å™¨ä¸¢åŒ…ï¼ˆè·¯ç”±å™¨å†…å­˜æ»¡äº†ï¼Œæ–°è¿›æ¥çš„æ•°æ®åŒ…å°±ä¼šä¸¢å¤±ï¼‰ï¼Œå°±éœ€è¦å‘ç°å“ªä¸€ä¸ªæ•°æ®åŒ…ä¸¢å¤±ï¼Œä»¥åŠé‡æ–°è¡¥å‘è¿™ä¸ªæ•°æ®åŒ…ã€‚è¿™å°±éœ€è¦ä¾é TCPåè®®äº†ã€‚<br><strong>ç®€å•æ¥è¯´ï¼ŒTCPåè®®çš„ä½œç”¨å°±æ˜¯ä¿è¯æ•°æ®é€šä¿¡çš„å®Œæ•´æ€§å’Œå¯é æ€§ï¼Œé˜²æ­¢ä¸¢åŒ…ã€‚</strong></p><h4 id="3-TCPåè®®"><a href="#3-TCPåè®®" class="headerlink" title="3.TCPåè®®"></a>3.TCPåè®®</h4><h5 id="1-æ•°æ®åŒ…å¤§å°"><a href="#1-æ•°æ®åŒ…å¤§å°" class="headerlink" title="1.æ•°æ®åŒ…å¤§å°"></a>1.æ•°æ®åŒ…å¤§å°</h5><p>ä»¥å¤ªç½‘æ•°æ®åŒ…ï¼ˆpacketï¼‰å¤§å°æ˜¯å›ºå®šçš„ï¼Œæœ€åˆæ˜¯1518ä¸ªå­—èŠ‚ï¼Œåæ¥å¢åŠ åˆ°1522ä¸ªå­—èŠ‚ã€‚å…¶ä¸­1500ä¸ªå­—èŠ‚æ˜¯è´Ÿè½½ï¼ˆpayloadï¼‰ï¼Œ22ä¸ªå­—èŠ‚æ˜¯å¤´ä¿¡æ¯ï¼ˆheadï¼‰ã€‚<br>IPæ•°æ®åŒ…åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…çš„è´Ÿè½½é‡Œï¼Œä¹Ÿæœ‰è‡ªå·±çš„å¤´ä¿¡æ¯ï¼Œæœ€å°‘éœ€è¦20å­—èŠ‚ï¼Œæ‰€ä»¥IPæ•°æ®åŒ…çš„è´Ÿè½½æœ€å¤šæ˜¯1480ä¸ªå­—èŠ‚ã€‚  </p><p><img src="./assets/packetsize.png" alt="">  </p><blockquote><p>IPæ•°æ®åŒ…åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…è´Ÿè½½é‡Œï¼ŒTCPæ•°æ®åŒ…åœ¨IPæ•°æ®åŒ…è´Ÿè½½é‡Œ  </p></blockquote><p>TCPæ•°æ®åŒ…åœ¨IPæ•°æ®åŒ…çš„è´Ÿè½½é‡Œï¼Œå®ƒçš„å¤´ä¿¡æ¯æœ€å°‘ä¹Ÿéœ€è¦20ä¸ªå­—èŠ‚ï¼Œå› æ­¤TCPæ•°æ®åŒ…çš„æœ€å¤§è´Ÿè·æ˜¯1460ä¸ªå­—èŠ‚ã€‚ç”±äºIPåè®®å’ŒTCPåè®®å¾€å¾€æœ‰é¢å¤–çš„å¤´ä¿¡æ¯ï¼Œæ‰€ä»¥å®é™…çš„TCPæ•°æ®åŒ…å¤§æ¦‚æ˜¯1400ä¸ªå­—èŠ‚ã€‚  </p><p><img src="./assets/packet_simple.png" alt=""></p><h5 id="2-TCPæ•°æ®åŒ…ç¼–å·ï¼ˆSEQï¼‰"><a href="#2-TCPæ•°æ®åŒ…ç¼–å·ï¼ˆSEQï¼‰" class="headerlink" title="2.TCPæ•°æ®åŒ…ç¼–å·ï¼ˆSEQï¼‰"></a>2.TCPæ•°æ®åŒ…ç¼–å·ï¼ˆSEQï¼‰</h5><p>ä¸€ä¸ªåŒ…1400å­—èŠ‚ï¼Œé‚£ä¹ˆä¸€æ¬¡æ€§å‘é€å¤§é‡æ•°æ®ï¼Œå°±å¿…é¡»åˆ†æˆå¤šä¸ªåŒ…ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ª10MBçš„æ–‡ä»¶ï¼Œéœ€è¦å‘é€7100å¤šä¸ªåŒ…ã€‚<br>å‘é€çš„æ—¶å€™ï¼ŒTCPåè®®ä¸ºæ¯ä¸ªåŒ…ç¼–å·ï¼ˆsequence numberï¼Œç®€ç§°SEQï¼‰ï¼Œä»¥ä¾¿æ¥æ”¶çš„ä¸€æ–¹æŒ‰ç…§é¡ºåºè¿˜åŸã€‚ä¸‡ä¸€å‘ç”Ÿä¸¢åŒ…ï¼Œä¹Ÿå¯ä»¥çŸ¥é“ä¸¢å¤±çš„æ˜¯å“ªä¸€ä¸ªåŒ…ã€‚<br>ä¾‹å¦‚ç¬¬ä¸€ä¸ªåŒ…çš„ç¼–å·æ˜¯ä¸€ä¸ªéšæœºæ•°ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œè¿™é‡Œå°±æŠŠå®ƒç§°ä¸º1å·åŒ…ã€‚å‡å®šè¿™ä¸ªåŒ…çš„è´Ÿè½½é•¿åº¦æ˜¯100å­—èŠ‚ï¼Œé‚£ä¹ˆå¯ä»¥æ¨ç®—å‡ºä¸‹ä¸€ä¸ªåŒ…çš„ç¼–å·åº”è¯¥æ˜¯101ã€‚è¿™å°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ•°æ®åŒ…éƒ½å¯ä»¥å¾—åˆ°ä¸¤ä¸ªç¼–å·ï¼šè‡ªèº«çš„ç¼–å·ï¼Œä»¥åŠä¸‹ä¸€ä¸ªåŒ…çš„ç¼–å·ã€‚æ¥æ”¶æ–¹ç”±æ­¤çŸ¥é“ï¼Œåº”è¯¥æŒ‰ç…§ä»€ä¹ˆé¡ºåºå°†å®ƒä»¬è¿˜åŸæˆåŸå§‹æ–‡ä»¶ã€‚  </p><p><img src="./assets/tcp_length.png" alt="">  </p><blockquote><p>å½“å‰åŒ…çš„ç¼–å·æ˜¯45943ï¼Œä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„ç¼–å·æ˜¯46183ï¼Œç”±æ­¤å¯çŸ¥ï¼Œè¿™ä¸ªåŒ…çš„è´Ÿè½½æ˜¯240å­—èŠ‚ã€‚</p></blockquote><h5 id="3-TCPæ•°æ®åŒ…çš„ç»„è£…"><a href="#3-TCPæ•°æ®åŒ…çš„ç»„è£…" class="headerlink" title="3.TCPæ•°æ®åŒ…çš„ç»„è£…"></a>3.TCPæ•°æ®åŒ…çš„ç»„è£…</h5><p>æ”¶åˆ°TCPæ•°æ®åŒ…ä»¥åï¼Œç»„è£…è¿˜åŸæ˜¯æ“ä½œç³»ç»Ÿå®Œæˆçš„ã€‚åº”ç”¨ç¨‹åºä¸ä¼šç›´æ¥å¤„ç†TCPæ•°æ®åŒ…ã€‚å¯¹äºåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä¸ç”¨å…³å¿ƒæ•°æ®é€šä¿¡çš„ç»†èŠ‚ã€‚é™¤éçº¿è·¯å¼‚å¸¸ï¼Œé™¤æ­¤ä¹‹å¤–æ”¶åˆ°çš„æ€»æ˜¯å®Œæ•´çš„æ•°æ®ã€‚åº”ç”¨ç¨‹åºéœ€è¦çš„æ•°æ®æ”¾åœ¨TCPæ•°æ®åŒ…é‡Œé¢ï¼Œä½†<strong>è¦æŠŠTCPæ•°æ®å˜æˆåº”ç”¨å±‚å¯è¯†åˆ«çš„æ•°æ®</strong>ï¼Œå°±è¦æœ‰è‡ªå·±çš„æ ¼å¼ï¼ˆæ¯”å¦‚HTTPåè®®ï¼‰ã€‚  </p><p>TCPå¹¶æ²¡æœ‰æä¾›ä»»ä½•æœºåˆ¶ï¼Œè¡¨ç¤ºåŸå§‹æ–‡ä»¶çš„å¤§å°ï¼Œè¿™ç”±åº”ç”¨å±‚çš„åè®®æ¥è§„å®šã€‚æ¯”å¦‚ï¼ŒHTTPåè®®å°±æœ‰ä¸€ä¸ªå¤´ä¿¡æ¯Content-Lengthï¼Œè¡¨ç¤ºä¿¡æ¯ä½“çš„å¤§å°ã€‚å¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå°±æ˜¯æŒç»­åœ°æ¥æ”¶TCPæ•°æ®åŒ…ï¼Œå°†å®ƒä»¬æŒ‰ç…§é¡ºåºç»„è£…å¥½ï¼Œä¸€ä¸ªåŒ…éƒ½ä¸å°‘ã€‚æ“ä½œç³»ç»Ÿä¸ä¼šå»å¤„ç†TCPæ•°æ®åŒ…é‡Œé¢çš„æ•°æ®ã€‚ä¸€æ—¦ç»„è£…å¥½TCPæ•°æ®åŒ…ï¼Œå°±æŠŠå®ƒä»¬è½¬äº¤ç»™åº”ç”¨ç¨‹åºã€‚TCPæ•°æ®åŒ…é‡Œé¢æœ‰ä¸€ä¸ªç«¯å£ï¼ˆportï¼‰å‚æ•°ï¼Œå°±æ˜¯ç”¨æ¥æŒ‡å®šè½¬äº¤ç»™ç›‘å¬è¯¥ç«¯å£çš„åº”ç”¨ç¨‹åºã€‚åº”ç”¨ç¨‹åºæ”¶åˆ°ç»„è£…å¥½çš„åŸå§‹æ•°æ®ï¼Œä»¥æµè§ˆå™¨ä¸ºä¾‹ï¼Œå°±ä¼šæ ¹æ®HTTPåè®®çš„Content-Lengthå­—æ®µæ­£ç¡®è¯»å‡ºä¸€æ®µæ®µçš„æ•°æ®ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œä¸€æ¬¡TCPé€šä¿¡å¯ä»¥åŒ…æ‹¬å¤šä¸ªHTTPé€šä¿¡ã€‚</p><h5 id="4-å‘é€çª—å£"><a href="#4-å‘é€çª—å£" class="headerlink" title="4.å‘é€çª—å£"></a>4.å‘é€çª—å£</h5><p>æ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸¤ä¸ªTCPæ•°æ®åŒ…ï¼Œå°±è¦å‘é€ä¸€ä¸ªç¡®è®¤æ¶ˆæ¯ã€‚â€œç¡®è®¤â€çš„è‹±è¯­æ˜¯ acknowledgementï¼Œæ‰€ä»¥è¿™ä¸ªç¡®è®¤æ¶ˆæ¯å°±ç®€ç§°ACKã€‚</p><blockquote><p>ACK æºå¸¦ä¸¤ä¸ªä¿¡æ¯ï¼š</p><blockquote><p>1.æœŸå¾…è¦æ”¶åˆ°ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„ç¼–å·<br>2.æ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£çš„å‰©ä½™å®¹é‡  </p></blockquote></blockquote><p>å‘é€æ–¹æœ‰äº†è¿™ä¸¤ä¸ªä¿¡æ¯ï¼Œå†åŠ ä¸Šè‡ªå·±å·²ç»å‘å‡ºçš„æ•°æ®åŒ…çš„æœ€æ–°ç¼–å·ï¼Œå°±ä¼šæ¨æµ‹å‡ºæ¥æ”¶æ–¹å¤§æ¦‚çš„æ¥æ”¶é€Ÿåº¦ï¼Œä»è€Œé™ä½æˆ–å¢åŠ å‘é€é€Ÿç‡ã€‚è¿™è¢«ç§°ä¸ºâ€œå‘é€çª—å£â€ï¼Œè¿™ä¸ªçª—å£çš„å¤§å°æ˜¯å¯å˜çš„ã€‚  </p><p><img src="./assets/seq_ack.png" alt="">  </p><p>ä¸Šå›¾çš„ä¼ è¾“æ­¥éª¤ï¼š<br>clientï¼šæˆ‘æƒ³è¦ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„ç¼–å·æ˜¯1ï¼Œé•¿åº¦æ˜¯360ä¸ªå­—èŠ‚  </p><p>serverï¼šæ•°æ®ç»™ä½ ï¼Œä¸‹ä¸ªæ•°æ®åŒ…çš„ç¼–å·æ˜¯361ï¼Œæˆ‘çš„å‘é€çª—å£æœ€å¤§æ˜¯120bytes  </p><p>clientï¼šæˆ‘æƒ³è¦ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ç¼–å·æ˜¯361ï¼Œé•¿åº¦æ˜¯120ä¸ªå­—èŠ‚ï¼ˆæŒ‰ç…§ä½ çš„è¦æœ€å¤§é™åº¦ï¼‰  </p><p>serverï¼šæ•°æ®ç»™ä½ ï¼Œä¸‹ä¸ªæ•°æ®åŒ…çš„ç¼–å·æ˜¯481ï¼Œæˆ‘çš„å‘é€çª—å£æœ€å¤§æ˜¯120bytes  </p><p>â€¦  </p><blockquote><p>æˆ‘è‡ªå·±æ€»ç»“äº†ä¸€ä¸‹SEQå’ŒACKçš„å«ä¹‰ï¼š<br><strong>SEQæ˜¯æˆ‘è¿™æ¬¡è¦ä»å“ªä¸ªç¼–å·å¼€å§‹è¦æ•°æ®ï¼›ACKæ˜¯æˆ‘ä¸‹æ¬¡è¦ä»å“ªä¸ªç¼–å·å¼€å§‹ç»™æ•°æ®</strong></p></blockquote><h5 id="5-æ•°æ®åŒ…ä¸¢å¤±å¤„ç†"><a href="#5-æ•°æ®åŒ…ä¸¢å¤±å¤„ç†" class="headerlink" title="5.æ•°æ®åŒ…ä¸¢å¤±å¤„ç†"></a>5.æ•°æ®åŒ…ä¸¢å¤±å¤„ç†</h5><p>TCPåè®®å¯ä»¥ä¿è¯æ•°æ®é€šä¿¡çš„å®Œæ•´æ€§ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ<br>å‰é¢è¯´è¿‡ï¼Œæ¯ä¸€ä¸ªæ•°æ®åŒ…éƒ½å¸¦æœ‰ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„ç¼–å·ã€‚å¦‚æœä¸‹ä¸€ä¸ªæ•°æ®åŒ…æ²¡æœ‰æ”¶åˆ°ï¼Œé‚£ä¹ˆACKçš„ç¼–å·å°±ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚  </p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œç°åœ¨æ”¶åˆ°äº†4å·åŒ…ï¼Œä½†æ˜¯æ²¡æœ‰æ”¶åˆ°5å·åŒ…ã€‚ACKå°±ä¼šè®°å½•ï¼ŒæœŸå¾…æ”¶åˆ°5å·åŒ…ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œ5å·åŒ…æ”¶åˆ°äº†ï¼Œé‚£ä¹ˆä¸‹ä¸€è½®ACKä¼šæ›´æ–°ç¼–å·ã€‚å¦‚æœ5å·åŒ…è¿˜æ˜¯æ²¡æ”¶åˆ°ï¼Œä½†æ˜¯æ”¶åˆ°äº†6å·åŒ…æˆ–7å·åŒ…ï¼Œé‚£ä¹ˆACKé‡Œé¢çš„ç¼–å·ä¸ä¼šå˜åŒ–ï¼Œæ€»æ˜¯æ˜¾ç¤º5å·åŒ…ã€‚è¿™ä¼šå¯¼è‡´å¤§é‡é‡å¤å†…å®¹çš„ACKã€‚<br>å¦‚æœå‘é€æ–¹å‘ç°æ”¶åˆ°ä¸‰ä¸ªè¿ç»­çš„é‡å¤ACKï¼Œæˆ–è€…è¶…æ—¶äº†è¿˜æ²¡æœ‰æ”¶åˆ°ä»»ä½•ACKï¼Œå°±ä¼šç¡®è®¤ä¸¢åŒ…ï¼Œå³5å·åŒ…é—å¤±äº†ï¼Œä»è€Œå†æ¬¡å‘é€è¿™ä¸ªåŒ…ã€‚é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒTCPä¿è¯äº†ä¸ä¼šæœ‰æ•°æ®åŒ…ä¸¢å¤±ã€‚  </p><p><img src="./assets/tcp_lost.png" alt="">  </p><blockquote><p>hostBæ²¡æœ‰æ”¶åˆ°100-120è¿™æ®µç¼–å·çš„æ•°æ®åŒ…ï¼Œä¼šé‡å¤å‘ACK=100ï¼Œè§¦å‘hostAé‡å‘æ•°æ®åŒ…</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/05/08/seccloud_second/"/>
      <url>/2018/05/08/seccloud_second/</url>
      
        <content type="html"><![CDATA[<h2 id="6-é¡¹ç›®ç»“æ„"><a href="#6-é¡¹ç›®ç»“æ„" class="headerlink" title="6.é¡¹ç›®ç»“æ„"></a>6.é¡¹ç›®ç»“æ„</h2><p>è¿™éƒ¨åˆ†åº”è¯¥æ˜¯åœ¨åˆšå¼€å§‹å†™çš„ï¼Œä½†å¿˜äº†= =ï¼Œç°åœ¨è¡¥ä¸Šå§ã€‚<br>åœ¨è¯´è¿™æ¬¡é¡¹ç›®ä¹‹å‰å…ˆè¯´åŸºäºvue-cliæ­å»ºçš„é¡¹ç›®ç»“æ„å„ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼Œæˆ‘å°±ä»csdnä¸Šæ‰¾äº†ç¯‡æ–‡ç« ï¼ˆ<a href="https://blog.csdn.net/qq_34543438/article/details/72868546?locationNum=3&fps=1" target="_blank" rel="noopener">ç‚¹å‡»æ­¤å¤„</a>ï¼‰ã€‚å…‰çœ‹è¿™äº›ä¸ªæ¦‚å¿µå¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œç»“åˆè¿™æ¬¡é¡¹ç›®æˆ‘ç”¨è‡ªå·±çš„ç†è§£è§£é‡Šä¸€ä¸‹ï¼›è¿™æ¬¡ç”¨çš„æ˜¯åµŒå¥—æ˜¾ç¤ºï¼Œä¸»è¦é€šè¿‡è·¯ç”±é‡Œçš„childrenå±æ€§è®¾ç½®ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p><h3 id="1-å…¥å£htmlæ–‡ä»¶ï¼ˆindex-htmlï¼‰"><a href="#1-å…¥å£htmlæ–‡ä»¶ï¼ˆindex-htmlï¼‰" class="headerlink" title="1.å…¥å£htmlæ–‡ä»¶ï¼ˆindex.htmlï¼‰"></a>1.å…¥å£htmlæ–‡ä»¶ï¼ˆindex.htmlï¼‰</h3><pre><code class="bash">&lt;div id=&#39;app&#39;&gt;&lt;/div&gt;&lt;div id=&#39;version&#39;&gt;...&lt;/div&gt; &lt;!-- æ£€æŸ¥æµè§ˆå™¨ç‰ˆæœ¬ --&gt;</code></pre><h3 id="2-å…¥å£jsæ–‡ä»¶ï¼ˆmain-jsï¼‰"><a href="#2-å…¥å£jsæ–‡ä»¶ï¼ˆmain-jsï¼‰" class="headerlink" title="2.å…¥å£jsæ–‡ä»¶ï¼ˆmain.jsï¼‰"></a>2.å…¥å£jsæ–‡ä»¶ï¼ˆmain.jsï¼‰</h3><pre><code class="javascript">new Vue({    el: &#39;#app&#39;,    router, // å¼•ç”¨routeræ–‡ä»¶å¤¹index.js    components: {App}, // å…¥å£vueæ–‡ä»¶    template: &#39;&lt;App/&gt;&#39;, // æ¨¡æ¿å°†ä¼šæ›¿æ¢æŒ‚è½½çš„å…ƒç´ ï¼ŒæŒ‚è½½å…ƒç´ çš„å†…å®¹éƒ½å°†è¢«å¿½ç•¥ï¼ˆçœ‹ä¸‹é¢æ³¨é‡Šï¼‰    store: VuexStore // vuexåŸå‹})</code></pre><blockquote><p>æ³¨é‡Šï¼šä¹Ÿå°±æ˜¯è¯´:template: â€˜&lt;App/&gt;â€™ è¡¨ç¤ºç”¨&lt;app&gt;&lt;/app&gt;æ›¿æ¢index.htmlé‡Œé¢çš„&lt;div id=â€appâ€&gt;&lt;/div&gt;</p></blockquote><h3 id="3-å…¥å£vueæ–‡ä»¶ï¼ˆApp-vueï¼‰"><a href="#3-å…¥å£vueæ–‡ä»¶ï¼ˆApp-vueï¼‰" class="headerlink" title="3.å…¥å£vueæ–‡ä»¶ï¼ˆApp.vueï¼‰"></a>3.å…¥å£vueæ–‡ä»¶ï¼ˆApp.vueï¼‰</h3><pre><code class="javascript">&lt;template&gt;    &lt;div id=&#39;app&#39;&gt;        &lt;router-view&gt;&lt;/router-view&gt; &lt;!-- è·¯ç”±è§†å›¾ç»„ä»¶ --&gt;    &lt;/div&gt;&lt;template&gt;</code></pre><h3 id="4-ä¸»è·¯ç”±ï¼ˆrouter-index-jsï¼‰"><a href="#4-ä¸»è·¯ç”±ï¼ˆrouter-index-jsï¼‰" class="headerlink" title="4.ä¸»è·¯ç”±ï¼ˆrouter/index.jsï¼‰"></a>4.ä¸»è·¯ç”±ï¼ˆrouter/index.jsï¼‰</h3><p>è¿™æ¬¡é¡¹ç›®åŸºäºä¸Šé¢çš„<router-view>æ¸²æŸ“åˆ†ä¸¤ä¸ªVUEæ–‡ä»¶ï¼šlogin.vueå’ŒMain.vueï¼Œä¸‹é¢ä¼šå¯¹è¿™ä¸¤ä¸ªVUEæ–‡ä»¶åšå…·ä½“ä»‹ç»ã€‚</p><pre><code class="javascript">//ç™»å½•é¡µé¢è·¯ç”±ä¿¡æ¯const loginRouter = {    path:    name:    component: () =&gt; import(...)}//ä¸šåŠ¡é¡µé¢è·¯ç”±ä¿¡æ¯ï¼Œéƒ½æ˜¯æŒ‚è½½åœ¨Main.vueé¡µé¢é‡Œï¼Œç­‰åŒäºå…¥å£vueçš„&lt;router-view&gt;const defindeRouter = { // é”™è¯¯è·³è½¬é¡µé¢è·¯ç”±    path:    name:    component: Main // import Main from ...å¼•å…¥Mainç»„ä»¶ï¼Œè®¾ç½®childrenå±æ€§è®¾ç½®ä¸šåŠ¡é¡µé¢è·¯ç”±    children: [{...}]}const topbarRouter = { // topæ è·¯ç”±    path:    name:    component: Main    children: [{...}]}const sidebarRouter = [ // å…·ä½“å„ä¸ªä¸šåŠ¡é¡µé¢è·¯ç”±    {        path:        name:        component: Main        children: [{...}]    },    {        path:        name:        component: Main        children: [{...}]    }]export const routerConfig = [    loginRouter,    topbarRouter,    defindeRouter,    ...sidebarRouter // è§£æ„]//å¯¼å‡ºè·¯ç”±ä¿¡æ¯ï¼Œåœ¨App.vueæ–‡ä»¶ä¸­å¼•å…¥</code></pre><h3 id="5-Main-vueï¼ˆä¸šåŠ¡é¡µé¢éƒ½æŒ‚è½½åœ¨ä¸‹é¢ï¼‰"><a href="#5-Main-vueï¼ˆä¸šåŠ¡é¡µé¢éƒ½æŒ‚è½½åœ¨ä¸‹é¢ï¼‰" class="headerlink" title="5.Main.vueï¼ˆä¸šåŠ¡é¡µé¢éƒ½æŒ‚è½½åœ¨ä¸‹é¢ï¼‰"></a>5.Main.vueï¼ˆä¸šåŠ¡é¡µé¢éƒ½æŒ‚è½½åœ¨ä¸‹é¢ï¼‰</h3><pre><code class="bash">&lt;template&gt;    &lt;Header&gt;&lt;/Header&gt;    &lt;Content&gt;        &lt;router-view&gt;&lt;/router-view&gt; // è”ç³»ä¸Šé¢çš„childrenè·¯ç”±ä¿¡æ¯ï¼Œéƒ½é€šè¿‡è¿™ä¸ªè·¯ç”±è§†å›¾æ˜¾ç¤º    &lt;/Content&gt;    &lt;Footer&gt;&lt;/Footer&gt;&lt;/template&gt;</code></pre><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæ‰€æœ‰é¡µé¢éƒ½æ˜¾ç¤ºåœ¨å…¥å£index.htmlçš„&lt;div id=â€™appâ€™&gt;é‡Œï¼Œmain.jsåˆ›å»ºVUEå®ä¾‹ï¼Œloginå’ŒMainä½œä¸ºä¸¤ä¸ªä¸»vueæ–‡ä»¶ï¼Œé€šè¿‡App.vueæ–‡ä»¶çš„&lt;router-view&gt;è·¯ç”±è§†å›¾æ˜¾ç¤ºï¼Œä¸šåŠ¡é¡µé¢é€šè¿‡Main.vueçš„&lt;router-view&gt;çš„è·¯ç”±è§†å›¾æ˜¾ç¤ºï¼Œåˆ©ç”¨è·¯ç”±childrenå±æ€§æŠŠé¡µé¢æŒ‚è½½åœ¨Main.vueä¸Šã€‚</p><h2 id="7-è·¯ç”±åˆ†å‘"><a href="#7-è·¯ç”±åˆ†å‘" class="headerlink" title="7.è·¯ç”±åˆ†å‘"></a>7.è·¯ç”±åˆ†å‘</h2><pre><code class="javascript">/*    Apacheè¯·æ±‚æ•°æ®åº“çš„ä»£ç */res = db.query(&#39;SELECT * from some_table&#39;)res.output()/*    Nodejsè¯·æ±‚æ•°æ®åº“çš„ä»£ç */db.query(&#39;SELECT * from some_table&#39;, function(res){    res.output()})</code></pre><p>ç”±äºé¡¹ç›®å¼€å‘çš„æ·±å…¥ï¼Œä¸ºäº†é…åˆè®¾å¤‡å±‚çš„é…ç½®ä¸‹å‘ï¼Œåå°å¼€å§‹ç€æ‰‹coreå±‚çš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸å®Œå…¨é’ˆå¯¹é¡µé¢æ˜¾ç¤ºçš„æ•°æ®æ¥å£ï¼›è¿™ç§æƒ…å†µä¸‹éœ€è¦å‰å°å¯¹æ¥å£è¿›è¡Œè·¯ç”±åˆ†å‘ï¼Œå¯¹äºåå°ç»™å‡ºçš„æ¥å£æ”¹æ„å’ŒåŒ…è£…ï¼Œè¾¾åˆ°é¡µé¢æ˜¾ç¤ºéœ€è¦çš„æ•°æ®ç»“æ„çš„æ¥å£ï¼Œè¿™æ¬¡ç”¨çš„æ˜¯nodejsçš„expressæ¡†æ¶ï¼Œåœ¨åº”ç”¨åˆ°é¡¹ç›®å‰ï¼Œè¿™é‡Œç®—æ˜¯å­¦ä¹ ç¬”è®°å’Œæ„Ÿæƒ³ã€‚</p><p>ä¸€ä¸ªåŸºæœ¬çš„expressåº”ç”¨çš„ç»“æ„ï¼š</p><pre><code class="javascript">var express = require(&#39;express&#39;) // å®‰è£…nodeçš„æ—¶å€™å›è‡ªåŠ¨å®‰è£…expressvar app = express()app.get(&#39;/&#39;, (req,res) =&gt; { // req(è¯·æ±‚)å’Œres(å“åº”)ä¸Nodeæä¾›çš„å¯¹è±¡å®Œå…¨ä¸€è‡´    res.send(&#39;ç›‘å¬3030ç«¯å£è¿›å…¥çš„æ‰€æœ‰getè¯·æ±‚&#39;)        })var server = app.listen(3030, function{    var host = server.address().address      var port = server.address().port      console.log(&#39;Example app listening at http://%s:%s&#39;, host, port)})</code></pre><h3 id="1-åŸºæœ¬è·¯ç”±å’Œé™æ€æ–‡ä»¶æŒ‚è½½"><a href="#1-åŸºæœ¬è·¯ç”±å’Œé™æ€æ–‡ä»¶æŒ‚è½½" class="headerlink" title="1.åŸºæœ¬è·¯ç”±å’Œé™æ€æ–‡ä»¶æŒ‚è½½"></a>1.åŸºæœ¬è·¯ç”±å’Œé™æ€æ–‡ä»¶æŒ‚è½½</h3><p>å¸¸è§çš„4ä¸ªåŸºæœ¬httpè¯·æ±‚ï¼š</p><pre><code class="javascript">// å¯¹ç½‘ç«™é¦–é¡µçš„è®¿é—®è¿”å› &quot;Hello World!&quot; å­—æ ·app.get(&#39;/&#39;, function (req, res) {  res.send(&#39;Hello World!&#39;);});// ç½‘ç«™é¦–é¡µæ¥å— POST è¯·æ±‚app.post(&#39;/&#39;, function (req, res) {  res.send(&#39;Got a POST request&#39;);});// /user èŠ‚ç‚¹æ¥å— PUT è¯·æ±‚app.put(&#39;/user&#39;, function (req, res) {  res.send(&#39;Got a PUT request at /user&#39;);});// /user èŠ‚ç‚¹æ¥å— DELETE è¯·æ±‚app.delete(&#39;/user&#39;, function (req, res) {  res.send(&#39;Got a DELETE request at /user&#39;);});</code></pre><p>åˆ©ç”¨expressæ‰˜ç®¡é™æ€æ–‡ä»¶ï¼ˆexpress.staticä¸­é—´ä»¶ï¼‰</p><pre><code class="javascript">app.use(express.static(&#39;public&#39;))// é€šè¿‡http://localhost:3030/image/xx.pngè®¿é—®// å¤šä¸ªç›®å½•æŒ‰ç…§æ·»åŠ é¡ºåºæŸ¥æ‰¾app.use(&#39;/public&#39;, express.static(&#39;public&#39;))// å­˜æ”¾è™šæ‹Ÿç›®å½•ï¼Œé€šè¿‡æŒ‡å®šçš„æŒ‚è½½è·¯å¾„è®¿é—®ï¼šhttp://localhost:3030/public/image/xx.png</code></pre><h3 id="2-è·¯ç”±"><a href="#2-è·¯ç”±" class="headerlink" title="2.è·¯ç”±"></a>2.è·¯ç”±</h3><p>è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURIsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<br>è·¯ç”±æ˜¯ç”±ä¸€ä¸ª URIã€HTTP è¯·æ±‚ï¼ˆGETã€POSTç­‰ï¼‰å’Œè‹¥å¹²ä¸ªå¥æŸ„ç»„æˆï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹ï¼š app.METHOD(path, [callbackâ€¦], callback)ï¼Œ app æ˜¯ express å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œ METHOD æ˜¯ä¸€ä¸ª HTTP è¯·æ±‚æ–¹æ³•ï¼Œ path æ˜¯æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ï¼Œ callback æ˜¯å½“è·¯ç”±åŒ¹é…æ—¶è¦æ‰§è¡Œçš„å‡½æ•°ã€‚</p><pre><code class="javascript">// å¯¹äºä¸Šé¢çš„4ç§è¯·æ±‚çš„å¥æŸ„æ”¹ç”¨app.route()å®šä¹‰é“¾å¼å¥æŸ„app.route(&#39;/public&#39;)    .get((req,res) =&gt; {        ...    })    .post((req,res) =&gt; {        ...    })    .put((req,res) =&gt; {        ...    });// ç›‘å¬æ¥è‡ª/publicçš„æ‰€æœ‰è¯·æ±‚app.all(&#39;/public&#39;, function(req,res,next){    ...    next();})// è·¯ç”±åŒ¹é…// åŒ¹é… butterflyã€dragonflyï¼Œä¸åŒ¹é… butterflymanã€dragonfly manç­‰app.get(/.*fly$/, function(req, res) {      res.send(&#39;/.*fly$/&#39;);});</code></pre><h4 id="express-Router"><a href="#express-Router" class="headerlink" title="express.Router"></a>express.Router</h4><p>è°ƒç”¨express()æ–¹æ³•åˆ›å»ºçš„Application(app)å†…éƒ¨éƒ½åˆ›å»ºäº†ä¸€ä¸ªRouterï¼Œå¤§éƒ¨åˆ†å¯¹ Application çš„æ“ä½œå®é™…ä¸Šéƒ½è¢«é‡å®šå‘åˆ°äº†è¿™ä¸ªå†…éƒ¨çš„Routerä¸Šè€Œå·²ã€‚è€ŒApplicationæ‰€åšçš„ï¼Œåªä¸è¿‡æ˜¯åœ¨è¿™ä¸ªRouterçš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›é¢å¤–çš„ä¾¿æ· API è€Œå·²ã€‚</p><pre><code class="javascript">var express = require(&#39;express&#39;);var router = express.Router();// è¯¥è·¯ç”±ä½¿ç”¨çš„ä¸­é—´ä»¶router.use(function timeLog(req, res, next) {  console.log(&#39;Time: &#39;, Date.now());  next();});// å®šä¹‰ç½‘ç«™ä¸»é¡µçš„è·¯ç”±router.get(&#39;/&#39;, function(req, res) {  res.send(&#39;Birds home page&#39;);});// å®šä¹‰ about é¡µé¢çš„è·¯ç”±router.get(&#39;/about&#39;, function(req, res) {  res.send(&#39;About public&#39;);});module.exports = router;// åœ¨åº”ç”¨ä¸­åŠ è½½è·¯ç”±æ¨¡å—var pub = require(&#39;jsæ–‡ä»¶è·¯å¾„&#39;);...app.use(&#39;/public&#39;, pub);// åº”ç”¨å³å¯å¤„ç†å‘è‡ª /public å’Œ /public/about çš„è¯·æ±‚ï¼Œå¹¶ä¸”è°ƒç”¨ä¸ºè¯¥è·¯ç”±æŒ‡å®šçš„ timeLog ä¸­é—´ä»¶</code></pre><h3 id="3-ä¸­é—´ä»¶"><a href="#3-ä¸­é—´ä»¶" class="headerlink" title="3.ä¸­é—´ä»¶"></a>3.ä¸­é—´ä»¶</h3><p>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥è®¿é—®è¯·æ±‚å¯¹è±¡ï¼ˆrequest object (req)ï¼‰ï¼Œå“åº”å¯¹è±¡ï¼ˆresponse object (res)ï¼‰ï¼Œå’Œ web åº”ç”¨ä¸­å¤„äºè¯·æ±‚-å“åº”å¾ªç¯æµç¨‹ä¸­çš„ä¸­é—´ä»¶ï¼Œä¸€èˆ¬è¢«å‘½åä¸º next çš„å˜é‡ã€‚</p><blockquote><p>å…³äºnext()å‡½æ•°çš„è§£é‡Šï¼Œæˆ‘æ‰¾äº†ä¸€ç¯‡æ¯”è¾ƒå¥½çš„<a href="http://cnodejs.org/topic/5757e80a8316c7cb1ad35bab" target="_blank" rel="noopener">æ–‡ç« </a></p></blockquote><p>ä¸­é—´ä»¶çš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>æ‰§è¡Œä»»ä½•ä»£ç ï¼›</li><li>ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡ï¼›</li><li>ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼›</li><li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚<br>å¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨ next()æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚</li></ul><p>Express åº”ç”¨å¯ä½¿ç”¨å¦‚ä¸‹å‡ ç§ä¸­é—´ä»¶ï¼š</p><ul><li>åº”ç”¨çº§ä¸­é—´ä»¶</li><li>è·¯ç”±çº§ä¸­é—´ä»¶</li><li>é”™è¯¯å¤„ç†ä¸­é—´ä»¶</li><li>å†…ç½®ä¸­é—´ä»¶</li><li>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</li></ul><h4 id="1-åº”ç”¨çº§ä¸­é—´ä»¶"><a href="#1-åº”ç”¨çº§ä¸­é—´ä»¶" class="headerlink" title="1.åº”ç”¨çº§ä¸­é—´ä»¶"></a>1.åº”ç”¨çº§ä¸­é—´ä»¶</h4><p>åº”ç”¨çº§ä¸­é—´ä»¶ç»‘å®šåˆ°<strong>appå¯¹è±¡</strong>ä½¿ç”¨app.use()å’Œapp.METHOD()ï¼Œå…¶ä¸­METHODæ˜¯éœ€è¦å¤„ç†çš„HTTPè¯·æ±‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚GET, PUT, POST ç­‰ç­‰ï¼Œå…¨éƒ¨å°å†™ã€‚ä¾‹å¦‚ï¼š</p><pre><code class="javascript">var app = express();// æ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶ï¼Œåº”ç”¨çš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ‰§è¡Œè¯¥ä¸­é—´ä»¶app.use(function (req, res, next) {  console.log(&#39;Time:&#39;, Date.now());  next();});// æŒ‚è½½è‡³ /user/:id çš„ä¸­é—´ä»¶ï¼Œä»»ä½•æŒ‡å‘ /user/:id çš„è¯·æ±‚éƒ½ä¼šæ‰§è¡Œå®ƒapp.use(&#39;/user/:id&#39;, function (req, res, next) {  console.log(&#39;Request Type:&#39;, req.method);  next();});// è·¯ç”±å’Œå¥æŸ„å‡½æ•°(ä¸­é—´ä»¶ç³»ç»Ÿ)ï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚app.get(&#39;/user/:id&#39;, function (req, res, next) {  res.send(&#39;USER&#39;);});</code></pre><p>ä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†åœ¨ä¸€ä¸ªæŒ‚è½½ç‚¹è£…è½½ä¸€ç»„ä¸­é—´ä»¶ã€‚</p><pre><code class="javascript">// ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¯¹ä»»ä½•æŒ‡å‘ /user/:id çš„ HTTP è¯·æ±‚æ‰“å°å‡ºç›¸å…³ä¿¡æ¯app.use(&#39;/user/:id&#39;, function(req, res, next) {  console.log(&#39;Request URL:&#39;, req.originalUrl);  next();}, function (req, res, next) {  console.log(&#39;Request Type:&#39;, req.method);  next();});</code></pre><p>ä½œä¸ºä¸­é—´ä»¶ç³»ç»Ÿçš„è·¯ç”±å¥æŸ„ï¼Œä½¿å¾—ä¸ºè·¯å¾„å®šä¹‰å¤šä¸ªè·¯ç”±æˆä¸ºå¯èƒ½ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä¸ºæŒ‡å‘ /user/:id çš„ GET è¯·æ±‚å®šä¹‰äº†<strong>ä¸¤ä¸ªè·¯ç”±</strong>ã€‚ç¬¬äºŒä¸ªè·¯ç”±è™½ç„¶ä¸ä¼šå¸¦æ¥ä»»ä½•é—®é¢˜ï¼Œä½†å´æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªè·¯ç”±å·²ç»ç»ˆæ­¢äº†è¯·æ±‚-å“åº”å¾ªç¯ã€‚</p><pre><code class="javascript">// ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚app.get(&#39;/user/:id&#39;, function (req, res, next) {  console.log(&#39;ID:&#39;, req.params.id);  next();}, function (req, res, next) {  res.send(&#39;User Info&#39;);});// å¤„ç† /user/:idï¼Œ æ‰“å°å‡ºç”¨æˆ· idapp.get(&#39;/user/:id&#39;, function (req, res, next) {  res.end(req.params.id);});</code></pre><p>å¦‚æœéœ€è¦åœ¨ä¸­é—´ä»¶æ ˆä¸­è·³è¿‡å‰©ä½™ä¸­é—´ä»¶ï¼Œè°ƒç”¨ next(â€˜routeâ€™) æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªè·¯ç”±ã€‚ æ³¨æ„ï¼š next(â€˜routeâ€™) åªå¯¹ä½¿ç”¨ app.VERB() æˆ– router.VERB() åŠ è½½çš„ä¸­é—´ä»¶æœ‰æ•ˆã€‚</p><pre><code class="javascript">// ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚app.get(&#39;/user/:id&#39;, function (req, res, next) {  // å¦‚æœ user id ä¸º 0, è·³åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±  if (req.params.id == 0) next(&#39;route&#39;);  // å¦åˆ™å°†æ§åˆ¶æƒäº¤ç»™æ ˆä¸­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶  else next(); //}, function (req, res, next) {  // æ¸²æŸ“å¸¸è§„é¡µé¢  res.render(&#39;regular&#39;);});// å¤„ç† /user/:idï¼Œ æ¸²æŸ“ä¸€ä¸ªç‰¹æ®Šé¡µé¢app.get(&#39;/user/:id&#39;, function (req, res, next) {  res.render(&#39;special&#39;);});</code></pre><h4 id="2-è·¯ç”±çº§ä¸­é—´ä»¶"><a href="#2-è·¯ç”±çº§ä¸­é—´ä»¶" class="headerlink" title="2.è·¯ç”±çº§ä¸­é—´ä»¶"></a>2.è·¯ç”±çº§ä¸­é—´ä»¶</h4><p>è·¯ç”±çº§ä¸­é—´ä»¶å’Œåº”ç”¨çº§ä¸­é—´ä»¶ä¸€æ ·ï¼Œåªæ˜¯å®ƒç»‘å®šçš„å¯¹è±¡ä¸º express.Router()ã€‚</p><pre><code class="javascript">var router = express.Router();</code></pre><p>è·¯ç”±çº§ä½¿ç”¨ router.use() æˆ– router.VERB() åŠ è½½ã€‚<br>ä¸Šè¿°åœ¨åº”ç”¨çº§åˆ›å»ºçš„ä¸­é—´ä»¶ç³»ç»Ÿï¼Œå¯é€šè¿‡å¦‚ä¸‹ä»£ç æ”¹å†™ä¸ºè·¯ç”±çº§ï¼š</p><pre><code class="javascript">var app = express();var router = express.Router();// æ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶ï¼Œé€šè¿‡è¯¥è·¯ç”±çš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ‰§è¡Œè¯¥ä¸­é—´ä»¶router.use(function (req, res, next) {  console.log(&#39;Time:&#39;, Date.now());  next();});// ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œæ˜¾ç¤ºä»»ä½•æŒ‡å‘ /user/:id çš„ HTTP è¯·æ±‚çš„ä¿¡æ¯router.use(&#39;/user/:id&#39;, function(req, res, next) {  console.log(&#39;Request URL:&#39;, req.originalUrl);  next();}, function (req, res, next) {  console.log(&#39;Request Type:&#39;, req.method);  next();});// ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚router.get(&#39;/user/:id&#39;, function (req, res, next) {  // å¦‚æœ user id ä¸º 0, è·³åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±  if (req.params.id == 0) next(&#39;route&#39;);  // è´Ÿè´£å°†æ§åˆ¶æƒäº¤ç»™æ ˆä¸­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶  else next(); //}, function (req, res, next) {  // æ¸²æŸ“å¸¸è§„é¡µé¢  res.render(&#39;regular&#39;);});// å¤„ç† /user/:idï¼Œ æ¸²æŸ“ä¸€ä¸ªç‰¹æ®Šé¡µé¢router.get(&#39;/user/:id&#39;, function (req, res, next) {  console.log(req.params.id);  res.render(&#39;special&#39;);});// å°†è·¯ç”±æŒ‚è½½è‡³åº”ç”¨app.use(&#39;/&#39;, router);</code></pre><blockquote><p>è·¯ç”±çº§ä¸­é—´ä»¶å’Œéè·¯ç”±çº§ä¸­é—´ä»¶çš„ç¬¬ä¸‰ä¸ªå‚æ•°nextä¸æ˜¯åŒä¸€ä¸ªnextï¼ŒåŠŸèƒ½ä¸ŠåŸºæœ¬ç›¸åŒã€‚</p></blockquote><h4 id="3-é”™è¯¯å¤„ç†ä¸­é—´ä»¶"><a href="#3-é”™è¯¯å¤„ç†ä¸­é—´ä»¶" class="headerlink" title="3.é”™è¯¯å¤„ç†ä¸­é—´ä»¶"></a>3.é”™è¯¯å¤„ç†ä¸­é—´ä»¶</h4><blockquote><p>é”™è¯¯å¤„ç†ä¸­é—´ä»¶æœ‰ 4 ä¸ªå‚æ•°ï¼Œå®šä¹‰é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ—¶å¿…é¡»ä½¿ç”¨è¿™4ä¸ªå‚æ•°ï¼ˆ4ä¸ªå‚æ•°æ˜¯next(err)æ‰§è¡Œåˆ¤æ–­çš„æ ‡è¯†ï¼‰ã€‚å³ä½¿ä¸éœ€è¦nextå¯¹è±¡ï¼Œä¹Ÿå¿…é¡»åœ¨ç­¾åä¸­å£°æ˜å®ƒï¼Œå¦åˆ™ä¸­é—´ä»¶ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªå¸¸è§„ä¸­é—´ä»¶ï¼Œä¸èƒ½å¤„ç†é”™è¯¯ã€‚</p></blockquote><pre><code class="javascript">app.use(function(err, req, res, next) {  console.error(err.stack);  res.status(500).send(&#39;Something broke!&#39;);});</code></pre><p>å…·ä½“å…³äºé”™è¯¯å¤„ç†ä¸­é—´ä»¶çš„ä»‹ç»å¯ä»¥å‚è€ƒ<a href="http://www.expressjs.com.cn/guide/error-handling.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="4-å†…ç½®ä¸­é—´ä»¶"><a href="#4-å†…ç½®ä¸­é—´ä»¶" class="headerlink" title="4.å†…ç½®ä¸­é—´ä»¶"></a>4.å†…ç½®ä¸­é—´ä»¶</h4><p>express.staticæ˜¯Expresså”¯ä¸€çš„å†…ç½®ä¸­é—´ä»¶ã€‚å®ƒåŸºäºserve-staticï¼Œè´Ÿè´£åœ¨Expressåº”ç”¨ä¸­æ‰˜ç®¡é™æ€èµ„æºã€‚<br>æœ€å¸¸ç”¨çš„ç”¨æ³•åœ¨ä¸Šé¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œå…³äºæ›´ç»†èŠ‚çš„å‚æ•°å¯å‚è€ƒ<a href="http://www.expressjs.com.cn/guide/using-middleware.html#middleware.built-in" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨äº‘â€”â€”H3C</title>
      <link href="/2018/04/08/seccloud/"/>
      <url>/2018/04/08/seccloud/</url>
      
        <content type="html"><![CDATA[<h2 id="by-2019-8-14-14-15"><a href="#by-2019-8-14-14-15" class="headerlink" title="by 2019/8/14 14:15"></a>by 2019/8/14 14:15</h2><p>è¿™ä¸ªé¡¹ç›®æ˜¯åœ¨æ–°åä¸‰çš„ç¬¬ä¸€ä¸ªVueå¼€å‘çš„é¡¹ç›®ï¼Œä¹Ÿå› ä¸ºæœ€è¿‘æœ‰äº†æ›´å¥½çš„é€‰æ‹©ï¼Œæ‰€ä»¥å‘¢è¿™éƒ¨åˆ†çš„æ›´æ–°å°±åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œåé¢çš„ä»“åº“ä¼šåŸºäºæ–°å…¬å¸æ–°é¡¹ç›®å†™å¼€å‘å’Œå­¦ä¹ æ—¥å¸¸ï¼Œä¼°è®¡åˆ°æ—¶å€™å°±ä¸æ˜¯vueäº†= =åº”è¯¥æ˜¯reactå§ï¼Œæœ‰ç‚¹æ–¹Orz</p><h2 id="by-2019-3-16-15-00"><a href="#by-2019-3-16-15-00" class="headerlink" title="by 2019/3/16 15:00"></a>by 2019/3/16 15:00</h2><p>ä»Šå¤©åŠ ç­ç­‰æµ‹è¯•æé—®é¢˜å•ï¼Œç©ºäº†ç‚¹æ—¶é—´æ•´ç†äº†ä¸€ä¸‹è¿™é‡Œçš„readme.mdï¼Œéƒ½å·²ç»æŒ‰ç…§åˆ†ç±»æ”¾åˆ°Issueså’Œprojecté‡Œäº†ï¼Œæ›´æ¸…æ™°æ˜äº†ä¸€ç‚¹ã€‚æœ‰ä»€ä¹ˆæ„è§å¯ä»¥åœ¨Issuesä¸‹è¯„è®ºï¼Œå¤šè°¢Orz</p><h2 id="by-2019-3-1-09-40"><a href="#by-2019-3-1-09-40" class="headerlink" title="by 2019/3/1 09:40"></a>by 2019/3/1 09:40</h2><p>emmmmm é¡¹ç›®å·²ç»ä¸€æœŸåšå®Œäº†ï¼ŒäºŒæœŸåšäº†ä¸€åŠå§ï¼Œè‡ªæˆ‘æ„Ÿè§‰æˆ‘çš„ä¸šåŠ¡ä»£ç å†™äº†æœ‰è¿™ä¸ªé¡¹ç›®çš„1/4åˆ°1/3ä¹‹é—´å§ï¼ˆé¡¹ç›®ç»„æ€»å…±æœ‰9ä¸ªäºº= =ï¼‰ï¼Œä»£ç é‡å·®ä¸å¤šæœ‰30käº†ï¼Œè¿˜æ˜¯å¾ˆå¿ƒç´¯çš„ï¼›ä»ä¸€å¼€å§‹çš„æ¡†æ¶æ­å»ºåˆ°nodejsï¼ˆexpressï¼‰çš„å¼•å…¥å†åˆ°å‰ç«¯vue-routerçš„æƒé™ç®¡ç†ï¼Œè‡ªæˆ‘æ„Ÿè§‰å·²ç»åšçš„æŒºä¸é”™äº†ã€‚åé¢å°±å†™å†™æ¯”å¦‚vuexã€es6æ¦‚å¿µæ–¹é¢çš„ç†è§£å§ï¼Œä¸èƒ½åªçŸ¥é“ç”¨ï¼Œè¿˜æ˜¯è¦ç†Ÿæ‚‰ä¸€äº›å±æ€§ã€æ–¹æ³•ä»€ä¹ˆçš„ã€‚  </p><h2 id="by-2018-4-8-11-00"><a href="#by-2018-4-8-11-00" class="headerlink" title="by 2018/4/8 11:00"></a>by 2018/4/8 11:00</h2><p>emmmmm ä»Šå¹´2æœˆ1å·å¼€å§‹çš„å®‰å…¨SASSäº‘é¡¹ç›®åœ¨ä¸Šä¸ªæœˆï¼ˆ3æœˆ31å·ï¼‰ä¹Ÿç»“æŸç¬¬ä¸€æ¬¡çš„å‘å¸ƒä¼šæ£€æŸ¥ï¼Œæ€»ä½“ä¸Šæ¥è¯´è¿˜æ˜¯æŒºä¸é”™çš„å§ï¼Œ2ä¸ªæœˆçš„æ—¶é—´å‰ç«¯éƒ¨åˆ†å®Œæˆäº†95%ï¼Œå’Œåå°çš„è”è°ƒå®Œæˆçš„ä¸å¤šï¼Œå¤§æ¦‚ä¹Ÿå°±70%å§= =å®åœ¨æ˜¯é¡µé¢å¤ªå¤šäº†ï¼Œä¸€ä¸ªå®Œæ•´çš„SASSäº‘é¡¹ç›®ä¸ºäº†è¾¾åˆ°å‘å¸ƒä¼šçš„è¦æ±‚ï¼Œä»æ²¡æœ‰æˆç†Ÿçš„UIè®¾è®¡å’Œä¸šåŠ¡å®ç°é€»è¾‘åˆ°å„åŠŸèƒ½æ¨¡å—çš„å®ç°ç”¨äº†å¤§æ¦‚ä¸€ä¸ªåŠæœˆçš„æ—¶é—´ï¼Œåé¢èŠ±äº†åŠä¸ªæœˆå·¦å³çš„æ—¶é—´è”è°ƒã€‚æ€»çš„é¡µé¢æ€»å…±åŠ èµ·æ¥æ•°é‡å¤§æ¦‚æœ‰å°†è¿‘100å„å·¦å³ï¼Œæˆ‘è´Ÿè´£äº†å¤§æ¦‚å…¶ä¸­çš„20ä¸ªé¡µé¢å§ï¼šåŒ…å«LBã€NATã€ç”¨æˆ·ä¿¡æ¯ç­‰ç­‰çš„ä¸»é¡µã€é…ç½®é¡µå’Œè¯¦æƒ…é¡µï¼Œ31å·æ™šä¸Šæäº¤ä»£ç åé—²ä¸‹æ¥æ— èŠæ•°äº†ä¸€ä¸‹å‰å‰ååä¸šåŠ¡ä»£ç ã€å°è£…æ¨¡å—ç»„ä»¶çš„ä»£ç å·®ä¸å¤šæœ‰ä¸ª1wè¡Œå§T Tè™½ç„¶è¿™ä¸­é—´åŠ ç­äº†å¾ˆå¤šæ¬¡ï¼Œä¹Ÿæœ‰å‘å¸ƒä¼šå‰ä¸€æ™šé€šå®µï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šæ”¶è·çš„å§ :)</p><p>è¿™æ¬¡é¡¹ç›®ç”¨çš„ä¸»è¦æ˜¯VUEæ¡†æ¶åŸºäºwebpackã€es6å’Œnodeå¼€å‘çš„ç¯å¢ƒï¼Œå…¶ä¸­ä¸ºäº†å¿«é€Ÿå¼€å‘å§ï¼Œç”¨äº†ä¸€äº›iviewçš„ç»„ä»¶ï¼Œè‡ªå·±ä¹Ÿåœ¨iviewæä¾›çš„åŸºç¡€ç»„ä»¶çš„åŸºç¡€ä¸Šå°è£…äº†å‡ ä¸ªåŠŸèƒ½æ€§æ›´å¼ºçš„ç»„ä»¶ã€‚å¯¹äºè¿™æ¬¡é¡¹ç›®çš„æ€»ç»“æˆ‘ä¼šæ¯å¤©å†™ä¸€ç‚¹ï¼Œå½“åšè®°å½•å§ï¼Œé¡¹ç›®ç»“æŸæˆ‘ä¼šæ•´ç†æˆå‡ ç¯‡åšæ–‡æ”¾åˆ°æˆ‘çš„åšå®¢å»ã€‚</p><h2 id="1-è·¯ç”±ï¼ˆrouterï¼‰"><a href="#1-è·¯ç”±ï¼ˆrouterï¼‰" class="headerlink" title="1.è·¯ç”±ï¼ˆrouterï¼‰"></a>1.è·¯ç”±ï¼ˆrouterï¼‰</h2><p>åœ¨è¯´é¡¹ç›®è·¯ç”±å‰ï¼Œå¯ä»¥å…ˆçœ‹çœ‹vueå®˜æ–¹ç»™å‡ºçš„<a href="https://router.vuejs.org/zh-cn/essentials/getting-started.html" target="_blank" rel="noopener">vue-router</a>çš„ä»‹ç»ï¼Œæˆ‘ä¹Ÿä¼šåˆ—å‡ºä¸€äº›ç¨å¾®éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p><h3 id="1-åŠ¨æ€è·¯ç”±å‚æ•°"><a href="#1-åŠ¨æ€è·¯ç”±å‚æ•°" class="headerlink" title="1.åŠ¨æ€è·¯ç”±å‚æ•°"></a>1.åŠ¨æ€è·¯ç”±å‚æ•°</h3><p>ç”¨äºä¸åŒIDçš„ç”¨æˆ·éƒ½éœ€ä½¿ç”¨åŒä¸€ä¸ªç»„ä»¶æ¸²æŸ“</p><pre><code class="javascript">const User = {  template: &#39;&lt;div&gt;User&lt;/div&gt;&#39;}const router = new VueRouter({  routes: [    // åŠ¨æ€è·¯å¾„å‚æ•° ä»¥å†’å·å¼€å¤´    { path: &#39;/user/:id&#39;, component: User }  ]})</code></pre><blockquote><p>åƒ /user/foo å’Œ /user/bar éƒ½å°†æ˜ å°„åˆ°ç›¸åŒçš„è·¯ç”±ã€‚ä¸€ä¸ªã€è·¯å¾„å‚æ•°ã€ä½¿ç”¨å†’å· : æ ‡è®°ã€‚å½“åŒ¹é…åˆ°ä¸€ä¸ªè·¯ç”±æ—¶ï¼Œå‚æ•°å€¼ä¼šè¢«è®¾ç½®åˆ° this.$route.paramsï¼Œå¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…ä½¿ç”¨ã€‚å…¶ä¸­paramsé this.$router.push(name or path, params: {id: xx})æ–¹æ³•ä¼ é€’ï¼Œä¹Ÿå¯ä»¥å¤šæ®µè®¾ç½®è·¯ç”±å‚æ•°ï¼šæ¨¡å¼:/user/: username/post/:post_id =&gt; åŒ¹é…è·¯å¾„: /user/evan/post/123 =&gt; $route.params: { username: â€˜evanâ€™, post_id: 123 }</p></blockquote><h3 id="2-ç»“åˆé¡¹ç›®"><a href="#2-ç»“åˆé¡¹ç›®" class="headerlink" title="2.ç»“åˆé¡¹ç›®"></a>2.ç»“åˆé¡¹ç›®</h3><p>è¿™æ¬¡é‡‡ç”¨çš„æ˜¯åˆ†çº§çš„è·¯ç”±å®šä¹‰æ–¹å¼ï¼š</p><pre><code class="javascript">import childRouter from &#39;../../router&#39;const parentPouter1 = {    path:    name:    title:    component:    children: childRouter}const routerConfig = [ parentPouter1 ]export default const router = new VueRouter({    routes: routerConfig})// å†åœ¨childRouteré‡Œé¢åˆ†çº§å®šä¹‰å­è·¯ç”±ï¼š[    {        path:        name:        title:        component: () =&gt; import(&#39;url&#39;) //å…·ä½“é¡µé¢çš„è·¯å¾„    },    {        path:        name:        title:        component: () =&gt; import(&#39;url&#39;) //å…·ä½“é¡µé¢çš„è·¯å¾„    }]</code></pre><p>å¯¹äºæ‰‹é£ç´ç±»çš„çˆ¶çº§å±•å¼€å¼çš„å¤šä¸ªå­è·¯ç”±çš„æƒ…å†µï¼š</p><pre><code class="javascript">const parentPouter2 = [    {        path:        name:        title:        component:        children: childRouter1    },    {        path:        name:        title:        component:        children: childRouter2    }]const routerConfig = [     parentRouter1,    ...parentPouter2  //...åˆ†æ„æ•°ç»„æˆå¯¹è±¡å½¢å¼çš„è·¯ç”±]export default const router = new VueRouter({    routes: routerConfig})</code></pre><p>å…·ä½“å…³äºé¡¹ç›®è·¯ç”±ç»“æ„å¯ä»¥çœ‹ç¬¬6é¡¹ä»‹ç»ã€‚</p><h2 id="2-å°è£…ç»„ä»¶"><a href="#2-å°è£…ç»„ä»¶" class="headerlink" title="2.å°è£…ç»„ä»¶"></a>2.å°è£…ç»„ä»¶</h2><p>åœ¨ä¸‰æœˆä¸­æ—¬å¼€å‘çš„æ—¶å€™ï¼Œè¢«è¦æ±‚åœ¨ä¸»è¦ä¸šåŠ¡çš„ä¸»é¡µä¸Šæ·»åŠ ä¸€ä¸ªè¯¦æƒ…çš„å¯æ”¶ç¼©çš„å¼¹æ¡†ã€‚éœ€æ±‚å¾ˆç®€å•ï¼Œä½†ä¸ºäº†ç»Ÿä¸€æ ·å¼ä¾¿äºå¼€å‘ï¼Œé‡‡å–äº†å•ç‹¬å°è£…ç»„ä»¶çš„æ–¹å¼ã€‚å…¶ä¸­ä¸ºäº†ä¿è¯è¯¦æƒ…æ¡†å’Œä¸»é¡µé¢å†…å®¹é«˜åº¦ä¸€è‡´ï¼Œç”¨åˆ°CSSå˜é‡çš„çŸ¥è¯†ç‚¹ï¼ˆå…·ä½“å†…å®¹å¯ä»¥é˜…è¯»<a href="http://www.ruanyifeng.com/blog/2017/05/css-variables.html" target="_blank" rel="noopener">é˜®ä¸€å³°CSSå˜é‡æ•™ç¨‹</a>ï¼‰ã€‚</p><pre><code class="javascript">&lt;script type=&#39;text/javascript&#39;&gt;    mounted () {        document.body.style.setProperty(&#39;--autoHeight&#39;, $(#leftId).height()) // å–åˆ°å·¦è¾¹å†…å®¹é«˜åº¦å†è®¾ç½®autoHeightå˜é‡çš„å¤§å°    }&lt;/script&gt;&lt;style type=&#39;text/css&#39; scoped&gt;    body {        --autoHeught: 25; /*è¿™ä¸ªé«˜åº¦æ˜¯éšä¾¿å®šçš„ï¼Œè¡¨ç¤ºç±»å‹å³å¯*/    }    .card {        height: calc(var(--autoHeight)*1px); //var()å‡½æ•°æ˜¯å–csså˜é‡çš„å€¼ï¼›calc()å‡½æ•°è¿æ¥æ•°å€¼å’Œå•ä½    }&lt;/style&gt;</code></pre><h2 id="3-æ•°æ®ä¼ é€’"><a href="#3-æ•°æ®ä¼ é€’" class="headerlink" title="3.æ•°æ®ä¼ é€’"></a>3.æ•°æ®ä¼ é€’</h2><p>VUEæ¡†æ¶ä¸­å¯ä»¥ç”¨åŠ¨æ€è·¯ç”±åœ¨ä¸åŒé¡µé¢é—´ä¼ é€’æ•°æ®ï¼Œå¸¸ç”¨çš„ä¼ é€’å‚æ•°çš„æ–¹æ³•æ˜¯é€šè¿‡paramså’Œqueryï¼Œæ³¨æ„çš„æ˜¯ï¼šç”±äºåŠ¨æ€è·¯ç”±ä¹Ÿæ˜¯ä¼ é€’paramsçš„ï¼Œæ‰€ä»¥åœ¨ this.$router.push() æ–¹æ³•ä¸­pathä¸èƒ½å’Œparamsä¸€èµ·ä½¿ç”¨ï¼Œå¦åˆ™paramså°†æ— æ•ˆã€‚éœ€è¦ç”¨nameæ¥æŒ‡å®šé¡µé¢</p><h3 id="1-params"><a href="#1-params" class="headerlink" title="1.params"></a>1.params</h3><pre><code class="javascript">this.$router.push({name:&#39;RouterName&#39;, params:{data: this.userID}}) //å…¶ä¸­nameå‚æ•°æ˜¯ä¸‹ä¸€è·³è·¯ç”±çš„nameå±æ€§// åœ¨ç›®çš„é¡µé¢ä½¿ç”¨ä¼ é€’è¿‡æ¥çš„paramsé‡Œçš„dataå€¼this.$route.params.data</code></pre><h3 id="2-query"><a href="#2-query" class="headerlink" title="2.query"></a>2.query</h3><pre><code class="javascript">this.$router.push({name:&#39;RouterName&#39;, query:{data: this.userID}}) //å…¶ä¸­nameå‚æ•°æ˜¯è·³è½¬è·¯ç”±çš„nameå±æ€§// æˆ–è€…this.$router.push({path:&#39;RouterPath&#39;, query:{data: this.userID}}) //å…¶ä¸­pathå‚æ•°æ˜¯ä¸‹ä¸€è·³è·¯ç”±çš„pathå±æ€§// åœ¨ç›®çš„é¡µé¢ä½¿ç”¨ä¼ é€’è¿‡æ¥çš„queryé‡Œçš„dataå€¼this.$route.query.data</code></pre><p>è¿™ä¸¤ç§ä¼ é€’å‚æ•°çš„æ–¹æ³•åŒºåˆ«ä¸»è¦åœ¨äºï¼šparamsä¼ é€’çš„å‚æ•°ä¸ä¼šä½“ç°åœ¨é¡µé¢çš„URLé‡Œï¼Œåˆ·æ–°é¡µé¢åæ•°æ®å°±ä¼šæ¶ˆå¤±ï¼›queryä¼ é€’çš„å‚æ•°ä¼šä»¥â€?userID=xxxâ€çš„åç¼€æ–¹å¼ä½“ç°åœ¨URLä¸­ï¼Œåˆ·æ–°é¡µé¢æ•°æ®è¿˜ä¼šä¿ç•™ã€‚</p><h2 id="4-çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#4-çˆ¶å­ç»„ä»¶é€šä¿¡" class="headerlink" title="4.çˆ¶å­ç»„ä»¶é€šä¿¡"></a>4.çˆ¶å­ç»„ä»¶é€šä¿¡</h2><p>åœ¨å•ä¸ªé¡µé¢é‡Œçš„ç»„ä»¶é—´çš„é€šä¿¡ï¼Œä¾‹å¦‚æ‰“å¼€æ–°å»ºæˆ–ç¼–è¾‘æ¡†æ—¶çš„æ•°æ®ä¼ é€’ï¼›è¿™é‡Œåªè€ƒè™‘çˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡ï¼Œéçˆ¶å­ç»„ä»¶é€šä¿¡é€šè¿‡åˆ›å»ºäº‹ä»¶ä¸­å¿ƒçš„æ–¹å¼æš‚ä¸æ·±ç©¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/dataConmmunicate.png" alt=""></p><h3 id="1-çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶"><a href="#1-çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶" class="headerlink" title="1.çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶"></a>1.çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶</h3><p>ä¸»è¦é€šè¿‡propså±æ€§å®ç°ï¼š</p><pre><code class="vue">//çˆ¶ç»„ä»¶&lt;parent&gt;    &lt;child :childprops=&#39;this.data&#39;&gt;&lt;child&gt;&lt;/parent&gt;&lt;script&gt;    data () {        return {            data: &#39;mclean&#39;        }    }&lt;/script&gt;//å­ç»„ä»¶props: [&#39;childprops&#39;]//æˆ–è€…props: {    childprops: String // è¿™æ ·å¯ä»¥æŒ‡å®šä¼ å…¥çš„ç±»å‹ï¼Œå¦‚æœç±»å‹ä¸å¯¹ï¼Œä¼šè­¦å‘Š}//å†è€…props: {    childprops: {        type: Array,        default: &#39;yuhui&#39; // è¿™æ ·å¯ä»¥æŒ‡å®šé»˜è®¤çš„å€¼    }}</code></pre><p>å­ç»„ä»¶æ³¨å†Œä¸€ä¸ªå±æ€§ï¼ˆpropsï¼‰childpropsï¼Œçˆ¶ç»„ä»¶ä¸­å¯¹è¿™ä¸ªå±æ€§ç»‘å®šå€¼ï¼Œå­ç»„ä»¶å¯ä»¥ç›´æ¥this.childpropsè°ƒç”¨çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®ã€‚</p><h3 id="2-å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’"><a href="#2-å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’" class="headerlink" title="2.å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’"></a>2.å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’</h3><p>å­ç»„ä»¶æƒ³è¦æ”¹å˜æ•°æ®è¿™åœ¨VUEé‡Œé¢æ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºVUEåªå…è®¸å•å‘æ•°æ®ä¼ é€’ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è§¦å‘äº‹ä»¶æ¥é€šçŸ¥çˆ¶ç»„ä»¶æ”¹å˜æ•°æ®ï¼Œä»è€Œè¾¾åˆ°æ”¹å˜å­ç»„ä»¶æ•°æ®çš„ç›®çš„ï¼Œå³æ‹¿åˆ°å­ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®ã€‚</p><pre><code class="vue">//å­ç»„ä»¶&lt;template&gt;    &lt;button @click=&#39;buttonClick&#39;&gt;click&lt;/button&gt;&lt;/template&gt;&lt;script&gt;    methods: {        buttonClick () {            this.$emit(&#39;childMethod&#39;, childData); // è§¦å‘childMethod,ä¼ é€’å‚æ•°childData        }    }&lt;/script&gt;//çˆ¶ç»„ä»¶&lt;parent&gt;    &lt;child v-on:childMethod=&#39;parentMethod&#39;&gt;&lt;/child&gt;&lt;/parent&gt;&lt;script&gt;    methods: {        parentMethod (data) {            // å‚æ•°dataå³å­ç»„ä»¶ä¼ é€’çš„childData        }    }&lt;/script&gt;</code></pre><p>this.$emit()ç›‘å¬è§¦å‘childMethodæ–¹æ³•ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ‰§è¡ŒparentMethodæ–¹æ³•,å¹¶æ‹¿åˆ°å‚æ•°ã€‚</p><h2 id="5-çŠ¶æ€ç®¡ç†"><a href="#5-çŠ¶æ€ç®¡ç†" class="headerlink" title="5.çŠ¶æ€ç®¡ç†"></a>5.çŠ¶æ€ç®¡ç†</h2><p>é’ˆå¯¹è¿™æ¬¡é¡¹ç›®ï¼Œæœ‰ä¸ªç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼šæ•°æ®åœ¨ç»„ä»¶é—´é€šä¿¡æ¯”è¾ƒé¢‘ç¹çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ç”¨çš„çˆ¶å­ç»„ä»¶ã€å…„å¼Ÿç»„ä»¶é€šä¿¡æ–¹å¼å°±ä¼šæ˜¾å¾—å¼‚å¸¸ç¹çï¼Œè€Œä¸”ä¸ä¾¿äºç®¡ç†ã€‚<br>ä»VUEä¸€ä¸ªç®€å•çš„çŠ¶æ€è‡ªç®¡ç†åº”ç”¨æ¥çœ‹ï¼š</p><pre><code class="vue">new Vue({  // state  data () {    return {      count: 0    }  },  // view  template:    &lt;div&gt;{{ count }}&lt;/div&gt;  // actions  methods: {    increment () {      this.count++    }  }})</code></pre><p>è¿™ä¸ªçŠ¶æ€è‡ªç®¡ç†åº”ç”¨åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>stateï¼šé©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼›</li><li>viewï¼šä»¥å£°æ˜æ–¹å¼å°†stateæ˜ å°„åˆ°è§†å›¾ï¼›</li><li>actionsï¼šå“åº”åœ¨ viewä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–ã€‚</li></ul><p>è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„ç»„ä»¶ä»æ ·å¼æ¸²æŸ“åˆ°æ•°æ®ç»‘å®šå†åˆ°æ•°æ®å˜åŒ–ï¼Œå•ä¸€çš„çŠ¶æ€æ¯”è¾ƒæ¸…æ™°ï¼Œé‡åˆ°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶ï¼Œè¿™ç§ç®€æ´æ€§å¾ˆå®¹æ˜“è¢«ç ´åä¸”éš¾ä»¥ç®¡ç†ã€‚å› æ­¤ï¼ŒæŠŠç»„ä»¶çš„å…±äº«çŠ¶æ€æŠ½å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªå…¨å±€å•ä¾‹æ¨¡å¼ç®¡ç†ï¼Œè¿™å°±æ˜¯VUEXèƒŒåçš„åŸºæœ¬æ€æƒ³ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/alexandermclean/cdn@5.0/img/assets/vuex.png" alt=""></p><p>åç»­ç”¨å®Œä¹‹åå†æ¥å†™: )</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> å®‰å…¨äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚æ­¥è°ƒç”¨</title>
      <link href="/2018/01/08/async&amp;promise/"/>
      <url>/2018/01/08/async&amp;promise/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼‚æ­¥ç»„åˆä½¿ç”¨"><a href="#å¼‚æ­¥ç»„åˆä½¿ç”¨" class="headerlink" title="å¼‚æ­¥ç»„åˆä½¿ç”¨"></a>å¼‚æ­¥ç»„åˆä½¿ç”¨</h2><pre><code class="javascript">function sleep(duration){    return new Promise(function(resolve){        setTimeout(resolve, duration);    })}async function changeColor(duration,color){    document.getElementById(&quot;traffic-light&quot;).style.background = color;    await sleep(duration);}async function main(){    while(true){        await changeColor(3000,&quot;green&quot;);        await changeColor(1000, &quot;yellow&quot;);        await changeColor(2000, &quot;red&quot;);    }}main()</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¹æ˜“å¿˜çš„ç”¨æ³•</title>
      <link href="/2018/01/08/basic/"/>
      <url>/2018/01/08/basic/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ä»£ç æ‰˜ç®¡"><a href="#1-ä»£ç æ‰˜ç®¡" class="headerlink" title="1.ä»£ç æ‰˜ç®¡"></a>1.ä»£ç æ‰˜ç®¡</h2><p>åŸºäºgitLabçš„ä»£ç ç‰ˆæœ¬ç®¡ç†ï¼Œç®€å•çš„å†™ä¸‹æµç¨‹å§</p><ol><li>git clone é¡¹ç›®è¿œç¨‹ä¸»æœºè·¯å¾„/git clone -b å…·ä½“åˆ†æ”¯ é¡¹ç›®è¿œç¨‹ä¸»æœºï¼›ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„remoteå«åšorigin</li><li>git remote add xxxï¼ˆè‡ªå·±çš„è¿œç¨‹ä¸»æœºåï¼‰ è¿œç¨‹ä¸»æœºè·¯å¾„</li><li>git push xxx æœ¬åœ°åˆ†æ”¯åç§°:è¿œç¨‹åˆ†æ”¯åç§°ï¼ˆæ²¡æœ‰åˆ†æ”¯åç§°æ—¶è‡ªåŠ¨åˆ›å»ºï¼‰</li><li>git fetch origin / git merge origin åˆ†æ”¯å</li></ol><p>åç»­ç”¨åˆ°äº†å†æ¥å†™å§: )</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®¹æ˜“å¿˜ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
